/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
/*jslint regexp: true */
/*global require, XMLHttpRequest, ActiveXObject,
  define, window, process, Packages,
  java, location, Components, FileUtils */

define('text',['module'], function (module) {
    'use strict';

    var text, fs, Cc, Ci, xpcIsWindows,
        progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'],
        xmlRegExp = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
        bodyRegExp = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
        hasLocation = typeof location !== 'undefined' && location.href,
        defaultProtocol = hasLocation && location.protocol && location.protocol.replace(/\:/, ''),
        defaultHostName = hasLocation && location.hostname,
        defaultPort = hasLocation && (location.port || undefined),
        buildMap = {},
        masterConfig = (module.config && module.config()) || {};

    text = {
        version: '2.0.14',

        strip: function (content) {
            //Strips <?xml ...?> declarations so that external SVG and XML
            //documents can be added to a document without worry. Also, if the string
            //is an HTML document, only the part inside the body tag is returned.
            if (content) {
                content = content.replace(xmlRegExp, "");
                var matches = content.match(bodyRegExp);
                if (matches) {
                    content = matches[1];
                }
            } else {
                content = "";
            }
            return content;
        },

        jsEscape: function (content) {
            return content.replace(/(['\\])/g, '\\$1')
                .replace(/[\f]/g, "\\f")
                .replace(/[\b]/g, "\\b")
                .replace(/[\n]/g, "\\n")
                .replace(/[\t]/g, "\\t")
                .replace(/[\r]/g, "\\r")
                .replace(/[\u2028]/g, "\\u2028")
                .replace(/[\u2029]/g, "\\u2029");
        },

        createXhr: masterConfig.createXhr || function () {
            //Would love to dump the ActiveX crap in here. Need IE 6 to die first.
            var xhr, i, progId;
            if (typeof XMLHttpRequest !== "undefined") {
                return new XMLHttpRequest();
            } else if (typeof ActiveXObject !== "undefined") {
                for (i = 0; i < 3; i += 1) {
                    progId = progIds[i];
                    try {
                        xhr = new ActiveXObject(progId);
                    } catch (e) {}

                    if (xhr) {
                        progIds = [progId];  // so faster next time
                        break;
                    }
                }
            }

            return xhr;
        },

        /**
         * Parses a resource name into its component parts. Resource names
         * look like: module/name.ext!strip, where the !strip part is
         * optional.
         * @param {String} name the resource name
         * @returns {Object} with properties "moduleName", "ext" and "strip"
         * where strip is a boolean.
         */
        parseName: function (name) {
            var modName, ext, temp,
                strip = false,
                index = name.lastIndexOf("."),
                isRelative = name.indexOf('./') === 0 ||
                             name.indexOf('../') === 0;

            if (index !== -1 && (!isRelative || index > 1)) {
                modName = name.substring(0, index);
                ext = name.substring(index + 1);
            } else {
                modName = name;
            }

            temp = ext || modName;
            index = temp.indexOf("!");
            if (index !== -1) {
                //Pull off the strip arg.
                strip = temp.substring(index + 1) === "strip";
                temp = temp.substring(0, index);
                if (ext) {
                    ext = temp;
                } else {
                    modName = temp;
                }
            }

            return {
                moduleName: modName,
                ext: ext,
                strip: strip
            };
        },

        xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,

        /**
         * Is an URL on another domain. Only works for browser use, returns
         * false in non-browser environments. Only used to know if an
         * optimized .js version of a text resource should be loaded
         * instead.
         * @param {String} url
         * @returns Boolean
         */
        useXhr: function (url, protocol, hostname, port) {
            var uProtocol, uHostName, uPort,
                match = text.xdRegExp.exec(url);
            if (!match) {
                return true;
            }
            uProtocol = match[2];
            uHostName = match[3];

            uHostName = uHostName.split(':');
            uPort = uHostName[1];
            uHostName = uHostName[0];

            return (!uProtocol || uProtocol === protocol) &&
                   (!uHostName || uHostName.toLowerCase() === hostname.toLowerCase()) &&
                   ((!uPort && !uHostName) || uPort === port);
        },

        finishLoad: function (name, strip, content, onLoad) {
            content = strip ? text.strip(content) : content;
            if (masterConfig.isBuild) {
                buildMap[name] = content;
            }
            onLoad(content);
        },

        load: function (name, req, onLoad, config) {
            //Name has format: some.module.filext!strip
            //The strip part is optional.
            //if strip is present, then that means only get the string contents
            //inside a body tag in an HTML string. For XML/SVG content it means
            //removing the <?xml ...?> declarations so the content can be inserted
            //into the current doc without problems.

            // Do not bother with the work if a build and text will
            // not be inlined.
            if (config && config.isBuild && !config.inlineText) {
                onLoad();
                return;
            }

            masterConfig.isBuild = config && config.isBuild;

            var parsed = text.parseName(name),
                nonStripName = parsed.moduleName +
                    (parsed.ext ? '.' + parsed.ext : ''),
                url = req.toUrl(nonStripName),
                useXhr = (masterConfig.useXhr) ||
                         text.useXhr;

            // Do not load if it is an empty: url
            if (url.indexOf('empty:') === 0) {
                onLoad();
                return;
            }

            //Load the text. Use XHR if possible and in a browser.
            if (!hasLocation || useXhr(url, defaultProtocol, defaultHostName, defaultPort)) {
                text.get(url, function (content) {
                    text.finishLoad(name, parsed.strip, content, onLoad);
                }, function (err) {
                    if (onLoad.error) {
                        onLoad.error(err);
                    }
                });
            } else {
                //Need to fetch the resource across domains. Assume
                //the resource has been optimized into a JS module. Fetch
                //by the module name + extension, but do not include the
                //!strip part to avoid file system issues.
                req([nonStripName], function (content) {
                    text.finishLoad(parsed.moduleName + '.' + parsed.ext,
                                    parsed.strip, content, onLoad);
                });
            }
        },

        write: function (pluginName, moduleName, write, config) {
            if (buildMap.hasOwnProperty(moduleName)) {
                var content = text.jsEscape(buildMap[moduleName]);
                write.asModule(pluginName + "!" + moduleName,
                               "define(function () { return '" +
                                   content +
                               "';});\n");
            }
        },

        writeFile: function (pluginName, moduleName, req, write, config) {
            var parsed = text.parseName(moduleName),
                extPart = parsed.ext ? '.' + parsed.ext : '',
                nonStripName = parsed.moduleName + extPart,
                //Use a '.js' file name so that it indicates it is a
                //script that can be loaded across domains.
                fileName = req.toUrl(parsed.moduleName + extPart) + '.js';

            //Leverage own load() method to load plugin value, but only
            //write out values that do not have the strip argument,
            //to avoid any potential issues with ! in file names.
            text.load(nonStripName, req, function (value) {
                //Use own write() method to construct full module value.
                //But need to create shell that translates writeFile's
                //write() to the right interface.
                var textWrite = function (contents) {
                    return write(fileName, contents);
                };
                textWrite.asModule = function (moduleName, contents) {
                    return write.asModule(moduleName, fileName, contents);
                };

                text.write(pluginName, nonStripName, textWrite, config);
            }, config);
        }
    };

    if (masterConfig.env === 'node' || (!masterConfig.env &&
            typeof process !== "undefined" &&
            process.versions &&
            !!process.versions.node &&
            !process.versions['node-webkit'] &&
            !process.versions['atom-shell'])) {
        //Using special require.nodeRequire, something added by r.js.
        fs = require.nodeRequire('fs');

        text.get = function (url, callback, errback) {
            try {
                var file = fs.readFileSync(url, 'utf8');
                //Remove BOM (Byte Mark Order) from utf8 files if it is there.
                if (file[0] === '\uFEFF') {
                    file = file.substring(1);
                }
                callback(file);
            } catch (e) {
                if (errback) {
                    errback(e);
                }
            }
        };
    } else if (masterConfig.env === 'xhr' || (!masterConfig.env &&
            text.createXhr())) {
        text.get = function (url, callback, errback, headers) {
            var xhr = text.createXhr(), header;
            xhr.open('GET', url, true);

            //Allow plugins direct access to xhr headers
            if (headers) {
                for (header in headers) {
                    if (headers.hasOwnProperty(header)) {
                        xhr.setRequestHeader(header.toLowerCase(), headers[header]);
                    }
                }
            }

            //Allow overrides specified in config
            if (masterConfig.onXhr) {
                masterConfig.onXhr(xhr, url);
            }

            xhr.onreadystatechange = function (evt) {
                var status, err;
                //Do not explicitly handle errors, those should be
                //visible via console output in the browser.
                if (xhr.readyState === 4) {
                    status = xhr.status || 0;
                    if (status > 399 && status < 600) {
                        //An http 4xx or 5xx error. Signal an error.
                        err = new Error(url + ' HTTP status: ' + status);
                        err.xhr = xhr;
                        if (errback) {
                            errback(err);
                        }
                    } else {
                        callback(xhr.responseText);
                    }

                    if (masterConfig.onXhrComplete) {
                        masterConfig.onXhrComplete(xhr, url);
                    }
                }
            };
            xhr.send(null);
        };
    } else if (masterConfig.env === 'rhino' || (!masterConfig.env &&
            typeof Packages !== 'undefined' && typeof java !== 'undefined')) {
        //Why Java, why is this so awkward?
        text.get = function (url, callback) {
            var stringBuffer, line,
                encoding = "utf-8",
                file = new java.io.File(url),
                lineSeparator = java.lang.System.getProperty("line.separator"),
                input = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file), encoding)),
                content = '';
            try {
                stringBuffer = new java.lang.StringBuffer();
                line = input.readLine();

                // Byte Order Mark (BOM) - The Unicode Standard, version 3.0, page 324
                // http://www.unicode.org/faq/utf_bom.html

                // Note that when we use utf-8, the BOM should appear as "EF BB BF", but it doesn't due to this bug in the JDK:
                // http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058
                if (line && line.length() && line.charAt(0) === 0xfeff) {
                    // Eat the BOM, since we've already found the encoding on this file,
                    // and we plan to concatenating this buffer with others; the BOM should
                    // only appear at the top of a file.
                    line = line.substring(1);
                }

                if (line !== null) {
                    stringBuffer.append(line);
                }

                while ((line = input.readLine()) !== null) {
                    stringBuffer.append(lineSeparator);
                    stringBuffer.append(line);
                }
                //Make sure we return a JavaScript string and not a Java string.
                content = String(stringBuffer.toString()); //String
            } finally {
                input.close();
            }
            callback(content);
        };
    } else if (masterConfig.env === 'xpconnect' || (!masterConfig.env &&
            typeof Components !== 'undefined' && Components.classes &&
            Components.interfaces)) {
        //Avert your gaze!
        Cc = Components.classes;
        Ci = Components.interfaces;
        Components.utils['import']('resource://gre/modules/FileUtils.jsm');
        xpcIsWindows = ('@mozilla.org/windows-registry-key;1' in Cc);

        text.get = function (url, callback) {
            var inStream, convertStream, fileObj,
                readData = {};

            if (xpcIsWindows) {
                url = url.replace(/\//g, '\\');
            }

            fileObj = new FileUtils.File(url);

            //XPCOM, you so crazy
            try {
                inStream = Cc['@mozilla.org/network/file-input-stream;1']
                           .createInstance(Ci.nsIFileInputStream);
                inStream.init(fileObj, 1, 0, false);

                convertStream = Cc['@mozilla.org/intl/converter-input-stream;1']
                                .createInstance(Ci.nsIConverterInputStream);
                convertStream.init(inStream, "utf-8", inStream.available(),
                Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);

                convertStream.readString(inStream.available(), readData);
                convertStream.close();
                inStream.close();
                callback(readData.value);
            } catch (e) {
                throw new Error((fileObj && fileObj.path || '') + ': ' + e);
            }
        };
    }
    return text;
});


define('text!pages/templates/boards.html',[],function () { return '<v-container>\r\n    <v-row>\r\n        <v-col\r\n            cols="12"\r\n            md="3"\r\n        >\r\n            <navigation></navigation>\r\n        </v-col>\r\n        <v-col\r\n            md="9"\r\n        >\r\n            <all-boards></all-boards>\r\n        </v-col>\r\n    </v-row>\r\n</v-container>';});


define('text!components/templates/mainNavigation.html',[],function () { return '<v-list dense>\r\n    <router-link\r\n        v-for="item in items"\r\n        :key="item.name"\r\n        :to="item.path"\r\n        tag="v-list-item"\r\n        link\r\n        :class="{\'v-list-item--active primary--text\' :  item.path === path }"\r\n    >\r\n        <v-icon v-text="item.icon"></v-icon>\r\n        <v-list-item-content>\r\n            <v-list-item-title class="ml-4 font-weight-bold" v-text="item.name"></v-list-item-title>\r\n        </v-list-item-content>\r\n    </router-link>\r\n</v-list>';});

define('components/mainNavigation',['text!components/templates/mainNavigation.html'],
(template) => {
    let items = [{
        name: 'Boards',
        icon: 'mdi-credit-card-multiple',
        path: '/boards'
    },{
        name: 'Upcoming Features',
        icon: 'mdi-newspaper',
        path: '/upcoming'
    }];

    return Vue.extend({
        template,
        data() {
            return {
                items
            }
        },
        computed: {
            path(){
                return this.$router.currentRoute.path;
            }
        }
    });
});

define('text!components/templates/allBoards.html',[],function () { return '<section>\r\n    <div v-if="starredBoards.length > 0">\r\n        <v-list-item>\r\n            <v-list-item-icon>\r\n                <v-icon>mdi-star-outline</v-icon>\r\n            </v-list-item-icon>\r\n            <v-list-item-title class="font-weight-bold">Starred Boards</v-list-item-title>\r\n        </v-list-item>\r\n        <div class="d-flex flex-wrap">\r\n            <board-card v-for="board in starredBoards" :board="board"></board-card>\r\n        </div>\r\n    </div>\r\n\r\n    <div>\r\n        <v-list-item>\r\n            <v-list-item-icon>\r\n                <v-icon>mdi-account-outline</v-icon>\r\n            </v-list-item-icon>\r\n            <v-list-item-title class="font-weight-bold">Personal Boards</v-list-item-title>\r\n        </v-list-item>\r\n        <div class="d-flex flex-wrap">\r\n            <board-card v-for="board in boards" :board="board"></board-card>\r\n            <div @click="$refs.createBoard.open()" class="board-card ml-4 grey lighten-4" v-ripple>\r\n                <div class="d-flex fill-height align-center justify-center">\r\n                    <b class="board-card_title black--text font-weight-light">Create new board</b>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <v-expansion-panels flat>\r\n        <v-expansion-panel>\r\n            <v-expansion-panel-header class="pa-0 pr-2 ma-0">\r\n                <v-list-item class="pa-0 pl-2 ma-0">\r\n                    <v-list-item-icon>\r\n                        <v-icon>mdi-window-closed</v-icon>\r\n                    </v-list-item-icon>\r\n                    <v-list-item-title class="font-weight-bold">Closed Boards</v-list-item-title>\r\n                </v-list-item>\r\n            </v-expansion-panel-header>\r\n            <v-expansion-panel-content>\r\n                <div class="d-flex align-start">\r\n                    <board-card v-for="board in closedBoards" :board="board"></board-card>\r\n                    <div class="d-flex flex-column align-center mx-auto">\r\n                        <v-icon large>mdi-window-closed</v-icon>\r\n                        <h4 class="text-center font-weight-light mx-auto">The boards you close will appear here.</h4>\r\n                    </div>\r\n                </div>\r\n            </v-expansion-panel-content>\r\n        </v-expansion-panel>\r\n    </v-expansion-panels>\r\n\r\n    <create-board ref="createBoard"></create-board>\r\n</section>';});


define('text!components/templates/boardCard.html',[],function () { return '<router-link\r\n    tag="div"\r\n    :to="{name: \'board\', params: {id: board.id}}"\r\n    :style="\'background-color: \'+board.background" \r\n    class="board-card \r\n        d-flex flex-column \r\n        ml-4 mb-4 \r\n        pa-2\r\n        rounded-sm" \r\n    v-ripple\r\n>\r\n    <h3 class="board-card_title">{{ board.title }}</h3>\r\n    <div class="board-card_star">\r\n        <v-btn icon color="white" @click.prevent="toggleStarred">\r\n            <v-icon v-if="board.starred">mdi-star</v-icon>\r\n            <v-icon v-else>mdi-star-outline</v-icon>\r\n        </v-btn>\r\n    </div>\r\n</router-link>';});

define('store/modules/boards/state',[],
() => {
    return {
        boards: []
    };
});
define('store/modules/boards/getters',[],
() => {
    return {
        getAll(state){
            return state.boards;
        }
    };
});
define('store/modules/boards/mutationTypes',[],
() => {
    const SET_BOARDS = 'SET_BOARDS';
    const CREATE_BOARD = 'CREATE_BOARD';
    const UPDATE_BOARD = 'UPDATE_BOARD';
    const DELETE_BOARD = 'DELETE_BOARD';

    return {
        SET_BOARDS,
        CREATE_BOARD,
        UPDATE_BOARD,
        DELETE_BOARD
    };
});
define('store/modules/boards/mutations',['store/modules/boards/mutationTypes'],
(types) => {
    return {
        [types.SET_BOARDS](state, boards){
            state.boards = [];
            boards.forEach(board => {
                state.boards.push( board );
            });
        },
        [types.CREATE_BOARD](state, board){
            state.boards.push( board );
        },
        [types.UPDATE_BOARD](state, board){
            let boardIndex = state.boards.indexOf( state.boards.find(b => String(b.id) === String(board.id)) );
            for(let prop in board){
                state.boards[boardIndex][prop] = board[prop];
            }
        },
        [types.DELETE_BOARD](state, id){
            let index = state.boards.indexOf( state.boards.find(c => String(c.id) === String(id)) );
            state.boards.splice(index, 1);
        }
    };
});
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define('dexie',t):n.Dexie=t()}(this,function(){"use strict";function n(n,t){return"object"!=typeof t?n:(In(t).forEach(function(e){n[e]=t[e]}),n)}function t(n,t){return Bn.call(n,t)}function e(n,t){"function"==typeof t&&(t=t(Tn(n))),In(t).forEach(function(e){r(n,e,t[e])})}function r(e,r,i,o){Fn(e,r,n(i&&t(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function i(n){return{from:function(t){return n.prototype=Object.create(t.prototype),r(n.prototype,"constructor",n),{extend:e.bind(null,n.prototype)}}}}function o(n,t){var e,r=Nn(n,t);return r||(e=Tn(n))&&o(e,t)}function u(n,t,e){return Mn.call(n,t,e)}function a(n,t){return t(n)}function c(n){if(!n)throw new Error("Assertion Failed")}function s(n){Kn.setImmediate?setImmediate(n):setTimeout(n,0)}function f(n,t){return n.reduce(function(n,e,r){var i=t(e,r);return i&&(n[i[0]]=i[1]),n},{})}function l(n,t){return function(){try{n.apply(this,arguments)}catch(n){t(n)}}}function h(n,t,e){try{n.apply(null,e)}catch(n){t&&t(n)}}function d(n,e){if(t(n,e))return n[e];if(!e)return n;if("string"!=typeof e){for(var r=[],i=0,o=e.length;i<o;++i){var u=d(n,e[i]);r.push(u)}return r}var a=e.indexOf(".");if(-1!==a){var c=n[e.substr(0,a)];return void 0===c?void 0:d(c,e.substr(a+1))}}function v(n,t,e){if(n&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(n)))if("string"!=typeof t&&"length"in t){c("string"!=typeof e&&"length"in e);for(var r=0,i=t.length;r<i;++r)v(n,t[r],e[r])}else{var o=t.indexOf(".");if(-1!==o){var u=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===e?delete n[u]:n[u]=e;else{var s=n[u];s||(s=n[u]={}),v(s,a,e)}}else void 0===e?delete n[t]:n[t]=e}}function p(n,t){"string"==typeof t?v(n,t,void 0):"length"in t&&[].map.call(t,function(t){v(n,t,void 0)})}function y(n){var e={};for(var r in n)t(n,r)&&(e[r]=n[r]);return e}function m(n){return qn.apply([],n)}function g(n){if(!n||"object"!=typeof n)return n;var e;if(Cn(n)){e=[];for(var r=0,i=n.length;r<i;++r)e.push(g(n[r]))}else if(Rn.indexOf(n.constructor)>=0)e=n;else{e=n.constructor?Object.create(n.constructor.prototype):{};for(var o in n)t(n,o)&&(e[o]=g(n[o]))}return e}function b(n,e,r,i){return r=r||{},i=i||"",In(n).forEach(function(o){if(t(e,o)){var u=n[o],a=e[o];"object"==typeof u&&"object"==typeof a&&u&&a&&""+u.constructor==""+a.constructor?b(u,a,r,i+o+"."):u!==a&&(r[i+o]=e[o])}else r[i+o]=void 0}),In(e).forEach(function(o){t(n,o)||(r[i+o]=e[o])}),r}function w(n){var t,e,r,i;if(1===arguments.length){if(Cn(n))return n.slice();if(this===zn&&"string"==typeof n)return[n];if(i=Vn(n)){for(e=[];r=i.next(),!r.done;)e.push(r.value);return e}if(null==n)return[n];if("number"==typeof(t=n.length)){for(e=new Array(t);t--;)e[t]=n[t];return e}return[n]}for(t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return e}function _(n,t){Ln=n,Wn=t}function k(){if(Qn)try{throw k.arguments,new Error}catch(n){return n}return new Error}function x(n,t){var e=n.stack;return e?(t=t||0,0===e.indexOf(n.name)&&(t+=(n.name+n.message).split("\n").length),e.split("\n").slice(t).filter(Wn).map(function(n){return"\n"+n}).join("")):""}function j(n,t){return function(){return console.warn(n+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+x(k(),1)),t.apply(this,arguments)}}function P(n,t){this._e=k(),this.name=n,this.message=t}function E(n,t){return n+". Errors: "+t.map(function(n){return n.toString()}).filter(function(n,t,e){return e.indexOf(n)===t}).join("\n")}function A(n,t,e,r){this._e=k(),this.failures=t,this.failedKeys=r,this.successCount=e}function O(n,t){this._e=k(),this.name="BulkError",this.failures=t,this.message=E(n,t)}function S(n,t){if(!n||n instanceof P||n instanceof TypeError||n instanceof SyntaxError||!n.name||!nt[n.name])return n;var e=new nt[n.name](t||n.message,n);return"stack"in n&&r(e,"stack",{get:function(){return this.inner.stack}}),e}function D(){}function I(n){return n}function C(n,t){return null==n||n===I?t:function(e){return t(n(e))}}function K(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function T(n,t){return n===D?t:function(){var e=n.apply(this,arguments);void 0!==e&&(arguments[0]=e);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?K(r,this.onsuccess):r),i&&(this.onerror=this.onerror?K(i,this.onerror):i),void 0!==o?o:e}}function B(n,t){return n===D?t:function(){n.apply(this,arguments);var e=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?K(e,this.onsuccess):e),r&&(this.onerror=this.onerror?K(r,this.onerror):r)}}function F(t,e){return t===D?e:function(r){var i=t.apply(this,arguments);n(r,i);var o=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?K(o,this.onsuccess):o),u&&(this.onerror=this.onerror?K(u,this.onerror):u),void 0===i?void 0===a?void 0:a:n(i,a)}}function N(n,t){return n===D?t:function(){return!1!==t.apply(this,arguments)&&n.apply(this,arguments)}}function M(n,t){return n===D?t:function(){var e=n.apply(this,arguments);if(e&&"function"==typeof e.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return e.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}function q(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=D,this._lib=!1;var t=this._PSD=xt;if(Ln&&(this._stackHolder=k(),this._prev=null,this._numPrev=0),"function"!=typeof n){if(n!==et)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&V(this,this._value))}this._state=null,this._value=null,++t.ref,U(this,n)}function R(n,t,e,r,i){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r,this.psd=i}function U(n,t){try{t(function(t){if(null===n._state){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var e=n._lib&&J();t&&"function"==typeof t.then?U(n,function(n,e){t instanceof q?t._then(n,e):t.then(n,e)}):(n._state=!0,n._value=t,z(n)),e&&Y()}},V.bind(null,n))}catch(t){V(n,t)}}function V(n,t){if(bt.push(t),null===n._state){var e=n._lib&&J();t=_t(t),n._state=!1,n._value=t,Ln&&null!==t&&"object"==typeof t&&!t._promise&&h(function(){var e=o(t,"stack");t._promise=n,r(t,"stack",{get:function(){return dt?e&&(e.get?e.get.apply(t):e.value):n.stack}})}),Z(n),z(n),e&&Y()}}function z(n){var t=n._listeners;n._listeners=[];for(var e=0,r=t.length;e<r;++e)L(n,t[e]);var i=n._PSD;--i.ref||i.finalize(),0===Pt&&(++Pt,pt(function(){0==--Pt&&$()},[]))}function L(n,t){if(null===n._state)return void n._listeners.push(t);var e=n._state?t.onFulfilled:t.onRejected;if(null===e)return(n._state?t.resolve:t.reject)(n._value);++t.psd.ref,++Pt,pt(W,[e,n,t])}function W(n,t,e){try{wt=t;var r,i=t._value;t._state?r=n(i):(bt.length&&(bt=[]),r=n(i),-1===bt.indexOf(i)&&nn(t)),e.resolve(r)}catch(n){e.reject(n)}finally{wt=null,0==--Pt&&$(),--e.psd.ref||e.psd.finalize()}}function Q(n,t,e){if(t.length===e)return t;var r="";if(!1===n._state){var i,o,u=n._value;null!=u?(i=u.name||"Error",o=u.message||u,r=x(u,0)):(i=u,o=""),t.push(i+(o?": "+o:"")+r)}return Ln&&(r=x(n._stackHolder,2),r&&-1===t.indexOf(r)&&t.push(r),n._prev&&Q(n._prev,t,e)),t}function H(n,t){var e=t?t._numPrev+1:0;e<rt&&(n._prev=t,n._numPrev=e)}function G(){J()&&Y()}function J(){var n=yt;return yt=!1,mt=!1,n}function Y(){var n,t,e;do{for(;jt.length>0;)for(n=jt,jt=[],e=n.length,t=0;t<e;++t){var r=n[t];r[0].apply(null,r[1])}}while(jt.length>0);yt=!0,mt=!0}function $(){var n=gt;gt=[],n.forEach(function(n){n._PSD.onunhandled.call(null,n._value,n)});for(var t=Et.slice(0),e=t.length;e;)t[--e]()}function X(n){function t(){n(),Et.splice(Et.indexOf(t),1)}Et.push(t),++Pt,pt(function(){0==--Pt&&$()},[])}function Z(n){gt.some(function(t){return t._value===n._value})||gt.push(n)}function nn(n){for(var t=gt.length;t;)if(gt[--t]._value===n._value)return void gt.splice(t,1)}function tn(n){return new q(et,!1,n)}function en(n,t){var e=xt;return function(){var r=J(),i=xt;try{return fn(e,!0),n.apply(this,arguments)}catch(n){t&&t(n)}finally{fn(i,!1),r&&Y()}}}function rn(t,e,r,i){var o=xt,u=Object.create(o);u.parent=o,u.ref=0,u.global=!1,u.id=++Tt;var a=kt.env;u.env=ht?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,resolve:q.resolve,reject:q.reject,nthen:pn(a.nthen,u),gthen:pn(a.gthen,u)}:{},e&&n(u,e),++o.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=hn(u,t,r,i);return 0===u.ref&&u.finalize(),c}function on(){return St.id||(St.id=++Dt),++St.awaits,St.echoes+=it,St.id}function un(n){!St.awaits||n&&n!==St.id||(0==--St.awaits&&(St.id=0),St.echoes=St.awaits*it)}function an(n){return St.echoes&&n&&n.constructor===ft?(on(),n.then(function(n){return un(),n},function(n){return un(),Ft(n)})):n}function cn(n){++Kt,St.echoes&&0!=--St.echoes||(St.echoes=St.id=0),It.push(xt),fn(n,!0)}function sn(){var n=It[It.length-1];It.pop(),fn(n,!1)}function fn(n,t){var e=xt;if((t?!St.echoes||Ct++&&n===xt:!Ct||--Ct&&n===xt)||dn(t?cn.bind(null,n):sn),n!==xt&&(xt=n,e===kt&&(kt.env=ln()),ht)){var r=kt.env.Promise,i=n.env;at.then=i.nthen,r.prototype.then=i.gthen,(e.global||n.global)&&(Object.defineProperty(Kn,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject)}}function ln(){var n=Kn.Promise;return ht?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(Kn,"Promise"),all:n.all,race:n.race,resolve:n.resolve,reject:n.reject,nthen:at.then,gthen:n.prototype.then}:{}}function hn(n,t,e,r,i){var o=xt;try{return fn(n,!0),t(e,r,i)}finally{fn(o,!1)}}function dn(n){st.call(ut,n)}function vn(n,t,e){return"function"!=typeof n?n:function(){var r=xt;e&&on(),fn(t,!0);try{return n.apply(this,arguments)}finally{fn(r,!1)}}}function pn(n,t){return function(e,r){return n.call(this,vn(e,t,!1),vn(r,t,!1))}}function yn(t,e){var r;try{r=e.onuncatched(t)}catch(n){}if(!1!==r)try{var i,o={promise:e,reason:t};if(Kn.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(Bt,!0,!0),n(i,o)):Kn.CustomEvent&&(i=new CustomEvent(Bt,{detail:o}),n(i,o)),i&&Kn.dispatchEvent&&(dispatchEvent(i),!Kn.PromiseRejectionEvent&&Kn.onunhandledrejection))try{Kn.onunhandledrejection(i)}catch(n){}i.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(n){}}function mn(n){function t(n,t,o){if("object"==typeof n)return e(n);t||(t=N),o||(o=D);var u={subscribers:[],fire:o,subscribe:function(n){-1===u.subscribers.indexOf(n)&&(u.subscribers.push(n),u.fire=t(u.fire,n))},unsubscribe:function(n){u.subscribers=u.subscribers.filter(function(t){return t!==n}),u.fire=u.subscribers.reduce(t,o)}};return r[n]=i[n]=u,u}function e(n){In(n).forEach(function(e){var r=n[e];if(Cn(r))t(e,n[e][0],n[e][1]);else{if("asap"!==r)throw new Zn.InvalidArgument("Invalid event config");var i=t(e,I,function(){for(var n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];i.subscribers.forEach(function(n){s(function(){n.apply(null,t)})})})}})}var r={},i=function(t,e){if(e){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[t].subscribe.apply(null,o),n}if("string"==typeof t)return r[t]};i.addEventType=t;for(var o=1,u=arguments.length;o<u;++o)t(arguments[o]);return i}function gn(i,o){function s(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function p(n,t,e){var r=nt._createTransaction(Xn,Wn,Un);r.create(t),r._completion.catch(e);var i=r._reject.bind(r);rn(function(){xt.trans=r,0===n?(In(Un).forEach(function(n){P(t,n,Un[n].primKey,Un[n].indexes)}),q.follow(function(){return nt.on.populate.fire(r)}).catch(i)):_(n,r,t).catch(i)})}function _(n,t,e){function r(){return i.length?q.resolve(i.shift()(t.idbtrans)).then(r):q.resolve()}var i=[],o=Vn.filter(function(t){return t._cfg.version===n})[0];if(!o)throw new Zn.Upgrade("Dexie specification of currently installed DB version is missing");Un=nt._dbSchema=o._cfg.dbschema;var u=!1;return Vn.filter(function(t){return t._cfg.version>n}).forEach(function(n){i.push(function(){var r=Un,i=n._cfg.dbschema;vn(r,e),vn(i,e),Un=nt._dbSchema=i;var o=x(r,i);if(o.add.forEach(function(n){P(e,n[0],n[1].primKey,n[1].indexes)}),o.change.forEach(function(n){if(n.recreate)throw new Zn.Upgrade("Not yet support for changing primary key");var t=e.objectStore(n.name);n.add.forEach(function(n){K(t,n)}),n.change.forEach(function(n){t.deleteIndex(n.name),K(t,n)}),n.del.forEach(function(n){t.deleteIndex(n)})}),n._cfg.contentUpgrade)return u=!0,q.follow(function(){n._cfg.contentUpgrade(t)})}),i.push(function(t){u&&Wt||S(n._cfg.dbschema,t)})}),r().then(function(){E(Un,e)})}function x(n,t){var e={del:[],add:[],change:[]};for(var r in n)t[r]||e.del.push(r);for(r in t){var i=n[r],o=t[r];if(i){var u={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)u.recreate=!0,e.change.push(u);else{var a=i.idxByName,c=o.idxByName;for(var s in a)c[s]||u.del.push(s);for(s in c){var f=a[s],l=c[s];f?f.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&e.change.push(u)}}else e.add.push([r,o])}return e}function P(n,t,e,r){var i=n.db.createObjectStore(t,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(function(n){K(i,n)}),i}function E(n,t){In(n).forEach(function(e){t.db.objectStoreNames.contains(e)||P(t,e,n[e].primKey,n[e].indexes)})}function S(n,t){for(var e=0;e<t.db.objectStoreNames.length;++e){var r=t.db.objectStoreNames[e];null==n[r]&&t.db.deleteObjectStore(r)}}function K(n,t){n.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function N(n,t,e){if($n||xt.letThrough){var r=nt._createTransaction(n,t,Un);try{r.create()}catch(n){return Ft(n)}return r._promise(n,function(n,t){return rn(function(){return xt.trans=r,e(n,t,r)})}).then(function(n){return r._completion.then(function(){return n})})}if(!Jn){if(!Mn)return Ft(new Zn.DatabaseClosed);nt.open().catch(D)}return tt.then(function(){return N(n,t,e)})}function R(n,t,e){var r=arguments.length;if(r<2)throw new Zn.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return e=i.pop(),[n,m(i),e]}function U(n,t,e){this.name=n,this.schema=t,this._tx=e,this.hook=Qn[n]?Qn[n].hook:mn(null,{creating:[T,D],reading:[C,I],updating:[F,D],deleting:[B,D]})}function V(n,t,e){return(e?jn:kn)(function(e){n.push(e),t&&t()})}function z(n,t,e,r,i){return new q(function(o,u){var a=e.length,c=a-1;if(0===a)return o();if(r){var s,f=jn(u),l=_n(null);h(function(){for(var r=0;r<a;++r){s={onsuccess:null,onerror:null};var u=e[r];i.call(s,u[0],u[1],t);var h=n.delete(u[0]);h._hookCtx=s,h.onerror=f,h.onsuccess=r===c?_n(o):l}},function(n){throw s.onerror&&s.onerror(n),n})}else for(var d=0;d<a;++d){var v=n.delete(e[d]);v.onerror=kn(u),d===c&&(v.onsuccess=en(function(){return o()}))}})}function L(n,t,e,r){var i=this;this.db=nt,this.mode=n,this.storeNames=t,this.idbtrans=null,this.on=mn(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(n,t){i._resolve=n,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(n){var t=i.active;return i.active=!1,i.on.error.fire(n),i.parent?i.parent._reject(n):t&&i.idbtrans&&i.idbtrans.abort(),Ft(n)})}function W(n,t,e){this._ctx={table:n,index:":id"===t?null:t,or:e}}function Q(n,t){var e=null,r=null;if(t)try{e=t()}catch(n){r=n}var i=n._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:e,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function H(n,t){return!(n.filter||n.algorithm||n.or)&&(t?n.justLimit:!n.replayFilter)}function G(n,t){return n._cfg.version-t._cfg.version}function J(n,t,e){t.forEach(function(t){var i=e[t];n.forEach(function(n){t in n||(n===L.prototype||n instanceof L?r(n,t,{get:function(){return this.table(t)}}):n[t]=new U(t,i))})})}function Y(n){n.forEach(function(n){for(var t in n)n[t]instanceof U&&delete n[t]})}function $(n,t,e,r,i,o){var u=o?function(n,t,r){return e(o(n),t,r)}:e,a=en(u,i);n.onerror||(n.onerror=kn(i)),n.onsuccess=t?l(function(){var e=n.result;if(e){var o=function(){e.continue()};t(e,function(n){o=n},r,i)&&a(e.value,e,function(n){o=n}),o()}else r()},i):l(function(){var t=n.result;if(t){var e=function(){t.continue()};a(t.value,t,function(n){e=n}),e()}else r()},i)}function X(n){var t=[];return n.split(",").forEach(function(n){n=n.trim();var e=n.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(e)?e.match(/^\[(.*)\]$/)[1].split("+"):e;t.push(new An(e,r||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),Cn(r),/\./.test(n)))}),t}function Z(n,t){return qn.cmp(n,t)}function nn(n,t){return Z(n,t)<0?n:t}function tn(n,t){return Z(n,t)>0?n:t}function an(n,t){return qn.cmp(n,t)}function cn(n,t){return qn.cmp(t,n)}function sn(n,t){return n<t?-1:n===t?0:1}function fn(n,t){return n>t?-1:n===t?0:1}function ln(n,t){return n?t?function(){return n.apply(this,arguments)&&t.apply(this,arguments)}:n:t}function dn(){if(nt.verno=Hn.version/10,nt._dbSchema=Un={},Wn=u(Hn.objectStoreNames,0),0!==Wn.length){var n=Hn.transaction(Sn(Wn),"readonly");Wn.forEach(function(t){for(var e=n.objectStore(t),r=e.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new An(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,i),u=[],a=0;a<e.indexNames.length;++a){var c=e.index(e.indexNames[a]);r=c.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf(".");var s=new An(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,i);u.push(s)}Un[t]=new On(t,o,u,{})}),J([Qn],In(Un),Un)}}function vn(n,t){for(var e=t.db.objectStoreNames,r=0;r<e.length;++r){var i=e[r],o=t.objectStore(i);Tn="getAll"in o;for(var a=0;a<o.indexNames.length;++a){var c=o.indexNames[a],s=o.index(c).keyPath,f="string"==typeof s?s:"["+u(s).join("+")+"]";if(n[i]){var l=n[i].idxByName[f];l&&(l.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Kn.WorkerGlobalScope&&Kn instanceof Kn.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(Tn=!1)}function pn(n){nt.on("blocked").fire(n),zt.filter(function(n){return n.name===nt.name&&n!==nt&&!n._vcFired}).map(function(t){return t.on("versionchange").fire(n)})}var yn,bn,Tn,Bn=gn.dependencies,Fn=n({addons:gn.addons,autoOpen:!0,indexedDB:Bn.indexedDB,IDBKeyRange:Bn.IDBKeyRange},o),Nn=Fn.addons,Mn=Fn.autoOpen,qn=Fn.indexedDB,Rn=Fn.IDBKeyRange,Un=this._dbSchema={},Vn=[],Wn=[],Qn={},Hn=null,Gn=null,Jn=!1,Yn=null,$n=!1,Xn="readwrite",nt=this,tt=new q(function(n){yn=n}),et=new q(function(n,t){bn=t}),rt=!0,it=!!Dn(qn);this.version=function(n){if(Hn||Jn)throw new Zn.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var t=Vn.filter(function(t){return t._cfg.version===n})[0];return t||(t=new s(n),Vn.push(t),Vn.sort(G),rt=!1,t)},n(s.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?n(this._cfg.storesSource,t):t;var e={};Vn.forEach(function(t){n(e,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(e,r),Un=nt._dbSchema=r,Y([Qn,nt,L.prototype]),J([Qn,nt,L.prototype,this._cfg.tables],In(r),r),Wn=In(r),this},upgrade:function(n){return this._cfg.contentUpgrade=n,this},_parseStoresSpec:function(n,t){In(n).forEach(function(e){if(null!==n[e]){var r={},i=X(n[e]),o=i.shift();if(o.multi)throw new Zn.Schema("Primary key cannot be multi-valued");o.keyPath&&v(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(n){if(n.auto)throw new Zn.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new Zn.Schema("Index must have a name and cannot be an empty string");v(r,n.keyPath,n.compound?n.keyPath.map(function(){return""}):"")}),t[e]=new On(e,o,i,r)}})}}),this._allTables=Qn,this._createTransaction=function(n,t,e,r){return new L(n,t,e,r)},this._whenReady=function(n){return $n||xt.letThrough?n():new q(function(n,t){if(!Jn){if(!Mn)return void t(new Zn.DatabaseClosed);nt.open().catch(D)}tt.then(n,t)}).then(n)},this.verno=0,this.open=function(){if(Jn||Hn)return tt.then(function(){return Gn?Ft(Gn):nt});Ln&&(et._stackHolder=k()),Jn=!0,Gn=null,$n=!1;var n=yn,t=null;return q.race([et,new q(function(n,e){if(!qn)throw new Zn.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var r=rt?qn.open(i):qn.open(i,Math.round(10*nt.verno));if(!r)throw new Zn.MissingAPI("IndexedDB API not available");r.onerror=kn(e),r.onblocked=en(pn),r.onupgradeneeded=en(function(n){if(t=r.transaction,rt&&!nt._allowEmptyDB){r.onerror=Pn,t.abort(),r.result.close();var o=qn.deleteDatabase(i);o.onsuccess=o.onerror=en(function(){e(new Zn.NoSuchDatabase("Database "+i+" doesnt exist"))})}else{t.onerror=kn(e);p((n.oldVersion>Math.pow(2,62)?0:n.oldVersion)/10,t,e)}},e),r.onsuccess=en(function(){if(t=null,Hn=r.result,zt.push(nt),rt)dn();else if(Hn.objectStoreNames.length>0)try{vn(Un,Hn.transaction(Sn(Hn.objectStoreNames),"readonly"))}catch(n){}Hn.onversionchange=en(function(n){nt._vcFired=!0,nt.on("versionchange").fire(n)}),it||"__dbnames"===i||Ot.dbnames.put({name:i}).catch(D),n()},e)})]).then(function(){return Yn=[],q.resolve(gn.vip(nt.on.ready.fire)).then(function n(){if(Yn.length>0){var t=Yn.reduce(M,D);return Yn=[],q.resolve(gn.vip(t)).then(n)}})}).finally(function(){Yn=null}).then(function(){return Jn=!1,nt}).catch(function(n){try{t&&t.abort()}catch(n){}return Jn=!1,nt.close(),Gn=n,Ft(Gn)}).finally(function(){$n=!0,n()})},this.close=function(){var n=zt.indexOf(nt);if(n>=0&&zt.splice(n,1),Hn){try{Hn.close()}catch(n){}Hn=null}Mn=!1,Gn=new Zn.DatabaseClosed,Jn&&bn(Gn),tt=new q(function(n){yn=n}),et=new q(function(n,t){bn=t})},this.delete=function(){var n=arguments.length>0;return new q(function(t,e){function r(){nt.close();var n=qn.deleteDatabase(i);n.onsuccess=en(function(){it||Ot.dbnames.delete(i).catch(D),t()}),n.onerror=kn(e),n.onblocked=pn}if(n)throw new Zn.InvalidArgument("Arguments not allowed in db.delete()");Jn?tt.then(r):r()})},this.backendDB=function(){return Hn},this.isOpen=function(){return null!==Hn},this.hasBeenClosed=function(){return Gn&&Gn instanceof Zn.DatabaseClosed},this.hasFailed=function(){return null!==Gn},this.dynamicallyOpened=function(){return rt},this.name=i,e(this,{tables:{get:function(){return In(Qn).map(function(n){return Qn[n]})}}}),this.on=mn(this,"populate","blocked","versionchange",{ready:[M,D]}),this.on.ready.subscribe=a(this.on.ready.subscribe,function(n){return function(t,e){gn.vip(function(){$n?(Gn||q.resolve().then(t),e&&n(t)):Yn?(Yn.push(t),e&&n(t)):(n(t),e||n(function n(){nt.on.ready.unsubscribe(t),nt.on.ready.unsubscribe(n)}))})}}),this.transaction=function(){var n=R.apply(this,arguments);return this._transaction.apply(this,n)},this._transaction=function(n,t,e){function r(){return q.resolve().then(function(){var t=xt.transless||xt,r=nt._createTransaction(n,u,Un,i),o={trans:r,transless:t};i?r.idbtrans=i.idbtrans:r.create(),e.constructor===lt&&on();var a,c=q.follow(function(){if(a=e.call(r,r))if(a.constructor===ft){var n=un.bind(null,null);a.then(n,n)}else"function"==typeof a.next&&"function"==typeof a.throw&&(a=En(a))},o);return(a&&"function"==typeof a.then?q.resolve(a).then(function(n){return r.active?n:Ft(new Zn.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return a})).then(function(n){return i&&r._resolve(),r._completion.then(function(){return n})}).catch(function(n){return r._reject(n),Ft(n)})})}var i=xt.trans;i&&i.db===nt&&-1===n.indexOf("!")||(i=null);var o=-1!==n.indexOf("?");n=n.replace("!","").replace("?","");try{var u=t.map(function(n){var t=n instanceof U?n.name:n;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==n||"readonly"==n)n="readonly";else{if("rw"!=n&&n!=Xn)throw new Zn.InvalidArgument("Invalid transaction mode: "+n);n=Xn}if(i){if("readonly"===i.mode&&n===Xn){if(!o)throw new Zn.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&u.forEach(function(n){if(i&&-1===i.storeNames.indexOf(n)){if(!o)throw new Zn.SubTransaction("Table "+n+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,function(t,e){e(n)}):Ft(n)}return i?i._promise(n,r,"lock"):xt.trans?hn(xt.transless,function(){return nt._whenReady(r)}):nt._whenReady(r)},this.table=function(n){if(!t(Qn,n))throw new Zn.InvalidTable("Table "+n+" does not exist");return Qn[n]},e(U.prototype,{_trans:function(n,t,e){var r=this._tx||xt.trans;return r&&r.db===nt?r===xt.trans?r._promise(n,t,e):rn(function(){return r._promise(n,t,e)},{trans:r,transless:xt.transless||xt}):N(n,[this.name],t)},_idbstore:function(n,t,e){function r(n,e,r){if(-1===r.storeNames.indexOf(i))throw new Zn.NotFound("Table"+i+" not part of transaction");return t(n,e,r.idbtrans.objectStore(i),r)}var i=this.name;return this._trans(n,r,e)},get:function(n,t){if(n&&n.constructor===Object)return this.where(n).first(t);var e=this;return this._idbstore("readonly",function(t,r,i){var o=i.get(n);o.onerror=kn(r),o.onsuccess=en(function(){t(e.hook.reading.fire(o.result))},r)}).then(t)},where:function(n){if("string"==typeof n)return new W(this,n);if(Cn(n))return new W(this,"["+n.join("+")+"]");var t=In(n);if(1===t.length)return this.where(t[0]).equals(n[t[0]]);var e=this.schema.indexes.concat(this.schema.primKey).filter(function(n){return n.compound&&t.every(function(t){return n.keyPath.indexOf(t)>=0})&&n.keyPath.every(function(n){return t.indexOf(n)>=0})})[0];if(e&&qt!==Mt)return this.where(e.name).equals(e.keyPath.map(function(t){return n[t]}));e||console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=t.reduce(function(t,e){return[t[0]||r[e],t[0]||!r[e]?ln(t[1],function(t){return""+d(t,e)==""+n[e]}):t[1]]},[null,null]),o=i[0];return o?this.where(o.name).equals(n[o.keyPath]).filter(i[1]):e?this.filter(i[1]):this.where(t).equals("")},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){return this.toCollection().each(n)},toArray:function(n){return this.toCollection().toArray(n)},orderBy:function(n){return new Q(new W(this,Cn(n)?"["+n.join("+")+"]":n))},toCollection:function(){return new Q(new W(this))},mapToClass:function(n,e){this.schema.mappedClass=n;var r=Object.create(n.prototype);e&&wn(r,e),this.schema.instanceTemplate=r;var i=function(e){if(!e)return e;var r=Object.create(n.prototype);for(var i in e)if(t(e,i))try{r[i]=e[i]}catch(n){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),n},defineClass:function(n){return this.mapToClass(gn.defineClass(n),n)},bulkDelete:function(n){return this.hook.deleting.fire===D?this._idbstore(Xn,function(t,e,r,i){t(z(r,i,n,!1,D))}):this.where(":id").anyOf(n).delete().then(function(){})},bulkPut:function(n,t){var e=this;return this._idbstore(Xn,function(r,i,o){if(!o.keyPath&&!e.schema.primKey.auto&&!t)throw new Zn.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&t)throw new Zn.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==n.length)throw new Zn.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return r();var u,a,c=function(n){0===s.length?r(n):i(new O(e.name+".bulkPut(): "+s.length+" of "+l+" operations failed",s))},s=[],l=n.length,h=e;if(e.hook.creating.fire===D&&e.hook.updating.fire===D){a=V(s);for(var v=0,p=n.length;v<p;++v)u=t?o.put(n[v],t[v]):o.put(n[v]),u.onerror=a;u.onerror=V(s,c),u.onsuccess=xn(c)}else{var y=t||o.keyPath&&n.map(function(n){return d(n,o.keyPath)}),m=y&&f(y,function(t,e){return null!=t&&[t,n[e]]});(y?h.where(":id").anyOf(y.filter(function(n){return null!=n})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(A,function(n){s=n.failures}).then(function(){for(var e=[],r=t&&[],i=y.length-1;i>=0;--i){var o=y[i];(null==o||m[o])&&(e.push(n[i]),t&&r.push(o),null!=o&&(m[o]=null))}return e.reverse(),t&&r.reverse(),h.bulkAdd(e,r)}).then(function(n){var t=y[y.length-1];return null!=t?t:n}):h.bulkAdd(n)).then(c).catch(O,function(n){s=s.concat(n.failures),c()}).catch(i)}},"locked")},bulkAdd:function(n,t){var e=this,r=this.hook.creating.fire;return this._idbstore(Xn,function(i,o,u,a){function c(n){0===p.length?i(n):o(new O(e.name+".bulkAdd(): "+p.length+" of "+y+" operations failed",p))}if(!u.keyPath&&!e.schema.primKey.auto&&!t)throw new Zn.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&t)throw new Zn.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==n.length)throw new Zn.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return i();var s,f,l,p=[],y=n.length;if(r!==D){var m,b=u.keyPath;f=V(p,null,!0),l=_n(null),h(function(){for(var e=0,i=n.length;e<i;++e){m={onerror:null,onsuccess:null};var o=t&&t[e],c=n[e],h=t?o:b?d(c,b):void 0,p=r.call(m,h,c,a);null==h&&null!=p&&(b?(c=g(c),v(c,b,p)):o=p),s=null!=o?u.add(c,o):u.add(c),s._hookCtx=m,e<i-1&&(s.onerror=f,m.onsuccess&&(s.onsuccess=l))}},function(n){throw m.onerror&&m.onerror(n),n}),s.onerror=V(p,c,!0),s.onsuccess=_n(c)}else{f=V(p);for(var w=0,_=n.length;w<_;++w)s=t?u.add(n[w],t[w]):u.add(n[w]),s.onerror=f;s.onerror=V(p,c),s.onsuccess=xn(c)}})},add:function(n,t){var e=this.hook.creating.fire;return this._idbstore(Xn,function(r,i,o,u){var a={onsuccess:null,onerror:null};if(e!==D){var c=null!=t?t:o.keyPath?d(n,o.keyPath):void 0,s=e.call(a,c,n,u);null==c&&null!=s&&(o.keyPath?v(n,o.keyPath,s):t=s)}try{var f=null!=t?o.add(n,t):o.add(n);f._hookCtx=a,f.onerror=jn(i),f.onsuccess=_n(function(t){var e=o.keyPath;e&&v(n,e,t),r(t)})}catch(n){throw a.onerror&&a.onerror(n),n}})},put:function(n,t){var e=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==D||i!==D){var o=this.schema.primKey.keyPath,u=void 0!==t?t:o&&d(n,o);return null==u?this.add(n):(n=g(n),this._trans(Xn,function(){return e.where(":id").equals(u).modify(function(){this.value=n}).then(function(r){return 0===r?e.add(n,t):u})},"locked"))}return this._idbstore(Xn,function(e,r,i){var o=void 0!==t?i.put(n,t):i.put(n);o.onerror=kn(r),o.onsuccess=en(function(t){var r=i.keyPath;r&&v(n,r,t.target.result),e(o.result)})})},delete:function(n){return this.hook.deleting.subscribers.length?this.where(":id").equals(n).delete():this._idbstore(Xn,function(t,e,r){var i=r.delete(n);i.onerror=kn(e),i.onsuccess=en(function(){t(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Xn,function(n,t,e){var r=e.clear();r.onerror=kn(t),r.onsuccess=en(function(){n(r.result)})})},update:function(n,t){if("object"!=typeof t||Cn(t))throw new Zn.InvalidArgument("Modifications must be an object.");if("object"!=typeof n||Cn(n))return this.where(":id").equals(n).modify(t);In(t).forEach(function(e){v(n,e,t[e])})
;var e=d(n,this.schema.primKey.keyPath);return void 0===e?Ft(new Zn.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)}}),e(L.prototype,{_lock:function(){return c(!xt.global),++this._reculock,1!==this._reculock||xt.global||(xt.lockOwnerFor=this),this},_unlock:function(){if(c(!xt.global),0==--this._reculock)for(xt.global||(xt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{hn(n[1],n[0])}catch(n){}}return this},_locked:function(){return this._reculock&&xt.lockOwnerFor!==this},create:function(n){var t=this;if(!this.mode)return this;if(c(!this.idbtrans),!n&&!Hn)switch(Gn&&Gn.name){case"DatabaseClosedError":throw new Zn.DatabaseClosed(Gn);case"MissingAPIError":throw new Zn.MissingAPI(Gn.message,Gn);default:throw new Zn.OpenFailed(Gn)}if(!this.active)throw new Zn.TransactionInactive;return c(null===this._completion._state),n=this.idbtrans=n||Hn.transaction(Sn(this.storeNames),this.mode),n.onerror=en(function(e){Pn(e),t._reject(n.error)}),n.onabort=en(function(e){Pn(e),t.active&&t._reject(new Zn.Abort(n.error)),t.active=!1,t.on("abort").fire(e)}),n.oncomplete=en(function(){t.active=!1,t._resolve()}),this},_promise:function(n,t,e){var r=this;if(n===Xn&&this.mode!==Xn)return Ft(new Zn.ReadOnly("Transaction is readonly"));if(!this.active)return Ft(new Zn.TransactionInactive);if(this._locked())return new q(function(i,o){r._blockedFuncs.push([function(){r._promise(n,t,e).then(i,o)},xt])});if(e)return rn(function(){var n=new q(function(n,e){r._lock();var i=t(n,e,r);i&&i.then&&i.then(n,e)});return n.finally(function(){return r._unlock()}),n._lib=!0,n});var i=new q(function(n,e){var i=t(n,e,r);i&&i.then&&i.then(n,e)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(n){var t=this._root();if(n=q.resolve(n),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var e=t.idbtrans.objectStore(t.storeNames[0]);!function n(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(e.get(-1/0).onsuccess=n)}()}var r=t._waitingFor;return new q(function(e,i){n.then(function(n){return t._waitingQueue.push(en(e.bind(null,n)))},function(n){return t._waitingQueue.push(en(i.bind(null,n)))}).finally(function(){t._waitingFor===r&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new Zn.Abort),this.active=!1},tables:{get:j("Transaction.tables",function(){return Qn})},table:function(n){return new U(n,nt.table(n).schema,this)}}),e(W.prototype,function(){function n(n,t,e){var r=n instanceof W?new Q(n):n;return r._ctx.error=e?new e(t):new TypeError(t),r}function t(n){return new Q(n,function(){return Rn.only("")}).limit(0)}function e(n){return"next"===n?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}function r(n){return"next"===n?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}function i(n,t,e,r,i,o){for(var u=Math.min(n.length,r.length),a=-1,c=0;c<u;++c){var s=t[c];if(s!==r[c])return i(n[c],e[c])<0?n.substr(0,c)+e[c]+e.substr(c+1):i(n[c],r[c])<0?n.substr(0,c)+r[c]+e.substr(c+1):a>=0?n.substr(0,a)+t[a]+e.substr(a+1):null;i(n[c],s)<0&&(a=c)}return u<r.length&&"next"===o?n+e.substr(n.length):u<n.length&&"prev"===o?n.substr(0,e.length):a<0?null:n.substr(0,a)+r[a]+e.substr(a+1)}function o(t,o,u,a){function c(n){s=e(n),f=r(n),l="next"===n?sn:fn;var t=u.map(function(n){return{lower:f(n),upper:s(n)}}).sort(function(n,t){return l(n.lower,t.lower)});h=t.map(function(n){return n.upper}),d=t.map(function(n){return n.lower}),v=n,p="next"===n?"":a}var s,f,l,h,d,v,p,y=u.length;if(!u.every(function(n){return"string"==typeof n}))return n(t,Vt);c("next");var m=new Q(t,function(){return Rn.bound(h[0],d[y-1]+a)});m._ondirectionchange=function(n){c(n)};var g=0;return m._addAlgorithm(function(n,t,e){var r=n.key;if("string"!=typeof r)return!1;var u=f(r);if(o(u,d,g))return!0;for(var a=null,c=g;c<y;++c){var s=i(r,u,h[c],d[c],l,v);null===s&&null===a?g=c+1:(null===a||l(a,s)>0)&&(a=s)}return t(null!==a?function(){n.continue(a+p)}:e),!1}),m}return{between:function(e,r,i,o){i=!1!==i,o=!0===o;try{return Z(e,r)>0||0===Z(e,r)&&(i||o)&&(!i||!o)?t(this):new Q(this,function(){return Rn.bound(e,r,!i,!o)})}catch(t){return n(this,Ut)}},equals:function(n){return new Q(this,function(){return Rn.only(n)})},above:function(n){return new Q(this,function(){return Rn.lowerBound(n,!0)})},aboveOrEqual:function(n){return new Q(this,function(){return Rn.lowerBound(n)})},below:function(n){return new Q(this,function(){return Rn.upperBound(n,!0)})},belowOrEqual:function(n){return new Q(this,function(){return Rn.upperBound(n)})},startsWith:function(t){return"string"!=typeof t?n(this,Vt):this.between(t,t+Mt,!0,!0)},startsWithIgnoreCase:function(n){return""===n?this.startsWith(n):o(this,function(n,t){return 0===n.indexOf(t[0])},[n],Mt)},equalsIgnoreCase:function(n){return o(this,function(n,t){return n===t[0]},[n],"")},anyOfIgnoreCase:function(){var n=w.apply(zn,arguments);return 0===n.length?t(this):o(this,function(n,t){return-1!==t.indexOf(n)},n,"")},startsWithAnyOfIgnoreCase:function(){var n=w.apply(zn,arguments);return 0===n.length?t(this):o(this,function(n,t){return t.some(function(t){return 0===n.indexOf(t)})},n,Mt)},anyOf:function(){var e=w.apply(zn,arguments),r=an;try{e.sort(r)}catch(t){return n(this,Ut)}if(0===e.length)return t(this);var i=new Q(this,function(){return Rn.bound(e[0],e[e.length-1])});i._ondirectionchange=function(n){r="next"===n?an:cn,e.sort(r)};var o=0;return i._addAlgorithm(function(n,t,i){for(var u=n.key;r(u,e[o])>0;)if(++o===e.length)return t(i),!1;return 0===r(u,e[o])||(t(function(){n.continue(e[o])}),!1)}),i},notEqual:function(n){return this.inAnyRange([[Rt,n],[n,qt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=w.apply(zn,arguments);if(0===t.length)return new Q(this);try{t.sort(an)}catch(t){return n(this,Ut)}var e=t.reduce(function(n,t){return n?n.concat([[n[n.length-1][1],t]]):[[Rt,t]]},null);return e.push([t[t.length-1],qt]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(e,r){function i(n,t){for(var e=0,r=n.length;e<r;++e){var i=n[e];if(Z(t[0],i[1])<0&&Z(t[1],i[0])>0){i[0]=nn(i[0],t[0]),i[1]=tn(i[1],t[1]);break}}return e===r&&n.push(t),n}function o(n,t){return f(n[0],t[0])}function u(n){return!h(n)&&!d(n)}if(0===e.length)return t(this);if(!e.every(function(n){return void 0!==n[0]&&void 0!==n[1]&&an(n[0],n[1])<=0}))return n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Zn.InvalidArgument);var a,c=!r||!1!==r.includeLowers,s=r&&!0===r.includeUppers,f=an;try{a=e.reduce(i,[]),a.sort(o)}catch(t){return n(this,Ut)}var l=0,h=s?function(n){return an(n,a[l][1])>0}:function(n){return an(n,a[l][1])>=0},d=c?function(n){return cn(n,a[l][0])>0}:function(n){return cn(n,a[l][0])>=0},v=h,p=new Q(this,function(){return Rn.bound(a[0][0],a[a.length-1][1],!c,!s)});return p._ondirectionchange=function(n){"next"===n?(v=h,f=an):(v=d,f=cn),a.sort(o)},p._addAlgorithm(function(n,t,e){for(var r=n.key;v(r);)if(++l===a.length)return t(e),!1;return!!u(r)||0!==Z(r,a[l][1])&&0!==Z(r,a[l][0])&&(t(function(){f===an?n.continue(a[l][0]):n.continue(a[l][1])}),!1)}),p},startsWithAnyOf:function(){var e=w.apply(zn,arguments);return e.every(function(n){return"string"==typeof n})?0===e.length?t(this):this.inAnyRange(e.map(function(n){return[n,n+Mt]})):n(this,"startsWithAnyOf() only works with strings")}}}),e(Q.prototype,function(){function e(n,t){n.filter=ln(n.filter,t)}function r(n,t,e){var r=n.replayFilter;n.replayFilter=r?function(){return ln(r(),t())}:t,n.justLimit=e&&!r}function i(n,t){n.isMatch=ln(n.isMatch,t)}function o(n,t){if(n.isPrimKey)return t;var e=n.table.schema.idxByName[n.index];if(!e)throw new Zn.Schema("KeyPath "+n.index+" on object store "+t.name+" is not indexed");return t.index(e.name)}function u(n,t){var e=o(n,t);return n.keysOnly&&"openKeyCursor"in e?e.openKeyCursor(n.range||null,n.dir+n.unique):e.openCursor(n.range||null,n.dir+n.unique)}function a(n,e,r,i,o){var a=n.replayFilter?ln(n.filter,n.replayFilter()):n.filter;n.or?function(){function c(){2==++l&&r()}function s(n,r,o){if(!a||a(r,o,c,i)){var u=r.primaryKey,s=""+u;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(u)),t(f,s)||(f[s]=!0,e(n,r,o))}}var f={},l=0;n.or._iterate(s,c,i,o),$(u(n,o),n.algorithm,s,c,i,!n.keysOnly&&n.valueMapper)}():$(u(n,o),ln(n.algorithm,a),e,r,i,!n.keysOnly&&n.valueMapper)}return{_read:function(n,t){var e=this._ctx;return e.error?e.table._trans(null,Ft.bind(null,e.error)):e.table._idbstore("readonly",n).then(t)},_write:function(n){var t=this._ctx;return t.error?t.table._trans(null,Ft.bind(null,t.error)):t.table._idbstore(Xn,n,"locked")},_addAlgorithm:function(n){var t=this._ctx;t.algorithm=ln(t.algorithm,n)},_iterate:function(n,t,e,r){return a(this._ctx,n,t,e,r)},clone:function(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&n(r,t),e._ctx=r,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(n){var t=this._ctx;return this._read(function(e,r,i){a(t,n,e,r,i)})},count:function(n){var t=this._ctx;if(H(t,!0))return this._read(function(n,e,r){var i=o(t,r),u=t.range?i.count(t.range):i.count();u.onerror=kn(e),u.onsuccess=function(e){n(Math.min(e.target.result,t.limit))}},n);var e=0;return this._read(function(n,r,i){a(t,function(){return++e,!1},function(){n(e)},r,i)},n)},sortBy:function(n,t){function e(n,t){return t?e(n[i[t]],t-1):n[o]}function r(n,t){var r=e(n,u),i=e(t,u);return r<i?-a:r>i?a:0}var i=n.split(".").reverse(),o=i[0],u=i.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(n){return n.sort(r)}).then(t)},toArray:function(n){var t=this._ctx;return this._read(function(n,e,r){if(Tn&&"next"===t.dir&&H(t,!0)&&t.limit>0){var i=t.table.hook.reading.fire,u=o(t,r),c=t.limit<1/0?u.getAll(t.range,t.limit):u.getAll(t.range);c.onerror=kn(e),c.onsuccess=xn(i===I?n:function(t){try{n(t.map(i))}catch(n){e(n)}})}else{var s=[];a(t,function(n){s.push(n)},function(){n(s)},e,r)}},n)},offset:function(n){var t=this._ctx;return n<=0?this:(t.offset+=n,H(t)?r(t,function(){var t=n;return function(n,e){return 0===t||(1===t?(--t,!1):(e(function(){n.advance(t),t=0}),!1))}}):r(t,function(){var t=n;return function(){return--t<0}}),this)},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),r(this._ctx,function(){var t=n;return function(n,e,r){return--t<=0&&e(r),t>=0}},!0),this},until:function(n,t){return e(this._ctx,function(e,r,i){return!n(e.value)||(r(i),t)}),this},first:function(n){return this.limit(1).toArray(function(n){return n[0]}).then(n)},last:function(n){return this.reverse().first(n)},filter:function(n){return e(this._ctx,function(t){return n(t.value)}),i(this._ctx,n),this},and:function(n){return this.filter(n)},or:function(n){return new W(this._ctx.table,n,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,e){n(e.key,e)})},eachUniqueKey:function(n){return this._ctx.unique="unique",this.eachKey(n)},eachPrimaryKey:function(n){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,e){n(e.primaryKey,e)})},keys:function(n){var t=this._ctx;t.keysOnly=!t.isMatch;var e=[];return this.each(function(n,t){e.push(t.key)}).then(function(){return e}).then(n)},primaryKeys:function(n){var t=this._ctx;if(Tn&&"next"===t.dir&&H(t,!0)&&t.limit>0)return this._read(function(n,e,r){var i=o(t,r),u=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);u.onerror=kn(e),u.onsuccess=xn(n)}).then(n);t.keysOnly=!t.isMatch;var e=[];return this.each(function(n,t){e.push(t.primaryKey)}).then(function(){return e}).then(n)},uniqueKeys:function(n){return this._ctx.unique="unique",this.keys(n)},firstKey:function(n){return this.limit(1).keys(function(n){return n[0]}).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var n=this._ctx,r=n.index&&n.table.schema.idxByName[n.index];if(!r||!r.multi)return this;var i={};return e(this._ctx,function(n){var e=n.primaryKey.toString(),r=t(i,e);return i[e]=!0,!r}),this},modify:function(e){var r=this,i=this._ctx,o=i.table.hook,u=o.updating.fire,a=o.deleting.fire;return this._write(function(i,o,c,s){function f(n,e){function r(n){return E.push(n),O.push(i.primKey),p(),!0}S=e.primaryKey;var i={primKey:e.primaryKey,value:n,onsuccess:null,onerror:null};if(!1!==m.call(i,n,i)){var o=!t(i,"value");++x,h(function(){var n=o?e.delete():e.update(i.value);n._hookCtx=i,n.onerror=jn(r),n.onsuccess=_n(function(){++j,p()})},r)}else i.onsuccess&&i.onsuccess(i.value)}function l(n){return n&&(E.push(n),O.push(S)),o(new A("Error modifying one or more objects",E,j,O))}function p(){P&&j+E.length===x&&(E.length>0?l():i(j))}var m;if("function"==typeof e)m=u===D&&a===D?e:function(n){var r=g(n);if(!1===e.call(this,n,this))return!1;if(t(this,"value")){var i=b(r,this.value),o=u.call(this,i,this.primKey,r,s);o&&(n=this.value,In(o).forEach(function(t){v(n,t,o[t])}))}else a.call(this,this.primKey,n,s)};else if(u===D){var w=In(e),_=w.length;m=function(n){for(var t=!1,r=0;r<_;++r){var i=w[r],o=e[i];d(n,i)!==o&&(v(n,i,o),t=!0)}return t}}else{var k=e;e=y(k),m=function(t){var r=!1,i=u.call(this,e,this.primKey,g(t),s);return i&&n(e,i),In(e).forEach(function(n){var i=e[n];d(t,n)!==i&&(v(t,n,i),r=!0)}),i&&(e=y(k)),r}}var x=0,j=0,P=!1,E=[],O=[],S=null;r.clone().raw()._iterate(f,function(){P=!0,p()},l,c)})},delete:function(){var n=this,t=this._ctx,e=t.range,r=t.table.hook.deleting.fire,i=r!==D;if(!i&&H(t)&&(t.isPrimKey&&!Qt||!e))return this._write(function(n,t,r){var i=kn(t),o=e?r.count(e):r.count();o.onerror=i,o.onsuccess=function(){var u=o.result;h(function(){var t=e?r.delete(e):r.clear();t.onerror=i,t.onsuccess=function(){return n(u)}},function(n){return t(n)})}});var o=i?2e3:1e4;return this._write(function(e,u,a,c){var s=0,f=n.clone({keysOnly:!t.isMatch&&!i}).distinct().limit(o).raw(),l=[],h=function(){return f.each(i?function(n,t){l.push([t.primaryKey,t.value])}:function(n,t){l.push(t.primaryKey)}).then(function(){return i?l.sort(function(n,t){return an(n[0],t[0])}):l.sort(an),z(a,c,l,i,r)}).then(function(){var n=l.length;return s+=n,l=[],n<o?s:h()})};e(h())})}}}),n(this,{Collection:Q,Table:U,Transaction:L,Version:s,WhereClause:W}),function(){nt.on("versionchange",function(n){n.newVersion>0?console.warn("Another connection wants to upgrade database '"+nt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+nt.name+"'. Closing db now to resume the delete request."),nt.close()}),nt.on("blocked",function(n){!n.newVersion||n.newVersion<n.oldVersion?console.warn("Dexie.delete('"+nt.name+"') was blocked"):console.warn("Upgrade '"+nt.name+"' blocked by other connection holding version "+n.oldVersion/10)})}(),Nn.forEach(function(n){n(nt)})}function bn(n){if("function"==typeof n)return new n;if(Cn(n))return[bn(n[0])];if(n&&"object"==typeof n){var t={};return wn(t,n),t}return n}function wn(n,t){return In(t).forEach(function(e){var r=bn(t[e]);n[e]=r}),n}function _n(n){return en(function(t){var e=t.target,r=e._hookCtx,i=r.value||e.result,o=r&&r.onsuccess;o&&o(i),n&&n(i)},n)}function kn(n){return en(function(t){return Pn(t),n(t.target.error),!1})}function xn(n){return en(function(t){n(t.target.result)})}function jn(n){return en(function(t){var e=t.target,r=e.error,i=e._hookCtx,o=i&&i.onerror;return o&&o(r),Pn(t),n(r),!1})}function Pn(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}function En(n){function t(n){return function(t){var e=n(t),r=e.value;return e.done?r:r&&"function"==typeof r.then?r.then(i,o):Cn(r)?q.all(r).then(i,o):i(r)}}var e=function(t){return n.next(t)},r=function(t){return n.throw(t)},i=t(e),o=t(r);return t(e)()}function An(n,t,e,r,i,o,u){this.name=n,this.keyPath=t,this.unique=e,this.multi=r,this.auto=i,this.compound=o,this.dotted=u;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(i?"++":"")+a}function On(n,t,e,r){this.name=n,this.primKey=t||new An,this.indexes=e||[new An],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=f(e,function(n){return[n.name,n]})}function Sn(n){return 1===n.length?n[0]:n}function Dn(n){var t=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return t&&t.bind(n)}var In=Object.keys,Cn=Array.isArray,Kn="undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Tn=Object.getPrototypeOf,Bn={}.hasOwnProperty,Fn=Object.defineProperty,Nn=Object.getOwnPropertyDescriptor,Mn=[].slice,qn=[].concat,Rn="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(m([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(t){return t+n+"Array"})}))).filter(function(n){return Kn[n]}).map(function(n){return Kn[n]}),Un="undefined"!=typeof Symbol&&Symbol.iterator,Vn=Un?function(n){var t;return null!=n&&(t=n[Un])&&t.apply(n)}:function(){return null},zn={},Ln="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Wn=function(){return!0},Qn=!new Error("").stack,Hn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Gn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Jn=Hn.concat(Gn),Yn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};i(P).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+x(this._e,2))}},toString:function(){return this.name+": "+this.message}}),i(A).from(P),i(O).from(P);var $n=Jn.reduce(function(n,t){return n[t]=t+"Error",n},{}),Xn=P,Zn=Jn.reduce(function(n,t){function e(n,e){this._e=k(),this.name=r,n?"string"==typeof n?(this.message=n,this.inner=e||null):"object"==typeof n&&(this.message=n.name+" "+n.message,this.inner=n):(this.message=Yn[t]||r,this.inner=null)}var r=t+"Error";return i(e).from(Xn),n[t]=e,n},{});Zn.Syntax=SyntaxError,Zn.Type=TypeError,Zn.Range=RangeError;var nt=Gn.reduce(function(n,t){return n[t+"Error"]=Zn[t],n},{}),tt=Jn.reduce(function(n,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(n[t+"Error"]=Zn[t]),n},{});tt.ModifyError=A,tt.DexieError=P,tt.BulkError=O;var et={},rt=100,it=7,ot=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var n=Kn.Promise;return n?[n.resolve(),n.prototype,n.resolve()]:[]}}(),ut=ot[0],at=ot[1],ct=ot[2],st=at&&at.then,ft=ut&&ut.constructor,lt=ot[3],ht=!!ct,dt=!1,vt=ct?function(){ct.then(G)}:Kn.setImmediate?setImmediate.bind(null,G):Kn.MutationObserver?function(){var n=document.createElement("div");new MutationObserver(function(){G(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(G,0)},pt=function(n,t){jt.push([n,t]),mt&&(vt(),mt=!1)},yt=!0,mt=!0,gt=[],bt=[],wt=null,_t=I,kt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:yn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(n){try{yn(n[0],n[1])}catch(n){}})}},xt=kt,jt=[],Pt=0,Et=[],At={get:function(){function n(n,r){var i=this,o=!t.global&&(t!==xt||e!==Kt);o&&un();var u=new q(function(e,u){L(i,new R(vn(n,t,o),vn(r,t,o),e,u,t))});return Ln&&H(u,this),u}var t=xt,e=Kt;return n.prototype=et,n},set:function(n){r(this,"then",n&&n.prototype===et?At:{get:function(){return n},set:At.set})}};e(q.prototype,{then:At,_then:function(n,t){L(this,new R(null,null,n,t,xt))},catch:function(n){if(1===arguments.length)return this.then(null,n);var t=arguments[0],e=arguments[1];return"function"==typeof t?this.then(null,function(n){return n instanceof t?e(n):tn(n)}):this.then(null,function(n){return n&&n.name===t?e(n):tn(n)})},finally:function(n){return this.then(function(t){return n(),t},function(t){return n(),tn(t)})},stack:{get:function(){if(this._stack)return this._stack;try{dt=!0;var n=Q(this,[],20),t=n.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{dt=!1}}},timeout:function(n,t){var e=this;return n<1/0?new q(function(r,i){var o=setTimeout(function(){return i(new Zn.Timeout(t))},n);e.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&r(q.prototype,Symbol.toStringTag,"Promise"),kt.env=ln(),e(q,{all:function(){var n=w.apply(null,arguments).map(an);return new q(function(t,e){0===n.length&&t([]);var r=n.length;n.forEach(function(i,o){return q.resolve(i).then(function(e){n[o]=e,--r||t(n)},e)})})},resolve:function(n){if(n instanceof q)return n;if(n&&"function"==typeof n.then)return new q(function(t,e){n.then(t,e)});var t=new q(et,!0,n);return H(t,wt),t},reject:tn,race:function(){var n=w.apply(null,arguments).map(an);return new q(function(t,e){n.map(function(n){return q.resolve(n).then(t,e)})})},PSD:{get:function(){return xt},set:function(n){return xt=n}},newPSD:rn,usePSD:hn,scheduler:{get:function(){return pt},set:function(n){pt=n}},rejectionMapper:{get:function(){return _t},set:function(n){_t=n}},follow:function(n,t){return new q(function(e,r){return rn(function(t,e){var r=xt;r.unhandleds=[],r.onunhandled=e,r.finalize=K(function(){var n=this;X(function(){0===n.unhandleds.length?t():e(n.unhandleds[0])})},r.finalize),n()},t,e,r)})}});var Ot,St={awaits:0,echoes:0,id:0},Dt=0,It=[],Ct=0,Kt=0,Tt=0,Bt="unhandledrejection",Ft=q.reject,Nt="2.0.4",Mt=String.fromCharCode(65535),qt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(n){return Mt}}(),Rt=-1/0,Ut="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vt="String expected.",zt=[],Lt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Wt=Lt,Qt=Lt,Ht=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)};return _(Ln,Ht),e(gn,tt),e(gn,{delete:function(n){var t=new gn(n),e=t.delete();return e.onblocked=function(n){return t.on("blocked",n),this},e},exists:function(n){return new gn(n).open().then(function(n){return n.close(),!0}).catch(gn.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(n){var t=Dn(gn.dependencies.indexedDB);return t?new q(function(n,e){var r=t();r.onsuccess=function(t){n(u(t.target.result,0))},r.onerror=kn(e)}).then(n):Ot.dbnames.toCollection().primaryKeys(n)},defineClass:function(){function t(t){t&&n(this,t)}return t},applyStructure:wn,ignoreTransaction:function(n){return xt.trans?hn(xt.transless,n):n()},vip:function(n){return rn(function(){return xt.letThrough=!0,n()})},async:function(n){return function(){try{var t=En(n.apply(this,arguments));return t&&"function"==typeof t.then?t:q.resolve(t)}catch(n){return Ft(n)}}},spawn:function(n,t,e){try{var r=En(n.apply(e,t||[]));return r&&"function"==typeof r.then?r:q.resolve(r)}catch(n){return Ft(n)}},currentTransaction:{get:function(){return xt.trans||null}},waitFor:function(n,t){var e=q.resolve("function"==typeof n?gn.ignoreTransaction(n):n).timeout(t||6e4);return xt.trans?xt.trans.waitFor(e):e},Promise:q,debug:{get:function(){return Ln},set:function(n){_(n,"dexie"===n?function(){return!0}:Ht)}},derive:i,extend:n,props:e,override:a,Events:mn,getByKeyPath:d,setByKeyPath:v,delByKeyPath:p,shallowClone:y,deepClone:g,getObjectDiff:b,asap:s,maxKey:qt,minKey:Rt,addons:[],connections:zt,MultiModifyError:Zn.Modify,errnames:$n,IndexSpec:An,TableSchema:On,dependencies:function(){try{return{indexedDB:Kn.indexedDB||Kn.mozIndexedDB||Kn.webkitIndexedDB||Kn.msIndexedDB,IDBKeyRange:Kn.IDBKeyRange||Kn.webkitIDBKeyRange}}catch(n){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Nt,version:Nt.split(".").map(function(n){return parseInt(n)}).reduce(function(n,t,e){return n+t/Math.pow(10,2*e)}),default:gn,Dexie:gn}),q.rejectionMapper=S,Ot=new gn("__dbnames"),Ot.version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==Kn.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(n){return Ot.dbnames.put({name:n}).catch(D)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(n){}}(),gn});
//# sourceMappingURL=dexie.min.js.map;
define('offline/storage',['dexie'],
(Dexie) =>  {
    let DATABASE_NAME = "myKanban_v1.1.4";

    const database = (() => {
        let dbName = DATABASE_NAME;
        let db = new Dexie(dbName, {});

        db.version(1).stores({
            boards: 'id, title, created, description, starred, background',
            lists: 'id, boardID, title',
            cards: 'id, listID, boardID, title, created, description',
            checklists: 'id, cardID, title',
            checklistItems: 'id, title, checklistID, completed, index, created',
            labels: 'id, boardID, color, name',
            cardLabels: 'id, cardID, labelID'
        });

        db.version(2).stores({
            boards: 'id, title, created, description, starred, background, closed',
        }).upgrade(trans => {
            return trans;
        })

        db.open();
        return db;
    })();

    function clear(){
        database.delete();
        Dexie.delete(DATABASE_NAME);
    };
    
    database.clear = clear;
    return database;
});
define('DAO/Base',['offline/storage'],
(Storage) => {

    class BaseDAO{
        constructor(){

        }

        getTable(){
            return Storage.table( this.tableName );
        }

        getSingle(){
            let self = this;
            return new Promise((resolve, reject) => {
                self.getAll()
                .then(arr => {
                    var item = (arr.length > 0) ? arr[0] : false;
                    resolve( item );
                }).catch(reject);
            });
        }

        setSingle(item){
            let table = this.getTable();
            return new Promise((resolve, reject) => {
                //We clear the object store so we have only one record
                table.clear()
                .then(() => {
                    item.id = item.id ? item.id : 'single_identifier';
                    table.add(item)
                    .then(() => {
                        resolve(item);
                    }).catch(reject);
                });
            });
        }

        getAll(){
            return this.getTable().toArray();
        }

        create(item){
            let table = this.getTable();
            return new Promise((resolve, reject) => {
                table.add(item)
                .then(() => { resolve(item) })
                .catch(reject);
            })
        }

        delete(id){
            return this.getTable().delete( id );
        }

        update(id, item){
            let table = this.getTable();
            return new Promise((resolve, reject) => {
                table.update(id, item)
                .then(() => {
                    resolve( item )
                }).catch(reject);
            });
        }

        clear(){
            return this.getTable().clear();
        }
    };

    return BaseDAO;
});
define('DAO/Board',['DAO/Base'],
(BaseDAO) => {
    class BoardDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'boards';
        }
    }

    return BoardDAO;
});
define('DAO/List',['DAO/Base'],
(BaseDAO) => {
    class ListDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'lists';
        }
    }

    return ListDAO;
});
define('DAO/Card',['DAO/Base'],
(BaseDAO) => {
    class CardDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'cards';
        }
    }

    return CardDAO;
});
define('DAO/Checklist',['DAO/Base'],
(BaseDAO) => {
    class ChecklistDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'checklists';
        }
    }

    return ChecklistDAO;
});
define('DAO/ChecklistItem',['DAO/Base'],
(BaseDAO) => {
    class ChecklistItemDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'checklistItems';
        }
    }

    return ChecklistItemDAO;
});
define('DAO/Label',['DAO/Base'],
(BaseDAO) => {
    class LabelDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'labels';
        }
    }

    return LabelDAO;
});
define('DAO/CardLabel',['DAO/Base'],
(BaseDAO) => {
    class CardLabelDAO extends BaseDAO{
        constructor(){
            super();
            this.tableName = 'cardLabels';
        }
    }

    return CardLabelDAO;
});
define('DAO/Factory',['DAO/Board','DAO/List','DAO/Card','DAO/Checklist','DAO/ChecklistItem','DAO/Label','DAO/CardLabel'], 
(BoardDAO, ListDAO, CardDAO, ChecklistDAO, ChecklistItemDAO, LabelDAO, CardLabelDAO) => {
    return {
        create
    };

    function create(name){
        switch(name){
            case 'board':
            return new BoardDAO;

            case 'list':
            return new ListDAO;

            case 'card':
            return new CardDAO;

            case 'checklist':
            return new ChecklistDAO;

            case 'checklistItem':
            return new ChecklistItemDAO;

            case 'label':
            return new LabelDAO;

            case 'cardLabel':
            return new CardLabelDAO;
        }
    }
});
define('helpers/createID',[],() => {
        var allCharsString = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMONOPQRTSUVWXYZ';
        let allChars = allCharsString.split('');

        return function(length){
            var identifier = '';
            for(var i = 0;i < length;i++){
                var randomIndex = Math.floor(Math.random() * allChars.length);
                identifier += allChars[randomIndex];
            }
            return identifier;
        };
});
define('observers/global',[], () => { 
    return new Vue({});
});
define('store/modules/boards/actions',['store/modules/boards/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("board");

    function set({commit}, boards){
        commit([types.SET_BOARDS], boards);
    };

    function create({commit}, board){
        board.id = createID(10);
        board.starred = false;
        board.closed = false;
        board.created = (new Date()).getTime();
        board.description = !!(board.description) ? board.description : '';
        
        DAO.create(board)
        .then(board => {
            commit([types.CREATE_BOARD], board);
            observer.$emit('board/create', board);
        });
    };

    function update({commit}, board){
        DAO.update(board.id, board)
        .then(board => {
            commit([types.UPDATE_BOARD], board);
        });
    };
    
    function remove({commit}, boardID){
        DAO.delete(boardID)
        .then(() => {
            commit([types.DELETE_BOARD], boardID);
        });
    };

    
    function close({commit}, board){
        board.closed = true;
        DAO.update(board.id, board)
        .then(board => {
            commit([types.UPDATE_BOARD], board);
            observer.$emit('board/close', board);
        });
    };
    

    return {
        set,
        create,
        update,
        delete: remove,
        close
    };
});
define('store/modules/boards/index',['store/modules/boards/state','store/modules/boards/getters','store/modules/boards/mutations','store/modules/boards/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/modules/lists/state',[],
() => {
    return {
        lists: []
    };
});
define('store/modules/lists/getters',[],
() => {
    return {
        getAll(state){
            return state.lists.sort((a, b) => a.index - b.index);
        }
    };
});
define('store/modules/lists/mutationTypes',[],
() => {
    const SET_LISTS = 'SET_LISTS';
    const CREATE_LIST = 'CREATE_LIST';
    const UPDATE_LIST = 'UPDATE_LIST';
    const DELETE_LIST = 'DELETE_LIST';

    return {
        SET_LISTS,
        CREATE_LIST,
        UPDATE_LIST,
        DELETE_LIST
    };
});
define('store/modules/lists/mutations',['store/modules/lists/mutationTypes'],
(types) => {
    return {
        [types.SET_LISTS](state, lists){
            state.lists = [];
            lists.forEach(list => {
                state.lists.push( list );
            });
        },
        [types.CREATE_LIST](state, list){
            state.lists.push( list );
        },
        [types.UPDATE_LIST](state, list){
            let listIndex = state.lists.indexOf( state.lists.find(b => String(b.id) === String(list.id)) );
            for(let prop in list){
                state.lists[listIndex][prop] = list[prop];
            }
        },
        [types.DELETE_LIST](state, id){
            let index = state.lists.indexOf( state.lists.find(c => String(c.id) === String(id)) );
            state.lists.splice(index, 1);
        }
    };
});
define('store/modules/lists/actions',['store/modules/lists/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("list");

    function set({commit}, lists){
        commit([types.SET_LISTS], lists);
    };

    function create({commit}, list){
        list.id = createID(10);
        list.archived = false;
        
        DAO.create(list)
        .then(list => {
            commit([types.CREATE_LIST], list);
            observer.$emit('list/create', list);
        });
    };

    function update({commit}, list){
        DAO.update(list.id, list)
        .then(list => {
            commit([types.UPDATE_LIST], list);
        });
    };

    
    function move({commit}, list){
        DAO.update(list.id, list)
        .then(list => {
            commit([types.UPDATE_LIST], list);
            observer.$emit('list/move', list);
        });
    };

    function remove({commit}, listID){
        DAO.delete(listID)
        .then(() => {
            commit([types.DELETE_LIST], listID);
        });
    };

    function archive({commit}, list){
        list.archived = true;
        DAO.update(list.id, list)
        .then(list => {
            commit([types.UPDATE_LIST], list);
            observer.$emit('list/archiveUpdate', list);
        });
    };

    function unarchive({commit}, list){
        list.archived = false;
        DAO.update(list.id, list)
        .then(list => {
            commit([types.UPDATE_LIST], list);
            observer.$emit('list/archiveUpdate', list);
        });
    };

    return {
        set,
        create,
        update,
        delete: remove,
        archive,
        unarchive,
        move
    };
});
define('store/modules/lists/index',['store/modules/lists/state','store/modules/lists/getters','store/modules/lists/mutations','store/modules/lists/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/modules/cards/state',[],
() => {
    return {
        cards: []
    };
});
define('store/modules/cards/getters',[],
() => {
    return {
        getAll(state){
            return state.cards.sort((a, b) => a.index - b.index);
        }
    };
});
define('store/modules/cards/mutationTypes',[],
() => {
    const SET_CARDS = 'SET_CARDS';
    const CREATE_CARD = 'CREATE_CARD';
    const UPDATE_CARD = 'UPDATE_CARD';
    const DELETE_CARD = 'DELETE_CARD';

    return {
        SET_CARDS,
        CREATE_CARD,
        UPDATE_CARD,
        DELETE_CARD
    };
});
define('store/modules/cards/mutations',['store/modules/cards/mutationTypes'],
(types) => {
    return {
        [types.SET_CARDS](state, cards){
            state.cards = [];
            cards.forEach(card => {
                state.cards.push( card );
            });
        },
        [types.CREATE_CARD](state, card){
            state.cards.push( card );
        },
        [types.UPDATE_CARD](state, card){
            let cardIndex = state.cards.indexOf( state.cards.find(b => String(b.id) === String(card.id)) );
            for(let prop in card){
                state.cards[cardIndex][prop] = card[prop];
            }
        },
        [types.DELETE_CARD](state, id){
            let index = state.cards.indexOf( state.cards.find(c => String(c.id) === String(id)) );
            state.cards.splice(index, 1);
        }
    };
});
define('store/modules/cards/actions',['store/modules/cards/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("card");

    function getCard(cardID){
        return new Promise((resolve, reject) => {
            getStore().then(store => {
                resolve( store.getters['cards/getAll'].find(c => c.id === cardID) );
            }).catch(reject);
        });
    };

    function getStore(){
        return new Promise((resolve, reject) => {
            require(['store/index'], store => {
                resolve( store );
            });
        })
    };

    function set({commit}, cards){
        commit([types.SET_CARDS], cards);
    };

    function create({commit}, card){
        card.id = card.id ? card.id : createID(10);
        card.created = (new Date()).getTime();
        card.archived = false;
        card.description = "";
        card.schedule = false;
        
        DAO.create(card)
        .then(card => {
            commit([types.CREATE_CARD], card);
            observer.$emit('card/create', card);
        });
    };

    function update({commit}, card){
        DAO.update(card.id, card)
        .then(card => {
            commit([types.UPDATE_CARD], card);
        });
    };

    function move({commit}, card){
        DAO.update(card.id, card)
        .then(card => {
            commit([types.UPDATE_CARD], card);
            observer.$emit('card/move', card);
        });
    };

    
    function remove({commit}, cardID){
        DAO.delete(cardID)
        .then(() => {
            commit([types.DELETE_CARD], cardID);
        });
    };

    function archive({commit}, card){
        card.archived = true;
        DAO.update(card.id, card)
        .then(card => {
            commit([types.UPDATE_CARD], card);
            observer.$emit('card/archiveUpdate', card);
        });
    };

    function unarchive({commit}, card){
        card.archived = false;
        DAO.update(card.id, card)
        .then(card => {
            commit([types.UPDATE_CARD], card);
            observer.$emit('card/archiveUpdate', card);
        });
    };

    function removeSchedule({commit}, cardID){
        let schedule = false;
        setSchedule( { commit } , cardID, schedule);
    };

    function addSchedule({commit}, {cardID, date, time = null}){
        let schedule = {date,time};
        setSchedule( { commit } , cardID, schedule);
    };

    function setSchedule({ commit }, cardID, schedule){
        getCard(cardID).then(card => {

            let updatedCard = Object.assign({}, card);
            updatedCard.schedule = schedule;

            DAO.update(cardID, updatedCard)
            .then(newCard => {
                commit([types.UPDATE_CARD], newCard);
            });

        }).catch(console.log);
    };

    return {
        set,
        create,
        update,
        move,
        delete: remove,
        archive,
        unarchive,
        addSchedule,
        removeSchedule
    };
});
define('store/modules/cards/index',['store/modules/cards/state','store/modules/cards/getters','store/modules/cards/mutations','store/modules/cards/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/modules/checklists/state',[],
() => {
    return {
        checklists: []
    };
});
define('store/modules/checklists/getters',[],
() => {
    return {
        getAll(state){
            return state.checklists;
        }
    };
});
define('store/modules/checklists/mutationTypes',[],
() => {
    const SET_CHECKLISTS = 'SET_CHECKLISTS';
    const CREATE_CHECKLIST = 'CREATE_CHECKLIST';
    const UPDATE_CHECKLIST = 'UPDATE_CHECKLIST';
    const DELETE_CHECKLIST = 'DELETE_CHECKLIST';

    return {
        SET_CHECKLISTS,
        CREATE_CHECKLIST,
        UPDATE_CHECKLIST,
        DELETE_CHECKLIST
    };
});
define('store/modules/checklists/mutations',['store/modules/checklists/mutationTypes'],
(types) => {
    return {
        [types.SET_CHECKLISTS](state, checklists){
            state.checklists = [];
            checklists.forEach(checklist => {
                state.checklists.push( checklist );
            });
        },
        [types.CREATE_CHECKLIST](state, checklist){
            state.checklists.push( checklist );
        },
        [types.UPDATE_CHECKLIST](state, checklist){
            let checklistIndex = state.checklists.indexOf( state.checklists.find(b => String(b.id) === String(checklist.id)) );
            for(let prop in checklist){
                state.checklists[checklistIndex][prop] = checklist[prop];
            }
        },
        [types.DELETE_CHECKLIST](state, id){
            let index = state.checklists.indexOf( state.checklists.find(c => String(c.id) === String(id)) );
            state.checklists.splice(index, 1);
        }
    };
});
define('store/modules/checklists/actions',['store/modules/checklists/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("checklist");

    function set({commit}, checklists){
        commit([types.SET_CHECKLISTS], checklists);
    };

    function create({commit}, checklist){
        checklist.id = createID(10);
        
        DAO.create(checklist)
        .then(checklist => {
            commit([types.CREATE_CHECKLIST], checklist);
        });
    };

    function update({commit}, checklist){
        DAO.update(checklist.id, checklist)
        .then(checklist => {
            commit([types.UPDATE_CHECKLIST], checklist);
        });
    };
    
    function remove({commit}, checklistID){
        DAO.delete(checklistID)
        .then(() => {
            commit([types.DELETE_CHECKLIST], checklistID);
            observer.$emit('checklist/delete', checklistID);
        });
    };

    return {
        set,
        create,
        update,
        delete: remove
    };
});
define('store/modules/checklists/index',['store/modules/checklists/state','store/modules/checklists/getters','store/modules/checklists/mutations','store/modules/checklists/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/modules/checklistItems/state',[],
() => {
    return {
        checklistItems: []
    };
});
define('store/modules/checklistItems/getters',[],
() => {
    return {
        getAll(state){
            return state.checklistItems;
        }
    };
});
define('store/modules/checklistItems/mutationTypes',[],
() => {
    const SET_CHECKLIST_ITEMS = 'SET_CHECKLIST_ITEMS';
    const CREATE_CHECKLIST_ITEM = 'CREATE_CHECKLIST_ITEM';
    const UPDATE_CHECKLIST_ITEM = 'UPDATE_CHECKLIST_ITEM';
    const DELETE_CHECKLIST_ITEM = 'DELETE_CHECKLIST_ITEM';

    return {
        SET_CHECKLIST_ITEMS,
        CREATE_CHECKLIST_ITEM,
        UPDATE_CHECKLIST_ITEM,
        DELETE_CHECKLIST_ITEM
    };
});
define('store/modules/checklistItems/mutations',['store/modules/checklistItems/mutationTypes'],
(types) => {
    return {
        [types.SET_CHECKLIST_ITEMS](state, checklistItems){
            state.checklistItems = [];
            checklistItems.forEach(checklistItem => {
                state.checklistItems.push( checklistItem );
            });
        },
        [types.CREATE_CHECKLIST_ITEM](state, checklistItem){
            state.checklistItems.push( checklistItem );
        },
        [types.UPDATE_CHECKLIST_ITEM](state, checklistItem){
            let checklistItemIndex = state.checklistItems.indexOf( state.checklistItems.find(b => String(b.id) === String(checklistItem.id)) );
            for(let prop in checklistItem){
                state.checklistItems[checklistItemIndex][prop] = checklistItem[prop];
            }
        },
        [types.DELETE_CHECKLIST_ITEM](state, id){
            let index = state.checklistItems.indexOf( state.checklistItems.find(c => String(c.id) === String(id)) );
            state.checklistItems.splice(index, 1);
        }
    };
});
define('store/modules/checklistItems/actions',['store/modules/checklistItems/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("checklistItem");

    function observeEvents(){
        observer.$on('checklist/delete', (checklistID) => {
            require(['store/index'], (store) => {
                let items = store.getters['checklistItems/getAll'].filter(c => c.checklistID === checklistID);
                bulkDelete(store, items);
            });
        });
    };

    function bulkDelete(store, checklistItems){
        checklistItems.forEach(item => {
            store.dispatch('checklistItems/delete', item.id);            
        });
    };

    function set({commit}, checklistItems){
        commit([types.SET_CHECKLIST_ITEMS], checklistItems);
    };

    function create({commit}, checklistItem){
        checklistItem.id = createID(10);
        checklistItem.completed = false;
        checklistItem.created = (new Date()).getTime();

        DAO.create(checklistItem)
        .then(checklistItem => {
            commit([types.CREATE_CHECKLIST_ITEM], checklistItem);
        });
    };

    function update({commit}, checklistItem){
        DAO.update(checklistItem.id, checklistItem)
        .then(checklistItem => {
            commit([types.UPDATE_CHECKLIST_ITEM], checklistItem);
        });
    };
    
    function remove({commit}, checklistItemID){
        DAO.delete(checklistItemID)
        .then(() => {
            commit([types.DELETE_CHECKLIST_ITEM], checklistItemID);
        });
    };

    observeEvents();
    return {
        set,
        create,
        update,
        delete: remove
    };
});
define('store/modules/checklistItems/index',['store/modules/checklistItems/state','store/modules/checklistItems/getters','store/modules/checklistItems/mutations','store/modules/checklistItems/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/modules/labels/state',[],
() => {
    return {
        labels: []
    };
});
define('store/modules/labels/getters',[],
() => {
    return {
        getAll(state){
            return state.labels;
        }
    };
});
define('store/modules/labels/mutationTypes',[],
() => {
    const SET_LABELS = 'SET_LABELS';
    const CREATE_LABEL = 'CREATE_LABEL';
    const UPDATE_LABEL = 'UPDATE_LABEL';
    const DELETE_LABEL = 'DELETE_LABEL';

    return {
        SET_LABELS,
        CREATE_LABEL,
        UPDATE_LABEL,
        DELETE_LABEL
    };
});
define('store/modules/labels/mutations',['store/modules/labels/mutationTypes'],
(types) => {
    return {
        [types.SET_LABELS](state, labels){
            state.labels = [];
            labels.forEach(label => {
                state.labels.push( label );
            });
        },
        [types.CREATE_LABEL](state, label){
            state.labels.push( label );
        },
        [types.UPDATE_LABEL](state, label){
            let labelIndex = state.labels.indexOf( state.labels.find(b => String(b.id) === String(label.id)) );
            for(let prop in label){
                state.labels[labelIndex][prop] = label[prop];
            }
        },
        [types.DELETE_LABEL](state, id){
            let index = state.labels.indexOf( state.labels.find(c => String(c.id) === String(id)) );
            state.labels.splice(index, 1);
        }
    };
});
define('store/modules/labels/actions',['store/modules/labels/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("label");

    function set({commit}, labels){
        commit([types.SET_LABELS], labels);
    };

    function create({commit}, label){
        label.id = createID(10);
        label.created = (new Date()).getTime();
        
        DAO.create(label)
        .then(label => {
            commit([types.CREATE_LABEL], label);
            observer.$emit('label/create', label);
        });
    };

    function update({commit}, label){
        DAO.update(label.id, label)
        .then(label => {
            commit([types.UPDATE_LABEL], label);
        });
    };
    
    function remove({commit}, labelID){
        DAO.delete(labelID)
        .then(() => {
            commit([types.DELETE_LABEL], labelID);
        });
    };

    return {
        set,
        create,
        update,
        delete: remove
    };
});
define('store/modules/labels/index',['store/modules/labels/state','store/modules/labels/getters','store/modules/labels/mutations','store/modules/labels/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/modules/cardLabels/state',[],
() => {
    return {
        cardLabels: []
    };
});
define('store/modules/cardLabels/getters',[],
() => {
    return {
        getAll(state){
            return state.cardLabels;
        }
    };
});
define('store/modules/cardLabels/mutationTypes',[],
() => {
    const SET_CARD_LABELS = 'SET_CARD_LABELS';
    const CREATE_CARD_LABEL = 'CREATE_CARD_LABEL';
    const UPDATE_CARD_LABEL = 'UPDATE_CARD_LABEL';
    const DELETE_CARD_LABEL = 'DELETE_CARD_LABEL';

    return {
        SET_CARD_LABELS,
        CREATE_CARD_LABEL,
        UPDATE_CARD_LABEL,
        DELETE_CARD_LABEL
    };
});
define('store/modules/cardLabels/mutations',['store/modules/cardLabels/mutationTypes'],
(types) => {
    return {
        [types.SET_CARD_LABELS](state, cardLabels){
            state.cardLabels = [];
            cardLabels.forEach(cardLabel => {
                state.cardLabels.push( cardLabel );
            });
        },
        [types.CREATE_CARD_LABEL](state, cardLabel){
            state.cardLabels.push( cardLabel );
        },
        [types.UPDATE_CARD_LABEL](state, cardLabel){
            let cardLabelIndex = state.cardLabels.indexOf( state.cardLabels.find(b => String(b.id) === String(cardLabel.id)) );
            for(let prop in cardLabel){
                state.cardLabels[cardLabelIndex][prop] = cardLabel[prop];
            }
        },
        [types.DELETE_CARD_LABEL](state, id){
            let index = state.cardLabels.indexOf( state.cardLabels.find(c => String(c.id) === String(id)) );
            state.cardLabels.splice(index, 1);
        }
    };
});
define('store/modules/cardLabels/actions',['store/modules/cardLabels/mutationTypes','DAO/Factory','helpers/createID','observers/global'],
(types, DAOFactory, createID, observer) => {
    let DAO = DAOFactory.create("cardLabel");

    function set({commit}, cardLabels){
        commit([types.SET_CARD_LABELS], cardLabels);
    };

    function create({commit}, cardLabel){
        cardLabel.id = createID(10);
        cardLabel.created = (new Date()).getTime();
        
        DAO.create(cardLabel)
        .then(cardLabel => {
            commit([types.CREATE_CARD_LABEL], cardLabel);
            observer.$emit('cardLabel/create', cardLabel);
        });
    };

    function update({commit}, cardLabel){
        DAO.update(cardLabel.id, cardLabel)
        .then(cardLabel => {
            commit([types.UPDATE_CARD_LABEL], cardLabel);
        });
    };
    
    function remove({commit}, cardLabelID){
        DAO.delete(cardLabelID)
        .then(() => {
            commit([types.DELETE_CARD_LABEL], cardLabelID);
        });
    };

    return {
        set,
        create,
        update,
        delete: remove
    };
});
define('store/modules/cardLabels/index',['store/modules/cardLabels/state','store/modules/cardLabels/getters','store/modules/cardLabels/mutations','store/modules/cardLabels/actions',],
(state, getters, mutations, actions) => {
    return {
        namespaced: true,
        state,getters,mutations,actions
    };
});
define('store/offlineDB',['DAO/Factory'],
(DAOFactory) => {
    let store;

    return {
        init
    };

    function init(arg){
        store = arg;
        loadBoards();
        loadLists();
        loadCards();
        loadChecklists();
        loadChecklistItems();
        loadLabels();
        loadCardLabels();
    };

    function loadBoards(){
        getDAO('board').getAll().then(boards => {
            store.dispatch('boards/set', boards);
        });
    };

    function loadLists(){
        getDAO('list').getAll().then(lists => {
            store.dispatch('lists/set', lists);
        });
    };

    function loadCards(){
        getDAO('card').getAll().then(cards => {
            store.dispatch('cards/set', cards);
        });
    };

    function loadChecklists(){
        getDAO('checklist').getAll().then(checklists => {
            store.dispatch('checklists/set', checklists);
        });
    };

    function loadChecklistItems(){
        getDAO('checklistItem').getAll().then(checklistItems => {
            store.dispatch('checklistItems/set', checklistItems);
        });
    };

    function loadLabels(){
        getDAO('label').getAll().then(labels => {
            store.dispatch('labels/set', labels);
        });
    };

    function loadCardLabels(){
        getDAO('cardLabel').getAll().then(cardLabels => {
            store.dispatch('cardLabels/set', cardLabels);
        });
    };

    function getDAO(name){
        return DAOFactory.create(name);
    };
});
define('store/index',['store/modules/boards/index','store/modules/lists/index','store/modules/cards/index','store/modules/checklists/index',
'store/modules/checklistItems/index','store/modules/labels/index','store/modules/cardLabels/index','store/offlineDB'],
(boards, lists, cards, checklists, checklistItems, labels, cardLabels, offlineDB) => {
    const store = new Vuex.Store({
        modules: {
            boards,
            lists,
            cards,
            checklists,
            checklistItems,
            labels,
            cardLabels
        }
    });

    store.loadData = () => {
        offlineDB.init( store );
    };
    return store;
});
define('components/boardCard',['text!components/templates/boardCard.html','store/index'],
(template, store) => {
    return Vue.extend({
        template,
        props: ['board'],
        methods: {
            toggleStarred(){
                let board = Object.assign({}, this.board);
                board.starred ^= true;
                store.dispatch('boards/update', board);
            }
        },
    });
});

define('text!components/templates/createBoard.html',[],function () { return '<v-dialog\r\n    v-model="opened"\r\n    width="500"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot v-on="on"></slot>\r\n    </template>\r\n    <v-form ref="form" @submit.prevent="createBoard" v-model="valid">\r\n        <v-card>\r\n            <v-card-title class="pb-0">\r\n                <v-btn class="ml-auto" @click="opened = false" icon small>\r\n                    <v-icon dense>mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-card-text class="pl-3 pb-0">\r\n                <v-row class="px-0">\r\n                    <v-col\r\n                        md="9"\r\n                        class="pb-0"\r\n                    >\r\n                        <v-text-field autofocus autocomplete="off" :rules="titleRules" v-model="title" dense filled label="Board title"></v-text-field>\r\n                    </v-col>\r\n                    <v-col\r\n                        md="3"\r\n                    >\r\n                        <create-board-background-picker v-model="background"></create-board-background-picker>\r\n                    </v-col>\r\n                </v-row>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n                <v-btn color="green" type="submit" class="white--text" :disabled="!valid">Create board</v-btn>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-dialog>';});


define('text!components/templates/createBoardBackgroundPicker.html',[],function () { return '<v-row v-if="colors.length > 0">\r\n    <v-col v-for="color in firstEightColors"\r\n        md="4"\r\n        class="pa-1"\r\n    >\r\n        <div @click="setValue(color.value)" \r\n            class="d-flex justify-center board-color-pick rounded-sm" \r\n            :style="\'background-color: \'+color.value"\r\n            v-ripple\r\n        >\r\n            <v-icon v-if="color.value === value" color="white">mdi-check</v-icon>\r\n        </div>\r\n    </v-col>\r\n    <!--More colors-->\r\n    <v-col md="4" class="pa-1">\r\n        <v-menu>\r\n            <template v-slot:activator="{ on }">\r\n                <v-btn v-on="on" icon class="board-color-pick">\r\n                    <v-icon>mdi-dots-horizontal</v-icon>\r\n                </v-btn>\r\n            </template>\r\n            <v-card width="300">\r\n                <v-card-title class="py-1">\r\n                    <v-spacer></v-spacer>\r\n                        <small class="font-weight-thin">Board Background Color</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn dense icon>\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n                <v-divider></v-divider>\r\n                <v-card-text>\r\n                    <v-row>\r\n                        <v-col\r\n                            v-for="color in colors"\r\n                            md="4"\r\n                            class="pa-1"\r\n                        >\r\n                            <div @click="setValue(color.value).placeChosenColorFirst()" \r\n                                class="d-flex justify-center board-color-pick board-color-pick--tall rounded-sm" \r\n                                :style="\'background-color: \'+color.value"\r\n                                v-ripple\r\n                            >\r\n                                <v-icon  v-if="color.value === value" color="white">mdi-check</v-icon>\r\n                            </div>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-card-text>\r\n            </v-card>\r\n        </v-menu>\r\n    </v-col>\r\n\r\n</v-row>';});


define('text!model/json/board/colors.json',[],function () { return '[{\r\n    "value": "#0079bf"\r\n},\r\n{\r\n    "value": "#263238"\r\n},\r\n{\r\n    "value": "green"\r\n},\r\n{\r\n    "value": "#D50000"\r\n},\r\n{\r\n    "value": "#004D40"\r\n},\r\n{\r\n    "value": "#E65100"\r\n},\r\n{\r\n    "value": "#311B92"\r\n},\r\n{\r\n    "value": "#33691E"\r\n},\r\n{\r\n    "value": "#FF6F00"\r\n},{\r\n    "value": "#006064"\r\n}]';});


define('text!model/json/label/colors.json',[],function () { return '[{\r\n    "value": "#43A047"\r\n},\r\n{\r\n    "value": "#FFD600"\r\n},\r\n{\r\n    "value": "#FF9100"\r\n},\r\n{\r\n    "value": "#C62828"\r\n},\r\n{\r\n    "value": "#AB47BC"\r\n},\r\n{\r\n    "value": "#0D47A1"\r\n},\r\n{\r\n    "value": "#90CAF9"\r\n},\r\n{\r\n    "value": "#69F0AE"\r\n},\r\n{\r\n    "value": "#EA80FC"\r\n},\r\n{\r\n    "value": "#263238"\r\n}]';});


define('text!model/json/label/default.json',[],function () { return '[{\r\n    "value": "#43A047"\r\n},\r\n{\r\n    "value": "#FFD600"\r\n},\r\n{\r\n    "value": "#FF9100"\r\n},\r\n{\r\n    "value": "#C62828"\r\n},\r\n{\r\n    "value": "#AB47BC"\r\n},\r\n{\r\n    "value": "#0D47A1"\r\n}]';});

define('model/jsonLoader',['text!model/json/board/colors.json','text!model/json/label/colors.json','text!model/json/label/default.json'],
(boardColors, labelColors, defaultLabels) => {
    let error404 = {
        status: 404,
        message: '404. There is no json file for that key'
    };

    let data = {
        'board/colors' : JSON.parse( boardColors ),
        'label/colors' : JSON.parse( labelColors ),
        'label/default' : JSON.parse( defaultLabels ),
    };

    return {
        load
    };

    function load(key){
        return new Promise((resolve, reject) => {
            if (data[key]){
                resolve( getData(key) );
            }else{
                reject(error404);
            }
        });
    };

    function getData(key){
        return data[key];
    };

});
define('components/createBoardBackgroundPicker',['text!components/templates/createBoardBackgroundPicker.html','model/jsonLoader'],
(template, jsonLoader) => {

    return Vue.extend({
        template,
        props: {
            value: {
                required: true,
            }
        },
        data() {
            return {
                colors: [],
                value: null
            }
        },
        computed: {
            firstEightColors(){
                return new Array(8).fill(0).map((value, index)=> {
                    return this.colors[index];
                });
            }
        },
        methods: {
            setValue(value){
                this.value = value;
                this.$emit('input', value);
                return this;
            },
            placeChosenColorFirst(){
                let chosen = this.colors.find(c => c.value === this.value);
                /**Remove it from array */
                this.colors.splice( this.colors.indexOf(chosen) , 1);
                /**Add it at the beginning */
                this.colors.unshift(chosen);
            },
            loadColors(){
                let self = this;
                jsonLoader.load('board/colors').then(colors => {
                    self.colors = colors;
                    self.setValue( colors[0].value );
                }).catch(console.log);
            }
        },
        created() {
            this.loadColors();
        }
    });
});
define('components/createBoard',['text!components/templates/createBoard.html','components/createBoardBackgroundPicker','store/index'],
(template, createBoardBackgroundPicker, store) => {
    return Vue.extend({
        template,
        data() {
            return {
                opened: false,
                title: '',
                background: null,
                valid: false,

                titleRules: [
                    v => !!v || 'Please type in a title'
                ]
            }
        },
        components: {
            createBoardBackgroundPicker
        },
        methods: {
            createBoard(){
                store.dispatch('boards/create', {
                    title: this.title,
                    background: this.background 
                });
                this.reset();
            },
            setTitle(title){
                this.title = title;
            },
            reset(){
                this.$refs.form.reset();
            },
            open(){
                this.opened = true;
                return this;
            }
        },
    });
});
define('components/allBoards',['text!components/templates/allBoards.html','components/boardCard','components/createBoard','store/index'],
(template, boardCard, createBoard, store) => {
    return Vue.extend({
        template,
        computed: {
            boards(){
                return store.getters['boards/getAll'].filter(b => !b.closed);
            },
            starredBoards(){
                return this.boards.filter(b => b.starred);
            },
            closedBoards(){
                return store.getters['boards/getAll'].filter(b => b.closed);
            }
        },
        components: {
            boardCard,
            createBoard
        }
    });
});
define('pages/boards',['text!pages/templates/boards.html','components/mainNavigation','components/allBoards'],
(template, navigation, allBoards) => {
    return Vue.extend({
        template,
        components: {
            navigation,
            allBoards
        }
    });
});

define('text!pages/templates/board.html',[],function () { return '<section class="board d-flex flex-column" style="min-height: 100%;position: relative;">\r\n    <!--Preloader-->\r\n    <v-sheet height="1000" v-show="loading">\r\n        <v-sheet height="600">\r\n            <v-row class="fill-height d-flex align-center justify-center">\r\n                <v-progress-circular\r\n                    indeterminate\r\n                    color="primary"\r\n                ></v-progress-circular>\r\n            </v-row>\r\n        </v-sheet>\r\n    </v-sheet>\r\n\r\n    <section v-show="!loading">\r\n        <section v-show="board && !boardIsClosed">\r\n            <board-header :board="board"></board-header>\r\n            <board-body \r\n                :board="board"\r\n                ref="boardBody"\r\n            ></board-body>\r\n            <board-menu :board="board"></board-menu>\r\n            <router-view></router-view>\r\n        </section>\r\n\r\n        <v-sheet height="300" v-show="board && boardIsClosed" style="background-color: transparent;">\r\n            <v-row class="fill-height d-flex align-center justify-center">\r\n                <closed-board-message :board="board"></closed-board-message>\r\n            </v-row>\r\n        </v-sheet>\r\n\r\n        <v-sheet height="300" v-show="!board" style="background-color: transparent;">\r\n            <v-row class="fill-height d-flex align-center justify-center">\r\n                <no-board-message></no-board-message>\r\n            </v-row>\r\n        </v-sheet>\r\n    </section>\r\n</section>';});


define('text!components/templates/boardHeader.html',[],function () { return '<header class="board-header d-flex align-center pa-3 white--text">\r\n    <board-title :board="board"></board-title>\r\n\r\n    <v-btn @click="toggleStar" elevation="0" icon class="btn-light ml-3 rouned-sm">\r\n        <v-icon v-if="board.starred">mdi-star</v-icon>\r\n        <v-icon v-else>mdi-star-outline</v-icon>\r\n    </v-btn>\r\n    <span class="stick-divider"></span>\r\n\r\n    <v-btn elevation="0" class="btn-light">\r\n        <v-icon left dense>mdi-lock-outline</v-icon>\r\n        Private\r\n    </v-btn>\r\n    <span class="stick-divider"></span>\r\n\r\n    <v-avatar size="36" color="grey lighten-5">\r\n        <span class="black--text">IE</span>\r\n    </v-avatar>\r\n\r\n    <v-spacer></v-spacer>\r\n    <v-btn elevation="0" class="btn-light">\r\n        <v-icon left dense>mdi-share</v-icon>\r\n        Share\r\n    </v-btn>\r\n    <v-btn @click="toggleMenu" elevation="0" class="btn-light ml-2">\r\n        <v-icon left dense>mdi-dots-horizontal</v-icon>\r\n        Show menu\r\n    </v-btn>\r\n</header>';});


define('text!components/templates/boardTitle.html',[],function () { return '<div>\r\n    <v-form v-show="editing" @submit.prevent="saveTitle().exitEditMode()">\r\n        <v-text-field \r\n            autofocus\r\n            @blur="saveTitle().exitEditMode()"\r\n            solo\r\n            hide-details="auto"\r\n            dense\r\n            placeholder="Board title"\r\n            color="white"\r\n            class="ma-0"\r\n            v-model="title"\r\n        ></v-text-field>\r\n    </v-form>\r\n    <h3 class="cursor-pointer" @click="enterEditMode()" v-show="!editing">{{ board.title }}</h3>\r\n</div>';});

define('components/boardTitle',['text!components/templates/boardTitle.html','store/index'],
(template, store) => {
    
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        props: ['board'],
        data() {
            return {
                editing: false,
                title: ''
            }
        },
        methods: {
            saveTitle(){
                let board = Object.assign({}, this.board);
                board.title = ( isEmpty(this.title) ) ? this.board.title : this.getTitle();
                store.dispatch('boards/update', board);
                return this;
            },
            enterEditMode(){
                this.setTitleFromBoard();
                this.editing = true;
            },
            exitEditMode(){
                this.editing = false;
            },
            getTitle(){
                return this.title;
            },
            setTitleFromBoard(){
                this.title = this.board.title;
            }
        },
        created() {
            this.setTitleFromBoard();
        },
    });
});
define('components/boardHeader',['text!components/templates/boardHeader.html','components/boardTitle','observers/global','store/index'],
(template, boardTitle, observer, store) => {
    return Vue.extend({
        template,
        props: ['board'],
        components: {
            boardTitle
        },
        methods: {
            toggleStar(){
                let board = Object.assign({}, this.board);
                board.starred ^= true;
                store.dispatch('boards/update', board);
            },
            toggleMenu(){
                observer.$emit('boardMenu/toggle');
            }
        },
    });
});

define('text!components/templates/boardBody.html',[],function () { return '<section class="board-body" v-dragscroll="!dragging">\r\n    <div class="lists-wrapper ml-5">\r\n        <Container \r\n            class="lists-wrapper"\r\n            v-on:drag-start="dragging = true"\r\n            v-on:drag-end="dragging = false"\r\n            drag-class="drag-list"\r\n            :drop-placeholder="listPlaceholder"\r\n            @drop="handleListDrop"\r\n            orientation="horizontal"\r\n            drag-handle-selector=".list"\r\n        >\r\n            <Draggable class="list-wrapper" v-for="list in lists">\r\n                <list :list="list">\r\n                    <Container\r\n                        group-name="cards"\r\n                        drag-class="card-drag"\r\n                        :drop-placeholder="cardPlaceholder"\r\n                        @drop="(e) => handleCardDrop(list.id, e)"\r\n                        :get-child-payload="(index) => list.cards[index]"\r\n                        non-drag-area-selector=".open-card"\r\n                    >\r\n                        <Draggable class="card-wrapper" v-for="card in list.cards">\r\n                            <card :card="card"></card>\r\n                        </Draggable>\r\n                    </Container>\r\n                </list>\r\n            </Draggable>\r\n        </Container>\r\n        <create-list :board="board" class="list-wrapper"></create-list>\r\n    </div>\r\n\r\n</section>';});


define('text!components/templates/createList.html',[],function () { return '<section>\r\n    <v-btn \r\n        class="btn-light py-2" \r\n        elevation="0" \r\n        @click="open()"\r\n        v-show="!opened"\r\n    >\r\n        <v-icon>mdi-plus</v-icon>\r\n        {{ lists.length > 0 ? \'Add another list\' : \'Add a list\' }}\r\n    </v-btn>\r\n\r\n    <v-card v-show="opened" width="300">\r\n        <v-form class="pa-2" @submit.prevent="createList">\r\n            <v-text-field\r\n                v-model="title"\r\n                autofocus\r\n                autocomplete="off"\r\n                outlined\r\n                dense\r\n                placeholder="Enter List title"\r\n                :hide-details="true"\r\n            ></v-text-field>\r\n            <v-card-actions class="pa-0 pt-2">\r\n                <v-btn\r\n                    type="submit"\r\n                    elevation="0"\r\n                    color="green"\r\n                    dark\r\n                >Add list</v-btn>\r\n                <v-btn\r\n                    icon\r\n                    @click="close()"\r\n                >\r\n                    <v-icon>mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-actions>\r\n        </v-form>\r\n    </v-card>\r\n</section>';});

define('components/createList',['text!components/templates/createList.html','store/index'],
(template, store) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        props: ['board'],
        data() {
            return {
                opened: false,
                title: ''
            }
        },
        computed: {
            lists(){
                return store.getters['lists/getAll'].filter(l => l.boardID === this.board.id);
            }
        },
        methods: {
            createList(){
                if ( isEmpty(this.title) ) return;
                store.dispatch('lists/create', {
                    title: this.title,
                    boardID: this.board.id
                });
                this.title = '';
            },
            open(){
                this.opened = true;
            },
            close(){
                this.opened = false;
            }
        },
    });
});

define('text!components/templates/list.html',[],function () { return '<v-card class="list d-flex flex-column grey lighten-4 mr-2" elevation="1" width="285">\r\n    <list-header \r\n        @addCard="$refs.addCard.open()" \r\n        class="pa-2 pl-3" \r\n        :list="list"\r\n    ></list-header>\r\n    <list-body\r\n        class="pa-2 pt-0"\r\n        :list="list"\r\n    >\r\n        <slot></slot>\r\n    </list-body>\r\n    <add-card \r\n        ref="addCard" \r\n        class="pa-2" \r\n        :list="list"\r\n    ></add-card>\r\n</v-card>';});


define('text!components/templates/listHeader.html',[],function () { return '<div class="d-flex flex-column">\r\n    <div v-show="!editing" @click="enterEditMode()">\r\n        <div class="d-flex align-center cursor-pointer">\r\n            <b class="font-weight-bold blue-grey--text text--darken-3">{{ list.title }}</b>\r\n            <v-spacer></v-spacer>\r\n            <list-actions @addCard="$emit(\'addCard\')" :list="list"></list-actions>\r\n        </div>\r\n    </div>\r\n    <edit-list-title \r\n        v-show="editing" \r\n        :list="list"\r\n        @blur="leaveEditMode()" \r\n    ></edit-list-title>\r\n</div>';});


define('text!components/templates/editListTitle.html',[],function () { return '<v-form @submit.prevent="editList">\r\n    <v-text-field\r\n        @blur="editList"\r\n        autofocus\r\n        dense\r\n        placeholder="List title.."\r\n        outlined\r\n        hide-details="auto"\r\n        v-model="title"\r\n    ></v-text-field>\r\n</v-form>';});

define('components/editListTitle',['text!components/templates/editListTitle.html','store/index'],
(template, store) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        props: ['list'],
        watch: {
            list(val){
                this.title = this.list.title;
            }
        },
        data() {
            return {
                title: ''
            }
        },
        methods: {
            editList(){
                this.handleValidity();
                this.dispatchToStore();
                this.$emit('blur');
            },
            handleValidity(){
                this.title = ( isEmpty(this.title) ) ? this.list.title : this.title;
            },
            dispatchToStore(){
                let list = Object.assign({}, this.list);
                list.title = this.title;
                store.dispatch('lists/update', list);
            }
        },
        created() {
            this.title = this.list.title;
        }
    });
});

define('text!components/templates/listActions.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n    :close-on-content-click="true"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn icon v-on="on">\r\n            <v-icon>mdi-dots-horizontal</v-icon>\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card width="300">\r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>List Actions</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click="close()">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="pa-0">\r\n            <v-list dense>\r\n                <v-list-item @click="$emit(\'addCard\')" link>\r\n                    Add Card\r\n                </v-list-item>\r\n                <move-list :list="list"></move-list>\r\n                <v-divider></v-divider>\r\n                <archive-all-cards :list="list"></archive-all-cards>\r\n                <v-divider></v-divider>\r\n                <archive-list :list="list"></archive-list>\r\n            </v-list>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('mixins/openAndClose',[],() => {
    return {
        data() {
            return {
                opened: false
            }
        },
        methods: {
            open(){
                this.opened = true;
                this.$emit('open');
            },
            close(){
                this.opened = false;
                this.$emit('close');
            }
        },
    }
});

define('text!components/templates/moveList.html',[],function () { return '<v-menu\r\n    offset-x\r\n    right\r\n    v-model="opened"\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot>\r\n            <v-list-item v-on="on" link>\r\n                Move List...\r\n            </v-list-item>\r\n        </slot>\r\n    </template>\r\n    <v-form @submit.prevent="moveList()">\r\n        <v-card width="300">\r\n            <v-card-title class="pa-2">\r\n                <v-spacer></v-spacer>\r\n                <small>Move List</small>\r\n                <v-spacer></v-spacer>\r\n                <v-btn\r\n                    icon\r\n                    small\r\n                    @click="close()"\r\n                >\r\n                    <v-icon>mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text class="pa-2">\r\n                <v-select\r\n                    v-model="boardID"\r\n                    :items="boards"\r\n                    item-text="title"\r\n                    item-value="id"\r\n                    label="Boards"\r\n                    filled\r\n                    dense\r\n                    :hide-details="true"\r\n                    @change="updatePosition()"\r\n                ></v-select>\r\n                <v-select\r\n                    class="mt-3"\r\n                    v-model="index"\r\n                    :items="positions"\r\n                    item-text="count"\r\n                    item-value="index"\r\n                    label="Position"\r\n                    filled\r\n                    dense\r\n                    :hide-details="true"\r\n                ></v-select>\r\n            </v-card-text>\r\n            <v-card-actions class="pa-2">\r\n                <v-btn color="green" class="white--text text-none" @click="moveList()" elevation="0">\r\n                    Move\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-menu>';});

define('components/moveList',['text!components/templates/moveList.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {

    return Vue.extend({
        template,
        props: ['list'],
        mixins: [openAndClose],
        watch: {
            list(){
                this.initData();
            }
        },
        data() {
            return {
                boardID: null,
                index: 0
            }
        },
        computed: {
            boards(){
                return store.getters['boards/getAll'];
            },
            positions(){
                let positions = [];
                let lists = store.getters['lists/getAll'].filter(l => l.boardID === this.boardID);
                lists.forEach((list, index) => {
                    positions.push({
                        count: index+1,
                        index
                    });
                });

                /*--We only allow a list to be appended to another board i.e Other than the current one--*/
                if (this.list.boardID !== this.boardID){
                    positions.push({
                        count: lists.length + 1,
                        index: lists.length
                    });
                };
                return positions;
            }
        },
        methods: {
            moveList(){
                this.dispatchToStore();
                this.$emit('close');
            },
            dispatchToStore(){
                let list = Object.assign({}, this.list);
                list.boardID = this.boardID;
                list.index = this.index;
                store.dispatch('lists/move', list);
            },
            updatePosition(){
                /*--
                    Select the first position 
                    when switching from board 
                    where the last selected position was higher
                    than this one has
                --*/
                if (this.index > this.positions.length - 1)
                this.index = this.positions[0].index;
            },
            initData(){
                this.boardID = this.list.boardID;
                this.index = this.list.index || 0;
            }
        },
        created() {
            this.initData();
        },
    });
});

define('text!components/templates/archiveList.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-x\r\n    right\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-list-item link v-on="on">\r\n            Archive this list\r\n        </v-list-item>\r\n    </template>\r\n    <v-card width="300">\r\n        <v-card-title class="pa-1">\r\n            <v-spacer></v-spacer>\r\n            <small>Archive this list?</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close" icon>\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="px-3">\r\n            <p>This will remove this list from this board.To view archived lists and bring them back to the board, click "Menu > Archived Items"</p>\r\n            <v-btn \r\n                block \r\n                color="red darken-3 white--text" \r\n                class="text-none" \r\n                @click="archiveList()"\r\n            >Archive List</v-btn>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/archiveList',['text!components/templates/archiveList.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['list'],
        mixins: [openAndClose],
        methods: {
            archiveList(){
                this.dispatchToStore();
            },
            dispatchToStore(){
                store.dispatch('lists/archive', this.list);
            }
        },
    });
});

define('text!components/templates/archiveAllCards.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-x\r\n    right\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-list-item link v-on="on">\r\n            Archive All Cards in this list...\r\n        </v-list-item>\r\n    </template>\r\n    <v-card width="300">\r\n        <v-card-title class="pa-1">\r\n            <v-spacer></v-spacer>\r\n            <small>Archive all cards in this list?</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close" icon>\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="px-3">\r\n            <p>This will remove all the cards in this list from this board.To view archived cards and bring them back to the board, click "Menu > Archived Items"</p>\r\n            <v-btn \r\n                block \r\n                color="red darken-3 white--text" \r\n                class="text-none" \r\n                @click="archiveCards()"\r\n            >Archive All</v-btn>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/archiveAllCards',['text!components/templates/archiveAllCards.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['list'],
        mixins: [openAndClose],
        methods: {
            archiveCards(){
                this.dispatchToStore();
            },
            dispatchToStore(){
                let cards = store.getters['cards/getAll'].filter(c => c.listID === this.list.id && !c.archived);
                cards.forEach(card => {
                    store.dispatch('cards/archive', card);                    
                });
            }
        },
    });
});
define('components/listActions',['text!components/templates/listActions.html','mixins/openAndClose','components/moveList',
'components/archiveList','components/archiveAllCards'],
(template, openAndClose, moveList, archiveList, archiveAllCards) => {
    return Vue.extend({
        template,
        props: ['list'],
        mixins: [openAndClose],
        components: {
            moveList,
            archiveList,
            archiveAllCards
        }
    });
});
define('components/listHeader',['text!components/templates/listHeader.html','components/editListTitle','components/listActions'],
(template, editListTitle, listActions) => {
    return Vue.extend({
        template,
        props: ['list'],
        components: {
            editListTitle,
            listActions
        },
        data() {
            return {
                editing: false
            }
        },
        methods: {
            enterEditMode(){
                this.editing = true;
            },
            leaveEditMode(){
                this.editing = false;
            }
        },
    });
});

define('text!components/templates/listBody.html',[],function () { return '<div class="d-flex flex-column">\r\n    <slot></slot>\r\n</div>';});

define('components/listBody',['text!components/templates/listBody.html'],
(template) => {
    return Vue.extend({
        template,
        props: ['list']
    });
});

define('text!components/templates/addCard.html',[],function () { return '<section>\r\n    <v-btn class="text-none" elevation="0" block v-show="!opened" @click="open()">\r\n        <v-icon class="mr-2">mdi-plus</v-icon>\r\n        Add a card\r\n        <v-spacer></v-spacer>\r\n    </v-btn>\r\n\r\n    <v-form v-show="opened" @submit.prevent="addCard">\r\n        <v-card class="d-flex flex-column white">\r\n            <card-label-chips :card="card"></card-label-chips>\r\n            <v-textarea\r\n                @keydown="handleKeyDown"\r\n                elevation="0"\r\n                flat\r\n                autofocus\r\n                rows="2"\r\n                color="green"\r\n                solo\r\n                placeholder="Give a title to this card.."\r\n                hide-details="auto"\r\n                v-model="title"\r\n            ></v-textarea>\r\n        </v-card>\r\n        <div class="d-flex align-center mt-2">\r\n            <v-btn @click="addCard" color="green" dark elevation="0">\r\n                Add card\r\n            </v-btn>\r\n            <v-btn icon @click="close">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n            <v-spacer></v-spacer>\r\n            <add-card-options :card="card"></add-card-options>\r\n        </div>\r\n    </v-form>\r\n</section>';});


define('text!components/templates/addCardOptions.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-y\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn icon v-on="on">\r\n            <v-icon>mdi-dots-horizontal</v-icon>\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card width="300">\r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>Options</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click="close()">\r\n                <v-icon size="20">mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="pa-0">\r\n            <v-list dense class="pa-0">\r\n                <edit-card-labels :card="card" ref="labels">\r\n                    <v-list-item link @click="$refs.labels.open()">\r\n                        <v-list-item-title>Labels...</v-list-item-title>\r\n                    </v-list-item>\r\n                </edit-card-labels>\r\n            </v-list>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});


define('text!components/templates/editCardLabels.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-y\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot>\r\n            <v-btn class="btn-dark" v-on="on">\r\n                <v-icon left dense>mdi-label-outline</v-icon>\r\n                Edit Labels\r\n            </v-btn>\r\n        </slot>\r\n    </template>\r\n    <v-card width="300"> \r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>Labels</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close()" icon>\r\n                <v-icon size="20">mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n\r\n        <search-labels\r\n            class="px-3 pt-2"\r\n            @start="searching = true"\r\n            @end="searching = false"\r\n            :board="board"\r\n            :card="card"\r\n        ></search-labels>\r\n\r\n        <v-card-text class="d-flex flex-column pa-2">\r\n            <labels-list\r\n                :labels="labels"\r\n                :card="card"\r\n                v-show="!searching"\r\n            ></labels-list>\r\n            <create-label :board="board"></create-label>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});


define('text!components/templates/searchLabels.html',[],function () { return '<section class="d-flex flex-column">\r\n    <v-text-field\r\n        dense\r\n        filled\r\n        hide-details="auto"\r\n        placeholder="Search labels.."\r\n        v-model="keyword"\r\n    ></v-text-field>\r\n    <div class="mt-3">\r\n        <b class="grey--text text--darken-1" v-if="results.length > 0">LABELS</b>\r\n        <app-label \r\n            v-for="label in results"\r\n            :label="label"\r\n            :card="card"\r\n        ></app-label>\r\n\r\n        <section v-if="results.length <= 0 && keywordIsValid" class="w-100" style="height: 200px">\r\n            <div class="d-flex flex-column align-center text-center justify-center fill-height">\r\n                <v-icon size="40">mdi-label-outline</v-icon>\r\n                <p class="mt-2">No labels have been found.</p>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</section>';});


define('text!components/templates/label.html',[],function () { return '<div>\r\n    <card-label \r\n        v-if="card"\r\n        :label="label"\r\n        :card="card"\r\n    ></card-label>\r\n    <board-label \r\n        v-else\r\n        :label="label"\r\n    ></board-label>\r\n</div>';});


define('text!components/templates/cardLabel.html',[],function () { return '<div class="label-bar mt-2">\r\n    <div \r\n        @click="toggleLabel()"\r\n        :style="\'background-color: \'+label.color" \r\n        class="label-bar_color rounded pl-3 cursor-pointer" \r\n        v-ripple>\r\n        <b class="white--text">{{ label.name }}</b>\r\n        <v-spacer></v-spacer>\r\n        <v-icon class="pa-1" size="15" color="white" v-show="labeled">\r\n            mdi-check\r\n        </v-icon>\r\n    </div>\r\n    <edit-label :label="label"></edit-label>\r\n</div>';});


define('text!components/templates/editLabel.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn icon class="ml-2" v-on="on">\r\n            <v-icon size="20">mdi-pencil</v-icon>\r\n        </v-btn>\r\n    </template>\r\n    <v-form @submit.prevent="editLabel()">\r\n        <v-card \r\n            width="300"\r\n            elevation="0"\r\n        >\r\n            <v-card-title class="pa-2">\r\n                <v-spacer></v-spacer>\r\n                <small>Change Label</small>\r\n                <v-spacer></v-spacer>\r\n                <v-btn icon @click="close()">\r\n                    <v-icon size="20">mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text class="pa-2">\r\n                <v-text-field\r\n                    label="Name"\r\n                    hide-details="auto"\r\n                    dense\r\n                    filled\r\n                    autofocus\r\n                    v-model="name"\r\n                ></v-text-field>\r\n                <label-color-picker \r\n                    :colors="colors" \r\n                    class="mt-2 pa-2"\r\n                    v-model="color"\r\n                    :setDefault="false"\r\n                ></label-color-picker>\r\n            </v-card-text>\r\n            <v-card-actions class="pa-2">\r\n                <v-btn\r\n                    @click="editLabel()"\r\n                    color="green"\r\n                    class="white--text text-none"\r\n                    elevation="0"\r\n                >Save</v-btn>\r\n                <v-spacer></v-spacer>\r\n                <delete-label \r\n                    :label="label"\r\n                ></delete-label>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-menu>';});


define('text!components/templates/labelColorPicker.html',[],function () { return '<div>\r\n    <b class="mx-0 px-0">Select a color</b>\r\n    <v-row class="mt-1">\r\n        <v-col \r\n            md="3" \r\n            class="pa-1"\r\n            v-for="color in colors"\r\n        >\r\n            <div\r\n                @click="setValue(color.value)"\r\n                class="label-color-pick rounded d-flex align-center justify-center"\r\n                :style="\'background-color: \'+color.value"\r\n                v-ripple\r\n            >\r\n                <v-icon v-if="color.value === value" color="white">mdi-check</v-icon>\r\n            </div>\r\n        </v-col>\r\n    </v-row>\r\n</div>';});

define('components/labelColorPicker',['text!components/templates/labelColorPicker.html'],
(template) => {
    return Vue.extend({
        template,
        props: {
            value: {
                required: true
            },
            colors: {
                required: true
            },
            setDefault: {
                required: false,
                default: true
            }
        },
        methods: {
            setValue(value){
                this.value = value;
                this.$emit('input', value);
            }
        },
        created() {
            if (this.setDefault){
                this.setValue(this.colors[0].value);
            }
        },
    });
});

define('text!components/templates/deleteLabel.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn\r\n            v-on="on"\r\n            color="red darken-4"\r\n            class="white--text text-none"\r\n            elevation="0"\r\n        >Delete</v-btn>\r\n    </template>\r\n    <v-card width="300">\r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>Delete Label?</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click="close()">\r\n                <v-icon size="20">mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="pa-2">\r\n            Are you sure you want to delete this Label? Your action will be permanent and irreversible.\r\n        </v-card-text>\r\n        <v-card-actions class="pa-2">\r\n            <v-btn @click="deleteLabel()" color="red darken-4 white--text" class="text-none" elevation="0" block>\r\n                Delete Label\r\n            </v-btn>\r\n        </v-card-actions>\r\n    </v-card>\r\n</v-menu>';});

define('components/deleteLabel',['text!components/templates/deleteLabel.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['label'],
        mixins: [openAndClose],
        methods: {
            deleteLabel(){
                this.dispatchToStore();
            },
            dispatchToStore(){
                store.dispatch('labels/delete', this.label.id);
            }
        }
    });
});
define('components/editLabel',['text!components/templates/editLabel.html',
'mixins/openAndClose','model/jsonLoader','components/labelColorPicker','components/deleteLabel','store/index'],
(template, openAndClose, jsonLoader, labelColorPicker, deleteLabel, store) => {
    return Vue.extend({
        template,
        mixins: [openAndClose],
        props: ['label'],
        components: {
            labelColorPicker,
            deleteLabel
        },
        watch: {
            label(){
                this.loadLabel();
            }
        },
        data() {
            return {
                colors: [],
                color: '',
                name: ''
            }
        },
        methods: {
            editLabel(){ 
                this.dispatchToStore();
                this.close();
            },
            dispatchToStore(){
                let label = Object.assign({}, this.label);
                label.color = this.color;
                label.name = this.name;
                store.dispatch('labels/update', label);
            },
            loadColors(){
                let self = this;
                jsonLoader.load('label/colors').then(colors => {
                    self.colors = colors;
                }).catch(console.log);
            },
            loadLabel(){
                this.name = this.label.name;
                this.color = this.label.color;
            }
        },
        created() {
            this.loadColors();
            this.loadLabel();
        },
    });
});
define('components/cardLabel',['text!components/templates/cardLabel.html','components/editLabel','store/index'],
(template, editLabel, store) => {

    return Vue.extend({
        template,
        props: {
            label: {
                required: true
            },
            card: {
                required: true,
                default: false
            }
        },
        computed: {
            labeled(){
                return store.getters['cardLabels/getAll'].find(c => c.cardID === this.card.id  && c.labelID === this.label.id);
            }
        },
        components: {
            editLabel
        },
        methods: {
            toggleLabel(){
                if (this.labeled) this.unLabelCard()
                else this.labelCard();
            },
            labelCard(){
                store.dispatch('cardLabels/create',{
                    cardID: this.card.id,
                    labelID: this.label.id
                });
            },
            unLabelCard(){
                /*Remove all instances--*/
                let cardLabels = store.getters['cardLabels/getAll'].filter(c => c.cardID === this.card.id  && c.labelID === this.label.id);
                cardLabels.forEach(cardLabel => {
                    store.dispatch('cardLabels/delete', cardLabel.id);       
                });
            }
        },
    });
    
});

define('text!components/templates/boardLabel.html',[],function () { return '<div class="label-bar mt-2">\r\n    <div \r\n        :style="\'background-color: \'+label.color" \r\n        class="label-bar_color rounded pl-3 cursor-pointer" \r\n        v-ripple>\r\n        <b class="white--text">{{ label.name }}</b>\r\n    </div>\r\n    <edit-label :label="label"></edit-label>\r\n</div>';});

define('components/boardLabel',['text!components/templates/boardLabel.html','components/editLabel'],
(template, editLabel) => {
    return Vue.extend({
        template,
        props: ['label'],
        components: {
            editLabel
        }
    });
});
define('components/label',['text!components/templates/label.html','components/cardLabel','components/boardLabel'],
(template, cardLabel, boardLabel) => {
    return Vue.extend({
        template,
        props: {
            card: {
                required: false,
                default: false
            },
            label: {
                required: true,
            }
        },
        components: {
            boardLabel,
            cardLabel
        }
    });
});
/**
 * Fuse.js v6.4.1 - Lightweight fuzzy-search (http://fusejs.io)
 *
 * Copyright (c) 2020 Kiro Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */
var e,t;e=this,t=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function l(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){return Array.isArray?Array.isArray(e):"[object Array]"===x(e)}function g(e){return"string"==typeof e}function y(e){return"number"==typeof e}function p(e){return!0===e||!1===e||function(e){return m(e)&&null!==e}(e)&&"[object Boolean]"==x(e)}function m(t){return"object"===e(t)}function k(e){return null!=e}function M(e){return!e.trim().length}function x(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var b=function(e){return"Invalid value for key ".concat(e)},S=function(e){return"Pattern length exceeds max of ".concat(e,".")},_=Object.prototype.hasOwnProperty,w=function(){function e(n){var r=this;t(this,e),this._keys=[],this._keyMap={};var i=0;n.forEach((function(e){var t=L(e);i+=t.weight,r._keys.push(t),r._keyMap[t.id]=t,i+=t.weight})),this._keys.forEach((function(e){e.weight/=i}))}return r(e,[{key:"get",value:function(e){return this._keyMap[e]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),e}();function L(e){var t=null,n=null,r=null,i=1;if(g(e)||v(e))r=e,t=O(e),n=j(e);else{if(!_.call(e,"name"))throw new Error(function(e){return"Missing ".concat(e," property in key")}("name"));var o=e.name;if(r=o,_.call(e,"weight")&&(i=e.weight)<=0)throw new Error(function(e){return"Property 'weight' in key '".concat(e,"' must be a positive integer")}(o));t=O(o),n=j(o)}return{path:t,id:n,weight:i,src:r}}function O(e){return v(e)?e:e.split(".")}function j(e){return v(e)?e.join("."):e}var A=c({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(e,t){return e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1}},{},{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},{},{location:0,threshold:.6,distance:100},{},{useExtendedSearch:!1,getFn:function(e,t){var n=[],r=!1;return function e(t,i,o){if(i[o]){var c=t[i[o]];if(!k(c))return;if(o===i.length-1&&(g(c)||y(c)||p(c)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(c));else if(v(c)){r=!0;for(var a=0,s=c.length;a<s;a+=1)e(c[a],i,o+1)}else i.length&&e(c,i,o+1)}else n.push(t)}(e,g(t)?t.split("."):t,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}),I=/[^ ]+/g;function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=new Map;return{get:function(n){var r=n.match(I).length;if(t.has(r))return t.get(r);var i=parseFloat((1/Math.sqrt(r)).toFixed(e));return t.set(r,i),i},clear:function(){t.clear()}}}var E=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.getFn,i=void 0===r?A.getFn:r;t(this,e),this.norm=C(3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}return r(e,[{key:"setSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}},{key:"setIndexRecords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}},{key:"setKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=t,this._keysMap={},t.forEach((function(t,n){e._keysMap[t.id]=n}))}},{key:"create",value:function(){var e=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,g(this.docs[0])?this.docs.forEach((function(t,n){e._addString(t,n)})):this.docs.forEach((function(t,n){e._addObject(t,n)})),this.norm.clear())}},{key:"add",value:function(e){var t=this.size();g(e)?this._addString(e,t):this._addObject(e,t)}},{key:"removeAt",value:function(e){this.records.splice(e,1);for(var t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}},{key:"getValueForItemAtKeyId",value:function(e,t){return e[this._keysMap[t]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(e,t){if(k(e)&&!M(e)){var n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}}},{key:"_addObject",value:function(e,t){var n=this,r={i:t,$:{}};this.keys.forEach((function(t,i){var o=n.getFn(e,t.path);if(k(o))if(v(o))!function(){for(var e=[],t=[{nestedArrIndex:-1,value:o}];t.length;){var c=t.pop(),a=c.nestedArrIndex,s=c.value;if(k(s))if(g(s)&&!M(s)){var u={v:s,i:a,n:n.norm.get(s)};e.push(u)}else v(s)&&s.forEach((function(e,n){t.push({nestedArrIndex:n,value:e})}))}r.$[i]=e}();else if(!M(o)){var c={v:o,n:n.norm.get(o)};r.$[i]=c}})),this.records.push(r)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getFn,i=void 0===r?A.getFn:r,o=new E({getFn:i});return o.setKeys(e.map(L)),o.setSources(t),o.create(),o}function R(e,t){var n=e.matches;t.matches=[],k(n)&&n.forEach((function(e){if(k(e.indices)&&e.indices.length){var n={indices:e.indices,value:e.value};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)}}))}function F(e,t){t.score=e.score}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.errors,r=void 0===n?0:n,i=t.currentLocation,o=void 0===i?0:i,c=t.expectedLocation,a=void 0===c?0:c,s=t.distance,u=void 0===s?A.distance:s,h=t.ignoreLocation,f=void 0===h?A.ignoreLocation:h,l=r/e.length;if(f)return l;var d=Math.abs(a-o);return u?l+d/u:d?1:l}function N(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.minMatchCharLength,n=[],r=-1,i=-1,o=0,c=e.length;o<c;o+=1){var a=e[o];a&&-1===r?r=o:a||-1===r||((i=o-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}function D(e){for(var t={},n=0,r=e.length;n<r;n+=1){var i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}var z=function(){function e(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.location,c=void 0===o?A.location:o,a=i.threshold,s=void 0===a?A.threshold:a,u=i.distance,h=void 0===u?A.distance:u,f=i.includeMatches,l=void 0===f?A.includeMatches:f,d=i.findAllMatches,v=void 0===d?A.findAllMatches:d,g=i.minMatchCharLength,y=void 0===g?A.minMatchCharLength:g,p=i.isCaseSensitive,m=void 0===p?A.isCaseSensitive:p,k=i.ignoreLocation,M=void 0===k?A.ignoreLocation:k;if(t(this,e),this.options={location:c,threshold:s,distance:h,includeMatches:l,findAllMatches:v,minMatchCharLength:y,isCaseSensitive:m,ignoreLocation:M},this.pattern=m?n:n.toLowerCase(),this.chunks=[],this.pattern.length){var x=function(e,t){r.chunks.push({pattern:e,alphabet:D(e),startIndex:t})},b=this.pattern.length;if(b>32){for(var S=0,_=b%32,w=b-_;S<w;)x(this.pattern.substr(S,32),S),S+=32;if(_){var L=b-32;x(this.pattern.substr(L),L)}}else x(this.pattern,0)}}return r(e,[{key:"searchIn",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var i={isMatch:!0,score:0};return r&&(i.indices=[[0,e.length-1]]),i}var o=this.options,c=o.location,a=o.distance,s=o.threshold,u=o.findAllMatches,h=o.minMatchCharLength,f=o.ignoreLocation,d=[],v=0,g=!1;this.chunks.forEach((function(t){var n=t.pattern,i=t.alphabet,o=t.startIndex,y=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.location,o=void 0===i?A.location:i,c=r.distance,a=void 0===c?A.distance:c,s=r.threshold,u=void 0===s?A.threshold:s,h=r.findAllMatches,f=void 0===h?A.findAllMatches:h,l=r.minMatchCharLength,d=void 0===l?A.minMatchCharLength:l,v=r.includeMatches,g=void 0===v?A.includeMatches:v,y=r.ignoreLocation,p=void 0===y?A.ignoreLocation:y;if(t.length>32)throw new Error(S(32));for(var m,k=t.length,M=e.length,x=Math.max(0,Math.min(o,M)),b=u,_=x,w=d>1||g,L=w?Array(M):[];(m=e.indexOf(t,_))>-1;){var O=P(t,{currentLocation:m,expectedLocation:x,distance:a,ignoreLocation:p});if(b=Math.min(O,b),_=m+k,w)for(var j=0;j<k;)L[m+j]=1,j+=1}_=-1;for(var I=[],C=1,E=k+M,$=1<<k-1,R=0;R<k;R+=1){for(var F=0,D=E;F<D;){var z=P(t,{errors:R,currentLocation:x+D,expectedLocation:x,distance:a,ignoreLocation:p});z<=b?F=D:E=D,D=Math.floor((E-F)/2+F)}E=D;var K=Math.max(1,x-D+1),q=f?M:Math.min(x+D,M)+k,W=Array(q+2);W[q+1]=(1<<R)-1;for(var J=q;J>=K;J-=1){var T=J-1,U=n[e.charAt(T)];if(w&&(L[T]=+!!U),W[J]=(W[J+1]<<1|1)&U,R&&(W[J]|=(I[J+1]|I[J])<<1|1|I[J+1]),W[J]&$&&(C=P(t,{errors:R,currentLocation:T,expectedLocation:x,distance:a,ignoreLocation:p}))<=b){if(b=C,(_=T)<=x)break;K=Math.max(1,2*x-_)}}var V=P(t,{errors:R+1,currentLocation:x,expectedLocation:x,distance:a,ignoreLocation:p});if(V>b)break;I=W}var B={isMatch:_>=0,score:Math.max(.001,C)};if(w){var G=N(L,d);G.length?g&&(B.indices=G):B.isMatch=!1}return B}(e,n,i,{location:c+o,distance:a,threshold:s,findAllMatches:u,minMatchCharLength:h,includeMatches:r,ignoreLocation:f}),p=y.isMatch,m=y.score,k=y.indices;p&&(g=!0),v+=m,p&&k&&(d=[].concat(l(d),l(k)))}));var y={isMatch:g,score:g?v/this.chunks.length:1};return g&&r&&(y.indices=d),y}}]),e}(),K=function(){function e(n){t(this,e),this.pattern=n}return r(e,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(e){return q(e,this.multiRegex)}},{key:"isSingleMatch",value:function(e){return q(e,this.singleRegex)}}]),e}();function q(e,t){var n=e.match(t);return n?n[1]:null}var W=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){var t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),i}(K),J=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){var t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),i}(K),T=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){var t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),i}(K),U=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){var t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),i}(K),V=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){var t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),i}(K),B=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){var t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),i}(K),G=function(e){a(i,e);var n=f(i);function i(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=o.location,a=void 0===c?A.location:c,s=o.threshold,u=void 0===s?A.threshold:s,h=o.distance,f=void 0===h?A.distance:h,l=o.includeMatches,d=void 0===l?A.includeMatches:l,v=o.findAllMatches,g=void 0===v?A.findAllMatches:v,y=o.minMatchCharLength,p=void 0===y?A.minMatchCharLength:y,m=o.isCaseSensitive,k=void 0===m?A.isCaseSensitive:m;return t(this,i),(r=n.call(this,e))._bitapSearch=new z(e,{location:a,threshold:u,distance:f,includeMatches:d,findAllMatches:g,minMatchCharLength:p,isCaseSensitive:k}),r}return r(i,[{key:"search",value:function(e){return this._bitapSearch.searchIn(e)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),i}(K),H=function(e){a(i,e);var n=f(i);function i(e){return t(this,i),n.call(this,e)}return r(i,[{key:"search",value:function(e){for(var t,n=0,r=[],i=this.pattern.length;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,r.push([t,n-1]);var o=!!r.length;return{isMatch:o,score:o?1:0,indices:r}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),i}(K),Q=[W,H,T,U,B,V,J,G],X=Q.length,Y=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((function(e){for(var n=e.trim().split(Y).filter((function(e){return e&&!!e.trim()})),r=[],i=0,o=n.length;i<o;i+=1){for(var c=n[i],a=!1,s=-1;!a&&++s<X;){var u=Q[s],h=u.isMultiMatch(c);h&&(r.push(new u(h,t)),a=!0)}if(!a)for(s=-1;++s<X;){var f=Q[s],l=f.isSingleMatch(c);if(l){r.push(new f(l,t));break}}}return r}))}var ee=new Set([G.type,H.type]),te=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.isCaseSensitive,o=void 0===i?A.isCaseSensitive:i,c=r.includeMatches,a=void 0===c?A.includeMatches:c,s=r.minMatchCharLength,u=void 0===s?A.minMatchCharLength:s,h=r.findAllMatches,f=void 0===h?A.findAllMatches:h,l=r.location,d=void 0===l?A.location:l,v=r.threshold,g=void 0===v?A.threshold:v,y=r.distance,p=void 0===y?A.distance:y;t(this,e),this.query=null,this.options={isCaseSensitive:o,includeMatches:a,minMatchCharLength:u,findAllMatches:f,location:d,threshold:g,distance:p},this.pattern=o?n:n.toLowerCase(),this.query=Z(this.pattern,this.options)}return r(e,[{key:"searchIn",value:function(e){var t=this.query;if(!t)return{isMatch:!1,score:1};var n=this.options,r=n.includeMatches;e=n.isCaseSensitive?e:e.toLowerCase();for(var i=0,o=[],c=0,a=0,s=t.length;a<s;a+=1){var u=t[a];o.length=0,i=0;for(var h=0,f=u.length;h<f;h+=1){var d=u[h],v=d.search(e),g=v.isMatch,y=v.indices,p=v.score;if(!g){c=0,i=0,o.length=0;break}if(i+=1,c+=p,r){var m=d.constructor.type;ee.has(m)?o=[].concat(l(o),l(y)):o.push(y)}}if(i){var k={isMatch:!0,score:c/i};return r&&(k.indices=o),k}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(e,t){return t.useExtendedSearch}}]),e}(),ne=[];function re(e,t){for(var n=0,r=ne.length;n<r;n+=1){var i=ne[n];if(i.condition(e,t))return new i(e,t)}return new z(e,t)}var ie="$and",oe="$or",ce="$path",ae="$val",se=function(e){return!(!e[ie]&&!e[oe])},ue=function(e){return!!e[ce]},he=function(e){return!v(e)&&m(e)&&!se(e)},fe=function(e){return i({},ie,Object.keys(e).map((function(t){return i({},t,e[t])})))},le=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;t(this,e),this.options=c({},A,{},r),this.options.useExtendedSearch,this._keyStore=new w(this.options.keys),this.setCollection(n,i)}return r(e,[{key:"setCollection",value:function(e,t){if(this._docs=e,t&&!(t instanceof E))throw new Error("Incorrect 'index' type");this._myIndex=t||$(this.options.keys,this._docs,{getFn:this.options.getFn})}},{key:"add",value:function(e){k(e)&&(this._docs.push(e),this._myIndex.add(e))}},{key:"remove",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!1},t=[],n=0,r=this._docs.length;n<r;n+=1){var i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,t.push(i))}return t}},{key:"removeAt",value:function(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.limit,r=void 0===n?-1:n,i=this.options,o=i.includeMatches,c=i.includeScore,a=i.shouldSort,s=i.sortFn,u=i.ignoreFieldNorm,h=g(e)?g(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return de(h,{ignoreFieldNorm:u}),a&&h.sort(s),y(r)&&r>-1&&(h=h.slice(0,r)),ve(h,this._docs,{includeMatches:o,includeScore:c})}},{key:"_searchStringList",value:function(e){var t=re(e,this.options),n=this._myIndex.records,r=[];return n.forEach((function(e){var n=e.v,i=e.i,o=e.n;if(k(n)){var c=t.searchIn(n),a=c.isMatch,s=c.score,u=c.indices;a&&r.push({item:n,idx:i,matches:[{score:s,value:n,norm:o,indices:u}]})}})),r}},{key:"_searchLogical",value:function(e){var t=this,n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.auto,i=void 0===r||r,o=function e(n){var r=Object.keys(n),o=ue(n);if(!o&&r.length>1&&!se(n))return e(fe(n));if(he(n)){var c=o?n[ce]:r[0],a=o?n[ae]:n[c];if(!g(a))throw new Error(b(c));var s={keyId:j(c),pattern:a};return i&&(s.searcher=re(a,t)),s}var u={children:[],operator:r[0]};return r.forEach((function(t){var r=n[t];v(r)&&r.forEach((function(t){u.children.push(e(t))}))})),u};return se(e)||(e=fe(e)),o(e)}(e,this.options),r=this._myIndex.records,i={},o=[];return r.forEach((function(e){var r=e.$,c=e.i;if(k(r)){var a=function e(n,r,i){if(!n.children){var o=n.keyId,c=n.searcher,a=t._findMatches({key:t._keyStore.get(o),value:t._myIndex.getValueForItemAtKeyId(r,o),searcher:c});return a&&a.length?[{idx:i,item:r,matches:a}]:[]}switch(n.operator){case ie:for(var s=[],u=0,h=n.children.length;u<h;u+=1){var f=e(n.children[u],r,i);if(!f.length)return[];s.push.apply(s,l(f))}return s;case oe:for(var d=[],v=0,g=n.children.length;v<g;v+=1){var y=e(n.children[v],r,i);if(y.length){d.push.apply(d,l(y));break}}return d}}(n,r,c);a.length&&(i[c]||(i[c]={idx:c,item:r,matches:[]},o.push(i[c])),a.forEach((function(e){var t,n=e.matches;(t=i[c].matches).push.apply(t,l(n))})))}})),o}},{key:"_searchObjectList",value:function(e){var t=this,n=re(e,this.options),r=this._myIndex,i=r.keys,o=r.records,c=[];return o.forEach((function(e){var r=e.$,o=e.i;if(k(r)){var a=[];i.forEach((function(e,i){a.push.apply(a,l(t._findMatches({key:e,value:r[i],searcher:n})))})),a.length&&c.push({idx:o,item:r,matches:a})}})),c}},{key:"_findMatches",value:function(e){var t=e.key,n=e.value,r=e.searcher;if(!k(n))return[];var i=[];if(v(n))n.forEach((function(e){var n=e.v,o=e.i,c=e.n;if(k(n)){var a=r.searchIn(n),s=a.isMatch,u=a.score,h=a.indices;s&&i.push({score:u,key:t,value:n,idx:o,norm:c,indices:h})}}));else{var o=n.v,c=n.n,a=r.searchIn(o),s=a.isMatch,u=a.score,h=a.indices;s&&i.push({score:u,key:t,value:o,norm:c,indices:h})}return i}}]),e}();function de(e,t){var n=t.ignoreFieldNorm,r=void 0===n?A.ignoreFieldNorm:n;e.forEach((function(e){var t=1;e.matches.forEach((function(e){var n=e.key,i=e.norm,o=e.score,c=n?n.weight:null;t*=Math.pow(0===o&&c?Number.EPSILON:o,(c||1)*(r?1:i))})),e.score=t}))}function ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.includeMatches,i=void 0===r?A.includeMatches:r,o=n.includeScore,c=void 0===o?A.includeScore:o,a=[];return i&&a.push(R),c&&a.push(F),e.map((function(e){var n=e.idx,r={item:t[n],refIndex:n};return a.length&&a.forEach((function(t){t(e,r)})),r}))}return le.version="6.4.1",le.createIndex=$,le.parseIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getFn,r=void 0===n?A.getFn:n,i=e.keys,o=e.records,c=new E({getFn:r});return c.setKeys(i),c.setIndexRecords(o),c},le.config=A,function(){ne.push.apply(ne,arguments)}(te),le},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define('fuse',t):(e=e||self).Fuse=t();
define('components/searchLabels',['text!components/templates/searchLabels.html','components/label','fuse','store/index'],
(template, appLabel, Fuse, store) => {
    let isEmpty = (val) => !(/\S/.test(val));
        
    return Vue.extend({
        template,
        props: {
            card: {
                required: false,
                default: false
            },
            board: {
                required: true,
            }
        },
        components: {
            appLabel
        },
        data() {
            return {
                keyword: ''
            }
        },
        watch: {
            keyword(val){
                let event = (isEmpty(val)) ? 'end' : 'start';
                this.$emit(event);
            }
        },
        computed: {
            results(){
                let list = store.getters['labels/getAll'].filter((l => l.boardID === this.board.id));
                let keys = ['name'];
                return this.fuseSearch(list, keys);
            },
            keywordIsValid(){
                return !isEmpty(this.keyword);
            }
        },
        methods: {
            fuseSearch(list, keys = ['name']){
                let options = {keys};
                let fuse = new Fuse(list, options);
                return fuse.search(`=${this.keyword}`).map(r => r.item);
            }
        },
    });
});

define('text!components/templates/createLabel.html',[],function () { return '<v-menu\r\n    width="300"\r\n    top\r\n    offset-y\r\n    v-model="opened"\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn\r\n            v-on="on"\r\n            block\r\n            elevation="0"\r\n            class="btn-custom-grey mt-4"\r\n        >Create a new label</v-btn>\r\n    </template>\r\n    <v-form @submit.prevent="createLabel()">\r\n        <v-card \r\n            width="100%"\r\n            elevation="0"\r\n        >\r\n            <v-card-title class="pa-2">\r\n                <v-spacer></v-spacer>\r\n                <small>Create Label</small>\r\n                <v-spacer></v-spacer>\r\n                <v-btn icon @click="close()">\r\n                    <v-icon size="20">mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text class="pa-2">\r\n                <v-text-field\r\n                    label="Name"\r\n                    hide-details="auto"\r\n                    dense\r\n                    filled\r\n                    autofocus\r\n                    v-model="name"\r\n                ></v-text-field>\r\n                <label-color-picker \r\n                    :colors="colors" \r\n                    class="mt-2 pa-2"\r\n                    v-model="color"\r\n                ></label-color-picker>\r\n            </v-card-text>\r\n            <v-card-actions class="pa-2">\r\n                <v-btn\r\n                    @click="createLabel()"\r\n                    color="green"\r\n                    class="white--text text-none"\r\n                    elevation="0"\r\n                >Create</v-btn>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-menu>';});

define('components/createLabel',['text!components/templates/createLabel.html','mixins/openAndClose','components/labelColorPicker','model/jsonLoader','store/index'],
(template, openAndClose, labelColorPicker, jsonLoader, store) => {

    return Vue.extend({
        template,
        data() {
            return {
                colors: [],
                color: '',
                name: ''
            }
        },
        props: ['board'],
        mixins: [openAndClose],
        components: {
            labelColorPicker
        },
        methods: {
            loadColors(){
                let self = this;
                jsonLoader.load('label/colors').then(colors => {
                    self.colors = colors;
                }).catch(console.log);
            },
            createLabel(){
                this.dispatchToStore();
                this.close();
                this.reset();
            },
            dispatchToStore(){
                let label = {
                    boardID: this.board.id,
                    color: this.color,
                    name: this.name
                };
                store.dispatch('labels/create', label);
            },
            reset(){
                this.name = '';
            }
        },
        created() {
            this.loadColors();
        },
    });
});

define('text!components/templates/labelsList.html',[],function () { return '<section>\r\n    <div class="d-flex flex-column mt-4">\r\n        <b class="grey--text text--darken-1">LABELS</b>\r\n        <app-label\r\n            v-for="label in labels" \r\n            :label="label"\r\n            :card="card"\r\n        ></app-label>\r\n        <section v-if="labels.length <= 0" class="w-100" style="height: 200px">\r\n            <div class="d-flex flex-column align-center text-center justify-center fill-height">\r\n                <v-icon size="40">mdi-label-outline</v-icon>\r\n                <p class="mt-2">Use labels to better organize your cards.<br/>\'Create a new label\' to get started</p>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</section>';});

define('components/labelsList',['text!components/templates/labelsList.html','components/label'],
(template, appLabel) => {
    return Vue.extend({
        template,
        props: {
            card: {
                required: false,
                default: false
            },
            labels: {
                required: true,
            }
        },
        components: {
            appLabel
        }
    });
});
define('components/editCardLabels',['text!components/templates/editCardLabels.html','components/searchLabels','components/createLabel','components/labelsList','mixins/openAndClose','store/index'],
(template, searchLabels, createLabel, labelsList, openAndClose, store) => {

    return Vue.extend({
        template,
        data() {
            return {
                searching: false
            }
        },
        props: ['card'],
        mixins: [openAndClose],
        components: {
            createLabel,
            searchLabels,
            labelsList
        },
        computed: {
            labels(){
                return store.getters['labels/getAll'].filter(l => l.boardID === this.card.boardID).sort((a, b) => a.created - b.created);
            },
            board(){
                return store.getters['boards/getAll'].find(b => b.id === this.card.boardID);
            }
        },
    });
});
define('components/addCardOptions',['text!components/templates/addCardOptions.html','components/editCardLabels','mixins/openAndClose'],
(template, editCardLabels, openAndClose) => {
    return Vue.extend({
        template,
        mixins: [openAndClose],
        props: ['card'],
        components: {
            editCardLabels
        }
    });
});

define('text!components/templates/cardLabelChips.html',[],function () { return '<div class="d-flex align-center px-2" style="min-height: 10px;">\r\n    <div \r\n        class="card-label-chip rounded-lg mr-1 mt-1 mb-1" \r\n        :style="\'background-color: \'+label.color"\r\n        v-for="label in labels">\r\n    </div>\r\n</div>';});

define('components/cardLabelChips',['text!components/templates/cardLabelChips.html','store/index'],
(template, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        computed: {
            cardLabels(){
                return store.getters['cardLabels/getAll'].filter(c => c.cardID === this.card.id);
            },
            labels(){
                let labels = [];
                this.cardLabels.forEach(cardLabel => {
                    labels.push(
                        store.getters['labels/getAll'].find(l => l.id === cardLabel.labelID)
                    );
                });
                return labels;
            }
        },
    });
});
define('components/addCard',['text!components/templates/addCard.html','components/addCardOptions','components/cardLabelChips','mixins/openAndClose','helpers/createID','store/index'],
(template, addCardOptions, cardLabelChips, openAndClose, createID, store) => {
    function isEnterKey(event){
        return event.key === 'Enter';
    };

    return Vue.extend({
        template,
        props: ['list'],
        mixins: [openAndClose],
        components: {
            addCardOptions,
            cardLabelChips
        },
        data() {
            return {
                title: '',
                card: {
                    id: createID(10),
                    boardID: this.list.boardID,
                    listID: this.list.id
                }
            }
        },
        computed: {
            valid(){
                return (/\S/).test( this.title );
            }
        },
        methods: {
            addCard(){
                if (!this.valid) return;
                this.dispatchToStore();
                this.reset();
            },
            dispatchToStore(){
                let card = Object.assign({}, this.card);
                card.title = this.title;
                store.dispatch('cards/create', card);
            },
            reset(){
                this.title = '';
                this.card = {
                    id: createID(10),
                    boardID: this.list.boardID,
                    listID: this.list.id
                };
            },
            handleKeyDown(evt){
                /*--Pressing the enter key submits the card for adding--*/
                if ( isEnterKey(evt) ) { 
                    evt.preventDefault();
                    this.addCard();
                };
                return true;
            }
        }
    });
});
define('components/list',['text!components/templates/list.html','components/listHeader','components/listBody','components/addCard'],
(template, listHeader, listBody, addCard, ) => {
    return Vue.extend({
        template,
        props: ['list'],
        components: {
            listHeader,
            listBody,
            addCard
        }
    });
});

define('text!components/templates/card.html',[],function () { return '<div>\r\n    <v-card elevation="1">\r\n        <router-link :to="{name: \'boardCard\',params: {\'id\': card.boardID,\'cardID\': card.id}}" \r\n            tag="div" \r\n            class="card" \r\n            v-show="!opened"\r\n        >\r\n            <!--Edit icon on top right-->\r\n            <v-btn icon @click.prevent="open()" class="card_edit-btn" v-if="editable">\r\n                <v-icon small>mdi-pencil</v-icon>\r\n            </v-btn>\r\n            <card-label-chips :card="card"></card-label-chips>\r\n            <v-card-text class="pa-2 py-0">\r\n                <b class="font-weight-regular text--blue-grey text--darken-1">{{ card.title }}</b>\r\n            </v-card-text>\r\n            <card-chips class="px-2 mt-1" :card="card"></card-chips>\r\n        </router-link>\r\n    </v-card>\r\n    <open-card @close="close()" :card="card" v-show="opened"></open-card>\r\n</div>';});


define('text!components/templates/cardChips.html',[],function () { return '<div class="d-flex align-center">\r\n    <card-description-chip :card="card"></card-description-chip>\r\n    <card-schedule-chip class="mr-2" :card="card"></card-schedule-chip>\r\n    <card-archive-chip :card="card"></card-archive-chip>\r\n    <card-checklist-chip :card="card"></card-checklist-chip>\r\n</div>';});


define('text!components/templates/cardChecklistChip.html',[],function () { return '<div :class="{\'green white--text\': completed >= total}" class="d-flex align-center pa-1 mb-1 rounded" v-if="total >= 1">\r\n    <v-icon  :class="{\'white--text\': completed >= total}" small left>\r\n        mdi-checkbox-marked-outline\r\n    </v-icon>\r\n    <small>{{ completed }}/{{ total }}</small>\r\n</div>';});

define('components/cardChecklistChip',['text!components/templates/cardChecklistChip.html','store/index'],
(template, store) => {
    function getItems(checklistID){
        return store.getters['checklistItems/getAll'].filter(i => i.checklistID === checklistID);
    };

    return Vue.extend({
        template,
        props: ['card'],
        computed: {
            checklists(){
                return store.getters['checklists/getAll'].filter(l => l.cardID === this.card.id);
            },
            items(){
                /*--Get all items from across all checklists--*/
                let allItems = [];
                this.checklists.forEach(checklist => {
                    getItems(checklist.id).forEach(item => {
                        allItems.push(item);
                    });
                });
                return allItems;
            },
            completed(){
                return this.items.filter(i => i.completed).length;
            },
            total(){
                return this.items.length;
            }
        }
    });
});

define('text!components/templates/cardDescriptionChip.html',[],function () { return '<div class="d-flex align-center pa-1 pl-0 mb-1 rounded" v-if="hasDescription">\r\n    <v-icon small left>\r\n        mdi-view-headline\r\n    </v-icon>\r\n</div>';});

define('components/cardDescriptionChip',['text!components/templates/cardDescriptionChip.html'],
(template) => {
    let isEmpty = (val) => !(/\S/).test(val);
    
    return Vue.extend({
        template,
        props: ['card'],
        computed: {
            hasDescription(){
                return !isEmpty(this.card.description);
            }
        },
    });
});

define('text!components/templates/cardArchiveChip.html',[],function () { return '<div class="d-flex align-center pa-1 pl-0 mb-1 rounded" v-if="card.archived">\r\n    <v-icon small left>\r\n        mdi-archive\r\n    </v-icon>\r\n    <small>Archived</small> \r\n</div>';});

define('components/cardArchiveChip',['text!components/templates/cardArchiveChip.html'],
(template) => {
    return Vue.extend({
        template,
        props: ['card']
    })
});

define('text!components/templates/cardScheduleChip.html',[],function () { return '<div class="d-flex align-center pa-1 mb-1 rounded" \r\n    v-if="card.schedule" \r\n    :class="{\'yellow darken-4 white--text\': overdue}">\r\n    <v-icon small left :class="{\'white--text\': overdue}">\r\n        mdi-clock\r\n    </v-icon>\r\n    <small>{{ card.schedule | scheduleFilter }}</small>\r\n</div>';});

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define('moment',t):e.moment=t()}(this,function(){"use strict";var e,i;function f(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(m(e,t))return;return 1}function r(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){for(var n=[],s=0;s<e.length;++s)n.push(t(e[s],s));return n}function c(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function _(e,t,n,s){return xt(e,t,n,s,!0).utc()}function y(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=y(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function w(e){var t=_(NaN);return null!=e?c(y(t),e):y(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var p=f.momentProperties=[],t=!1;function v(e,t){var n,s,i;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=y(t)),r(t._locale)||(e._locale=t._locale),0<p.length)for(n=0;n<p.length;n++)r(i=t[s=p[n]])||(e[s]=i);return e}function k(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,f.updateOffset(this),t=!1)}function M(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function D(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return c(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,i),a){for(var e,t,n=[],s=0;s<arguments.length;s++){if(e="","object"==typeof arguments[s]){for(t in e+="\n["+s+"] ",arguments[0])m(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[s];n.push(e)}D(i+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,S={};function Y(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),S[e]||(D(t),S[e]=!0)}function O(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=c({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},c(s[n],e[n]),c(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=c({},s[n]));return s}function x(e){null!=e&&this.set(e)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};function T(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(s){for(var e,i=s.match(N),t=0,r=i.length;t<r;t++)W[i[t]]?i[t]=W[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",n=0;n<r;n++)t+=O(i[n])?i[n].call(e,s):i[n];return t}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;0<=n&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,--n;return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function V(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e)m(e,n)&&(t=V(n))&&(s[t]=e[n]);return s}var E={};function A(e,t){E[e]=t}function j(e){return e%4==0&&e%100!=0||e%400==0}function I(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!=t&&isFinite(t)&&(n=I(t)),n}function z(t,n){return function(e){return null!=e?(q(this,t,e),f.updateOffset(this,n),this):$(this,t)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&j(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),xe(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var B,J=/\d/,Q=/\d\d/,X=/\d{3}/,K=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,re=/\d{1,4}/,ae=/[+-]?\d{1,6}/,oe=/\d+/,ue=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ce(e,n,s){B[e]=O(n)?n:function(e,t){return e&&s?s:n}}function fe(e,t){return m(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}B={};var _e={};function ye(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),h(n)&&(s=function(e,t){t[n]=Z(e)}),t=0;t<e.length;t++)_e[e[t]]=s}function ge(e,i){ye(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var we,pe=0,ve=1,ke=2,Me=3,De=4,Se=5,Ye=6,Oe=7,be=8;function xe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1==s?j(e)?29:28:31-s%7%2}we=Array.prototype.indexOf?Array.prototype.indexOf:function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),C("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),A("month",8),ce("M",te),ce("MM",te,Q),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),ye(["M","MM"],function(e,t){t[ve]=Z(e)-1}),ye(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ve]=i:y(n).invalidMonth=e});var Te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Re=de,We=de;function Ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Z(t);else if(!h(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),xe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Ce(this,e),f.updateOffset(this,!0),this):$(this,"Month")}function He(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=_([2e3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=me(n[r]),s[r]=me(s[r]);for(r=0;r<24;r++)i[r]=me(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Fe(e){return j(e)?366:365}C("Y",0,0,function(){var e=this.year();return e<=9999?T(e,4):"+"+e}),C(0,["YY",2],0,function(){return this.year()%100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),L("year","y"),A("year",1),ce("Y",ue),ce("YY",te,Q),ce("YYYY",re,K),ce("YYYYY",ae,ee),ce("YYYYYY",ae,ee),ye(["YYYYY","YYYYYY"],pe),ye("YYYY",function(e,t){t[pe]=2===e.length?f.parseTwoDigitYear(e):Z(e)}),ye("YY",function(e,t){t[pe]=f.parseTwoDigitYear(e)}),ye("Y",function(e,t){t[pe]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return Z(e)+(68<Z(e)?1900:2e3)};var Le=z("FullYear",!0);function Ve(e){var t,n;return e<100&&0<=e?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ge(e,t,n){var s=7+t-n;return s-(7+Ve(e,0,s).getUTCDay()-t)%7-1}function Ee(e,t,n,s,i){var r,a=1+7*(t-1)+(7+n-s)%7+Ge(e,s,i),o=a<=0?Fe(r=e-1)+a:a>Fe(e)?(r=e+1,a-Fe(e)):(r=e,a);return{year:r,dayOfYear:o}}function Ae(e,t,n){var s,i,r=Ge(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+je(i=e.year()-1,t,n):a>je(e.year(),t,n)?(s=a-je(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function je(e,t,n){var s=Ge(e,t,n),i=Ge(e+1,t,n);return(Fe(e)-s+i)/7}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),A("week",5),A("isoWeek",5),ce("w",te),ce("ww",te,Q),ce("W",te),ce("WW",te,Q),ge(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=Z(e)});function Ie(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("d",0,"do","day"),C("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),C("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ce("d",te),ce("e",te),ce("E",te),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:y(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,s){t[s]=Z(e)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qe=de,Be=de,Je=de;function Qe(){function e(e,t){return t.length-e.length}for(var t,n,s,i,r=[],a=[],o=[],u=[],l=0;l<7;l++)t=_([2e3,1]).day(l),n=me(this.weekdaysMin(t,"")),s=me(this.weekdaysShort(t,"")),i=me(this.weekdays(t,"")),r.push(n),a.push(s),o.push(i),u.push(n),u.push(s),u.push(i);r.sort(e),a.sort(e),o.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Ke(e,t){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Xe),C("k",["kk",2],0,function(){return this.hours()||24}),C("hmm",0,0,function(){return""+Xe.apply(this)+T(this.minutes(),2)}),C("hmmss",0,0,function(){return""+Xe.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),L("hour","h"),A("hour",13),ce("a",et),ce("A",et),ce("H",te),ce("h",te),ce("k",te),ce("HH",te,Q),ce("hh",te,Q),ce("kk",te,Q),ce("hmm",ne),ce("hmmss",se),ce("Hmm",ne),ce("Hmmss",se),ye(["H","HH"],Me),ye(["k","kk"],function(e,t,n){var s=Z(e);t[Me]=24===s?0:s}),ye(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ye(["h","hh"],function(e,t,n){t[Me]=Z(e),y(n).bigHour=!0}),ye("hmm",function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s)),y(n).bigHour=!0}),ye("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i)),y(n).bigHour=!0}),ye("Hmm",function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s))}),ye("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i))});var tt=z("Hours",!0);var nt,st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Te,monthsShort:Ne,week:{dow:0,doy:6},weekdays:Ze,weekdaysMin:$e,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;0<t;){if(s=ut(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return nt}function ut(t){var e=null;if(void 0===it[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=nt._abbr,require("./locale/"+t),lt(e)}catch(e){it[t]=null}return it[t]}function lt(e,t){var n;return e&&((n=r(t)?dt(e):ht(e,t))?nt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),nt._abbr}function ht(e,t){if(null===t)return delete it[e],null;var n,s=st;if(t.abbr=e,null!=it[e])Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])s=it[t.parentLocale]._config;else{if(null==(n=ut(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;s=n._config}return it[e]=new x(b(s,t)),rt[e]&&rt[e].forEach(function(e){ht(e.name,e.config)}),lt(e),it[e]}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return nt;if(!o(e)){if(t=ut(e))return t;e=[e]}return ot(e)}function ct(e){var t,n=e._a;return n&&-2===y(e).overflow&&(t=n[ve]<0||11<n[ve]?ve:n[ke]<1||n[ke]>xe(n[pe],n[ve])?ke:n[Me]<0||24<n[Me]||24===n[Me]&&(0!==n[De]||0!==n[Se]||0!==n[Ye])?Me:n[De]<0||59<n[De]?De:n[Se]<0||59<n[Se]?Se:n[Ye]<0||999<n[Ye]?Ye:-1,y(e)._overflowDayOfYear&&(t<pe||ke<t)&&(t=ke),y(e)._overflowWeeks&&-1===t&&(t=Oe),y(e)._overflowWeekday&&-1===t&&(t=be),y(e).overflow=t),e}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,pt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,vt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(y(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Ot(e)}else e._isValid=!1}function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Ne.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function Dt(e){var t,n,s,i,r=pt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(r){if(t=Mt(r[4],r[3],r[2],r[5],r[6],r[7]),n=r[1],s=t,i=e,n&&ze.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()&&(y(i).weekdayMismatch=!0,!void(i._isValid=!1)))return;e._a=t,e._tzm=function(e,t,n){if(e)return vt[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return 60*((s-i)/100)+i}(r[8],r[9],r[10]),e._d=Ve.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function St(e,t,n){return null!=e?e:null!=t?t:n}function Yt(e){var t,n,s,i,r,a,o,u=[];if(!e._d){for(a=e,o=new Date(f.now()),s=a._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],e._w&&null==e._a[ke]&&null==e._a[ve]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=St(t.GG,e._a[pe],Ae(Tt(),1,4).year),s=St(t.W,1),((i=St(t.E,1))<1||7<i)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=Ae(Tt(),r,a),n=St(t.gg,e._a[pe],l.year),s=St(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r);s<1||s>je(n,r,a)?y(e)._overflowWeeks=!0:null!=u?y(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[pe]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=St(e._a[pe],s[pe]),(e._dayOfYear>Fe(r)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=Ve(r,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ke]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=u[t]=s[t];for(;t<7;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Me]&&0===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&(e._nextDay=!0,e._a[Me]=0),e._d=(e._useUTC?Ve:function(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,u),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Me]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function Ot(e){if(e._f!==f.ISO_8601)if(e._f!==f.RFC_2822){e._a=[],y(e).empty=!0;for(var t,n,s,i,r,a,o,u=""+e._i,l=u.length,h=0,d=H(e._f,e._locale).match(N)||[],c=0;c<d.length;c++)n=d[c],(t=(u.match(fe(n,e))||[])[0])&&(0<(s=u.substr(0,u.indexOf(t))).length&&y(e).unusedInput.push(s),u=u.slice(u.indexOf(t)+t.length),h+=t.length),W[n]?(t?y(e).empty=!1:y(e).unusedTokens.push(n),r=n,o=e,null!=(a=t)&&m(_e,r)&&_e[r](a,o._a,o,r)):e._strict&&!t&&y(e).unusedTokens.push(n);y(e).charsLeftOver=l-h,0<u.length&&y(e).unusedInput.push(u),e._a[Me]<=12&&!0===y(e).bigHour&&0<e._a[Me]&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[Me]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[Me],e._meridiem),null!==(i=y(e).era)&&(e._a[pe]=e._locale.erasConvertYear(i,e._a[pe])),Yt(e),ct(e)}else Dt(e);else kt(e)}function bt(e){var t,n,s=e._i,i=e._f;return e._locale=e._locale||dt(e._l),null===s||void 0===i&&""===s?w({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),M(s)?new k(ct(s)):(a(s)?e._d=s:o(i)?function(e){var t,n,s,i,r,a,o=!1;if(0===e._f.length)return y(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,a=!1,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Ot(t),g(t)&&(a=!0),r+=y(t).charsLeftOver,r+=10*y(t).unusedTokens.length,y(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));c(e,n||t)}(e):i?Ot(e):r(n=(t=e)._i)?t._d=new Date(f.now()):a(n)?t._d=new Date(n.valueOf()):"string"==typeof n?function(e){var t=wt.exec(e._i);null===t?(kt(e),!1===e._isValid&&(delete e._isValid,Dt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:f.createFromInputFallback(e)))):e._d=new Date(+t[1])}(t):o(n)?(t._a=d(n.slice(0),function(e){return parseInt(e,10)}),Yt(t)):u(n)?function(e){var t,n;e._d||(n=void 0===(t=G(e._i)).day?t.date:t.day,e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Yt(e))}(t):h(n)?t._d=new Date(n):f.createFromInputFallback(t),g(e)||(e._d=null),e))}function xt(e,t,n,s,i){var r,a={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&l(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new k(ct(bt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,t,n,s){return xt(e,t,n,s,!1)}f.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};var Nt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:w()}),Pt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:w()});function Rt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ct(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,s=!1;for(t in e)if(m(e,t)&&(-1===we.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Wt.length;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==Z(e[Wt[n]])&&(s=!0)}return!0}(t),this._milliseconds=+h+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=dt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){C(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+T(~~(e/60),2)+n+T(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ce("Z",he),ce("ZZ",he),ye(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Vt(he,e)});var Lt=/([\+\-]|\d\d)/gi;function Vt(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||[])+"").match(Lt)||["-",0,0])[1]+Z(n[2]))?0:"+"===n[0]?s:-s}function Gt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(M(e)||a(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),f.updateOffset(n,!1),n):Tt(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}f.updateOffset=function(){};var jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,It=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Zt(e,t){var n,s,i,r=e,a=null;return Ut(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=jt.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:Z(a[ke])*n,h:Z(a[Me])*n,m:Z(a[De])*n,s:Z(a[Se])*n,ms:Z(Ht(1e3*a[Ye]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:1,r={y:zt(a[2],n),M:zt(a[3],n),w:zt(a[4],n),d:zt(a[5],n),h:zt(a[6],n),m:zt(a[7],n),s:zt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=$t(e,t):((n=$t(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ct(r),Ut(e)&&m(e,"_locale")&&(s._locale=e._locale),Ut(e)&&m(e,"_isValid")&&(s._isValid=e._isValid),s}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=t-e.clone().add(n.months,"M"),n}function qt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Y(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),Bt(this,Zt(e,t),s),this}}function Bt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),a=Ht(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,$(e,"Month")+a*n),r&&q(e,"Date",$(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&f.updateOffset(e,r||a))}Zt.fn=Ct.prototype,Zt.invalid=function(){return Zt(NaN)};var Jt=qt(1,"add"),Qt=qt(-1,"subtract");function Xt(e){return"string"==typeof e||e instanceof String}function Kt(e){return M(e)||a(e)||Xt(e)||h(e)||function(t){var e=o(t),n=!1;e&&(n=0===t.filter(function(e){return!h(e)&&Xt(t)}).length);return e&&n}(e)||function(e){var t,n,s=u(e)&&!l(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)n=r[t],i=i||m(e,n);return s&&i}(e)||null==e}function en(e,t){if(e.date()<t.date())return-en(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),i=t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s);return-(n+i)||0}function tn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var nn=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function sn(){return this._locale}var rn=126227808e5;function an(e,t){return(e%t+t)%t}function on(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-rn:new Date(e,t,n).valueOf()}function un(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-rn:Date.UTC(e,t,n)}function ln(e,t){return t.erasAbbrRegex(e)}function hn(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(me(i[r].name)),e.push(me(i[r].abbr)),n.push(me(i[r].narrow)),s.push(me(i[r].name)),s.push(me(i[r].abbr)),s.push(me(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function dn(e,t){C(0,[e,e.length],0,t)}function cn(e,t,n,s,i){var r;return null==e?Ae(this,s,i).year:((r=je(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ve(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),ce("N",ln),ce("NN",ln),ce("NNN",ln),ce("NNNN",function(e,t){return t.erasNameRegex(e)}),ce("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?y(n).era=i:y(n).invalidEra=e}),ce("y",oe),ce("yy",oe),ce("yyy",oe),ce("yyyy",oe),ce("yo",function(e,t){return t._eraYearOrdinalRegex||oe}),ye(["y","yy","yyy","yyyy"],pe),ye(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[pe]=n._locale.eraYearOrdinalParse(e,i):t[pe]=parseInt(e,10)}),C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100}),dn("gggg","weekYear"),dn("ggggg","weekYear"),dn("GGGG","isoWeekYear"),dn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ce("G",ue),ce("g",ue),ce("GG",te,Q),ce("gg",te,Q),ce("GGGG",re,K),ce("gggg",re,K),ce("GGGGG",ae,ee),ce("ggggg",ae,ee),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=Z(e)}),ge(["gg","GG"],function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)}),C("Q",0,"Qo","quarter"),L("quarter","Q"),A("quarter",7),ce("Q",J),ye("Q",function(e,t){t[ve]=3*(Z(e)-1)}),C("D",["DD",2],"Do","date"),L("date","D"),A("date",9),ce("D",te),ce("DD",te,Q),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ye(["D","DD"],ke),ye("Do",function(e,t){t[ke]=Z(e.match(te)[0])});var fn=z("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),A("dayOfYear",4),ce("DDD",ie),ce("DDDD",X),ye(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Z(e)}),C("m",["mm",2],0,"minute"),L("minute","m"),A("minute",14),ce("m",te),ce("mm",te,Q),ye(["m","mm"],De);var mn=z("Minutes",!1);C("s",["ss",2],0,"second"),L("second","s"),A("second",15),ce("s",te),ce("ss",te,Q),ye(["s","ss"],Se);var _n,yn,gn=z("Seconds",!1);for(C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return 10*this.millisecond()}),C(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),C(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),C(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),C(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),C(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),A("millisecond",16),ce("S",ie,J),ce("SS",ie,Q),ce("SSS",ie,X),_n="SSSS";_n.length<=9;_n+="S")ce(_n,oe);function wn(e,t){t[Ye]=Z(1e3*("0."+e))}for(_n="S";_n.length<=9;_n+="S")ye(_n,wn);yn=z("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var pn=k.prototype;function vn(e){return e}pn.add=Jt,pn.calendar=function(e,t){1===arguments.length&&(Kt(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=u(e)&&!l(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||m(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0));var n=e||Tt(),s=Gt(n,this).startOf("day"),i=f.calendarFormat(this,s)||"sameElse",r=t&&(O(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},pn.clone=function(){return new k(this)},pn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=V(t)){case"year":r=en(this,s)/12;break;case"month":r=en(this,s);break;case"quarter":r=en(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:I(r)},pn.endOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-an(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-an(t,1e3)-1;break}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.format=function(e){e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},pn.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.fromNow=function(e){return this.from(Tt(),e)},pn.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.toNow=function(e){return this.to(Tt(),e)},pn.get=function(e){return O(this[e=V(e)])?this[e]():this},pn.invalidAt=function(){return y(this).overflow},pn.isAfter=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},pn.isBefore=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},pn.isBetween=function(e,t,n,s){var i=M(e)?e:Tt(e),r=M(t)?t:Tt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n)))},pn.isSame=function(e,t){var n,s=M(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},pn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},pn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},pn.isValid=function(){return g(this)},pn.lang=nn,pn.locale=tn,pn.localeData=sn,pn.max=Pt,pn.min=Nt,pn.parsingFlags=function(){return c({},y(this))},pn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)m(e,t)&&n.push({unit:t,priority:E[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=G(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(O(this[e=V(e)]))return this[e](t);return this},pn.startOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=an(t,6e4);break;case"second":t=this._d.valueOf(),t-=an(t,1e3);break}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.subtract=Qt,pn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},pn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(pn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1e3)},pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},pn.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},pn.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},pn.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},pn.year=Le,pn.isLeapYear=function(){return j(this.year())},pn.weekYear=function(e){return cn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(e){return cn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},pn.month=Ue,pn.daysInMonth=function(){return xe(this.year(),this.month())},pn.week=pn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},pn.isoWeek=pn.isoWeeks=function(e){var t=Ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},pn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},pn.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},pn.isoWeeksInYear=function(){return je(this.year(),1,4)},pn.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},pn.date=fn,pn.day=pn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},pn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},pn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,s=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?s:s-7)},pn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},pn.hour=pn.hours=tt,pn.minute=pn.minutes=mn,pn.second=pn.seconds=gn,pn.millisecond=pn.milliseconds=yn,pn.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if("string"==typeof e){if(null===(e=Vt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?Bt(this,Zt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},pn.utc=function(e){return this.utcOffset(0,e)},pn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),"m")),this},pn.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Vt(le,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},pn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pn.isUtc=At,pn.isUTC=At,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=n("dates accessor is deprecated. Use date instead.",fn),pn.months=n("months accessor is deprecated. Use month instead",Ue),pn.years=n("years accessor is deprecated. Use year instead",Le),pn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),pn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e,t={};return v(t,this),(t=bt(t))._a?(e=(t._isUTC?_:Tt)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&Z(e[a])!==Z(t[a]))&&r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});var kn=x.prototype;function Mn(e,t,n,s){var i=dt(),r=_().set(s,t);return i[n](r,e)}function Dn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return Mn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=Mn(e,i,n,"month");return s}function Sn(e,t,n,s){t=("boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t||"");var i,r=dt(),a=e?r._week.dow:0,o=[];if(null!=n)return Mn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=Mn(t,(i+a)%7,s,"day");return o}kn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},kn.invalidDate=function(){return this._invalidDate},kn.ordinal=function(e){return this._ordinal.replace("%d",e)},kn.preparse=vn,kn.postformat=vn,kn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},kn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)},kn.set=function(e){var t,n;for(n in e)m(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kn.eras=function(e,t){for(var n,s=this._eras||dt("en")._eras,i=0,r=s.length;i<r;++i){switch(typeof s[i].since){case"string":n=f(s[i].since).startOf("day"),s[i].since=n.valueOf();break}switch(typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":n=f(s[i].until).startOf("day").valueOf(),s[i].until=n.valueOf();break}}return s},kn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[s];break;case"NNNN":if(r===e)return u[s];break;case"NNNNN":if(o===e)return u[s];break}else if(0<=[r,a,o].indexOf(e))return u[s]},kn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},kn.erasAbbrRegex=function(e){return m(this,"_erasAbbrRegex")||hn.call(this),e?this._erasAbbrRegex:this._erasRegex},kn.erasNameRegex=function(e){return m(this,"_erasNameRegex")||hn.call(this),e?this._erasNameRegex:this._erasRegex},kn.erasNarrowRegex=function(e){return m(this,"_erasNarrowRegex")||hn.call(this),e?this._erasNarrowRegex:this._erasRegex},kn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},kn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Pe.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},kn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=_([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))||-1!==(i=we.call(this._longMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))||-1!==(i=we.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=_([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},kn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=We),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},kn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},kn.week=function(e){return Ae(e,this._week.dow,this._week.doy).week},kn.firstDayOfYear=function(){return this._week.doy},kn.firstDayOfWeek=function(){return this._week.dow},kn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ie(n,this._week.dow):e?n[e.day()]:n},kn.weekdaysMin=function(e){return!0===e?Ie(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},kn.weekdaysShort=function(e){return!0===e?Ie(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},kn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=_([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=_([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},kn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Be),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},kn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},lt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Z(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=n("moment.lang is deprecated. Use moment.locale instead.",lt),f.langData=n("moment.langData is deprecated. Use moment.localeData instead.",dt);var Yn=Math.abs;function On(e,t,n,s){var i=Zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function xn(e){return 4800*e/146097}function Tn(e){return 146097*e/4800}function Nn(e){return function(){return this.as(e)}}var Pn=Nn("ms"),Rn=Nn("s"),Wn=Nn("m"),Cn=Nn("h"),Un=Nn("d"),Hn=Nn("w"),Fn=Nn("M"),Ln=Nn("Q"),Vn=Nn("y");function Gn(e){return function(){return this.isValid()?this._data[e]:NaN}}var En=Gn("milliseconds"),An=Gn("seconds"),jn=Gn("minutes"),In=Gn("hours"),Zn=Gn("days"),zn=Gn("months"),$n=Gn("years");var qn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Jn(e,t,n,s){var i=Zt(e).abs(),r=qn(i.as("s")),a=qn(i.as("m")),o=qn(i.as("h")),u=qn(i.as("d")),l=qn(i.as("M")),h=qn(i.as("w")),d=qn(i.as("y")),c=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(c=c||h<=1&&["w"]||h<n.w&&["ww",h]),(c=c||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,c[3]=0<+e,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}var Qn=Math.abs;function Xn(e){return(0<e)-(e<0)||+e}function Kn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,u=Qn(this._milliseconds)/1e3,l=Qn(this._days),h=Qn(this._months),d=this.asSeconds();return d?(e=I(u/60),t=I(e/60),u%=60,e%=60,n=I(h/12),h%=12,s=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=Xn(this._months)!==Xn(d)?"-":"",a=Xn(this._days)!==Xn(d)?"-":"",o=Xn(this._milliseconds)!==Xn(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(h?r+h+"M":"")+(l?a+l+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+s+"S":"")):"P0D"}var es=Ct.prototype;return es.isValid=function(){return this._isValid},es.abs=function(){var e=this._data;return this._milliseconds=Yn(this._milliseconds),this._days=Yn(this._days),this._months=Yn(this._months),e.milliseconds=Yn(e.milliseconds),e.seconds=Yn(e.seconds),e.minutes=Yn(e.minutes),e.hours=Yn(e.hours),e.months=Yn(e.months),e.years=Yn(e.years),this},es.add=function(e,t){return On(this,e,t,1)},es.subtract=function(e,t){return On(this,e,t,-1)},es.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+xn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Tn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},es.asMilliseconds=Pn,es.asSeconds=Rn,es.asMinutes=Wn,es.asHours=Cn,es.asDays=Un,es.asWeeks=Hn,es.asMonths=Fn,es.asQuarters=Ln,es.asYears=Vn,es.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Z(this._months/12):NaN},es._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*bn(Tn(o)+a),o=a=0),u.milliseconds=r%1e3,e=I(r/1e3),u.seconds=e%60,t=I(e/60),u.minutes=t%60,n=I(t/60),u.hours=n%24,a+=I(n/24),o+=i=I(xn(a)),a-=bn(Tn(i)),s=I(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},es.clone=function(){return Zt(this)},es.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},es.milliseconds=En,es.seconds=An,es.minutes=jn,es.hours=In,es.days=Zn,es.weeks=function(){return I(this.days()/7)},es.months=zn,es.years=$n,es.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=Bn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(r=Object.assign({},Bn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=this.localeData(),s=Jn(this,!i,r,n),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},es.toISOString=Kn,es.toString=Kn,es.toJSON=Kn,es.locale=tn,es.localeData=sn,es.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kn),es.lang=nn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),ce("x",ue),ce("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),ye("x",function(e,t,n){n._d=new Date(Z(e))}),f.version="2.27.0",e=Tt,f.fn=pn,f.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},f.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=_,f.unix=function(e){return Tt(1e3*e)},f.months=function(e,t){return Dn(e,t,"months")},f.isDate=a,f.locale=lt,f.invalid=w,f.duration=Zt,f.isMoment=M,f.weekdays=function(e,t,n){return Sn(e,t,n,"weekdays")},f.parseZone=function(){return Tt.apply(null,arguments).parseZone()},f.localeData=dt,f.isDuration=Ut,f.monthsShort=function(e,t){return Dn(e,t,"monthsShort")},f.weekdaysMin=function(e,t,n){return Sn(e,t,n,"weekdaysMin")},f.defineLocale=ht,f.updateLocale=function(e,t){var n,s,i;return null!=t?(i=st,null!=it[e]&&null!=it[e].parentLocale?it[e].set(b(it[e]._config,t)):(null!=(s=ut(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=it[e],it[e]=n),lt(e)):null!=it[e]&&(null!=it[e].parentLocale?(it[e]=it[e].parentLocale,e===lt()&&lt(e)):null!=it[e]&&delete it[e]),it[e]},f.locales=function(){return s(it)},f.weekdaysShort=function(e,t,n){return Sn(e,t,n,"weekdaysShort")},f.normalizeUnits=V,f.relativeTimeRounding=function(e){return void 0===e?qn:"function"==typeof e&&(qn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},f.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},f.prototype=pn,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f});
//# sourceMappingURL=moment.min.js.map;
define('filters/scheduleFilter',['moment'],(moment) => {
    let now = moment();
    
    
    function isLessThanAWeekAway(day){
        //Must be same year
        if (!isSameYear(day, now)) return false;
        let differenceInDays = getDifferenceInDays(day,now);
        return ( differenceInDays >= 1 && differenceInDays <= 7);       
     };
    
    
    function getDifferenceInDays(dayA, dayB){
       return dayA.dayOfYear() - dayB.dayOfYear();      
    };
    
    
    function isToday(day){
       return ( isSameYear(day, now) && isSameDayOfYear(day, now));
    };
    
    function isTomorrow(day){
       if (!isSameYear(day, now)) return false;       
       return ( getDifferenceInDays(day, now) === 1);
    };
    
    
    function isSameYear(dayA, dayB){
       return dayA.year() === dayB.year();
    };
    
    function isSameDayOfYear(dayA, dayB){
       return dayA.dayOfYear() === dayB.dayOfYear();
    };
    
    
    function formatSameWeek(day){
       if ( isToday(day) ) return `Today ${day.format('h:mm a')}`;
       if ( isTomorrow(day) ) return `Tomorrow ${day.format('h:mm a')}`;
       return day.format('dddd  h:mm a');
    };
    
    
    function isAnotherMonth(day){
       if (! isSameYear(day, now)) return false;
       return (day.month() !== now.month());
    };

    function wasYesterday(day){
        var difference = getDifferenceInDays(day, now);
        return difference === -1;
    }

    /*Expects schedule: {
        date: String,
        time: String
    }*/
    return function(schedule){        
        var day = moment(schedule.date);
        
        var dayString = '',timeString = '';

        /*Formatting the date part*/
        if ( wasYesterday(day) ){
            dayString = 'Yesterday';
        }else if ( isToday(day,now) ){
            dayString = 'Today';
        }else if ( isTomorrow(day, now)){
            dayString = 'Tomorrow';
        }else if ( isLessThanAWeekAway(day, now) ){
            dayString = day.format('dddd');
        }else if( isAnotherMonth(day,now) ){
            dayString = day.format('MMM Do');
        }else if ( isSameYear(day,now) ){
            dayString = day.format('MMM Do');
        }else{
            dayString = day.format('MMM Do YYYY');
        }

        /*Formatting the time part*/
        if(schedule.time){
            var time = moment(schedule.time,'h:mm');
            timeString = time.format('h:mm A');
            timeString = ' at '+timeString;
        }

        return `${dayString} ${timeString}`;
    }
});
define('components/cardScheduleChip',['text!components/templates/cardScheduleChip.html','filters/scheduleFilter','moment'],
(template, scheduleFilter, moment) => {

    function getDifferenceInDays(dayA, dayB){
        if ( dayA.year() <  dayB.year()) return -100;
        return dayA.dayOfYear() - dayB.dayOfYear();      
    };


    return Vue.extend({
        template,
        props: ['card'],
        filters: {
            scheduleFilter
        },
        computed: {
            daysDifference(){
                return getDifferenceInDays(
                    moment(this.card.schedule.date),
                    moment()
                );
            },
            overdue(){
                return (this.daysDifference < 0);
            }
        }
    });
});
define('components/cardChips',['text!components/templates/cardChips.html','components/cardChecklistChip','components/cardDescriptionChip',
'components/cardArchiveChip','components/cardScheduleChip'],
(template, cardChecklistChip, cardDescriptionChip, cardArchiveChip, cardScheduleChip) => {
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            cardChecklistChip,
            cardDescriptionChip,
            cardArchiveChip,
            cardScheduleChip
        }
    });
});

define('text!components/templates/openCard.html',[],function () { return '<div class="open-card" style="position: absolute;">\r\n    <div @click="close()">\r\n        <v-overlay ref="overlay" :z-index="1"></v-overlay>\r\n    </div>\r\n\r\n    <div style="z-index: 5;position: relative;" class="d-flex align-start">\r\n        <open-card-edit \r\n            @close="close()" \r\n            :card="card"\r\n        ></open-card-edit>\r\n        \r\n        <div class="ml-2">\r\n            <edit-card-labels class="mt-1" :card="card"></edit-card-labels>\r\n            <v-btn class="btn-dark mt-1">\r\n                <v-icon left dense>mdi-account-outline</v-icon>\r\n                Change Members\r\n            </v-btn>\r\n            <move-card @move="close()" :card="card"></move-card>\r\n            <copy-card :card="card"></copy-card>\r\n            <edit-card-schedule :card="card"></edit-card-schedule>\r\n            <v-btn @click="archive().close()" class="btn-dark mt-1">\r\n                <v-icon left dense>mdi-archive</v-icon>\r\n                Archive\r\n            </v-btn>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!components/templates/openCardEdit.html',[],function () { return '<section class="d-flex flex-column" style="width: 100%; flex-shrink: 0;max-width: 300px;">\r\n\r\n    <div class="d-flex flex-column white rounded">\r\n        <card-label-chips class="px-3" :card="card"></card-label-chips>\r\n        <edit-card-title\r\n            style="width: 100%; flex-shrink: 0;"\r\n            :card="card"\r\n            @save="saveCard()"\r\n            ref="editTitle"\r\n        ></edit-card-title>\r\n        <card-chips class="pa-3 py-1" :card="card"></card-chips>\r\n    </div>\r\n\r\n    <div class="d-flex align-center mt-3">\r\n        <v-btn @click="saveCard" color="green" class="white--text">Save</v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n</section>';});


define('text!components/templates/editCardTitle.html',[],function () { return '<v-form @submit.prevent="saveCard" elevation="0">\r\n    <v-textarea\r\n        elevation="0"\r\n        @keydown="handleKeyDown"\r\n        background-color="white"\r\n        solo\r\n        flat\r\n        rows="4"\r\n        autofocus\r\n        v-model="title"\r\n        :hide-details="true"\r\n    ></v-textarea>\r\n</v-form>';});

define('components/editCardTitle',['text!components/templates/editCardTitle.html'],
(template) => {
    let isEmpty = (val) => !(/\S/.test(val));
    let isEnterKey = (event) => event.key === 'Enter';

    return Vue.extend({
        template,
        props: ['card'],
        watch: {
            card(newCard){
                this.title = newCard.title;
            }
        },
        data() {
            return {
                title: ''
            }
        },
        methods: {
            saveCard(){
                this.$emit('save');
            },
            handleKeyDown(evt){
                /*--Pressing the enter key submits the card for adding--*/
                if ( isEnterKey(evt) ) { 
                    evt.preventDefault();
                    this.saveCard();
                };
                return true;
            }
        },
        created() {
            this.title = this.card.title;
        }
    });
});
define('components/openCardEdit',['text!components/templates/openCardEdit.html','components/editCardTitle','components/cardLabelChips','components/cardChips','store/index'],
(template, editCardTitle, cardLabelChips, cardChips, store) => {
    let isEmpty = (val) => !(/\S/.test(val));
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            editCardTitle,
            cardLabelChips,
            cardChips
        },
        methods: {
            close(){
                this.$emit('close');
            },
            saveCard(){
                this.dispatchToStore();
                this.$emit('close');
            },
            dispatchToStore(){
                if (isEmpty(this.title)) return;
                let card = Object.assign({}, this.card);
                card.title = this.$refs.editTitle.title;
                store.dispatch('cards/update', card);
            }
        },
    })
});

define('text!components/templates/editCardSchedule.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-y\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot>\r\n            <v-btn class="btn-dark mt-1" v-on="on">\r\n                <v-icon left dense>mdi-clock</v-icon>\r\n                Change Due Date\r\n            </v-btn>\r\n        </slot>\r\n    </template>\r\n    <v-card width="300"> \r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>Change Due Date</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close()" icon>\r\n                <v-icon size="20">mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="d-flex flex-column pa-2">\r\n            <v-date-picker\r\n                color="green"\r\n                v-model="date"\r\n            ></v-date-picker>\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions class="pa-2">\r\n            <v-btn \r\n                @click="scheduleCard()"\r\n                color="green white--text"\r\n                class="text-none"\r\n                elevation="0"\r\n            >Save</v-btn>\r\n            <v-spacer></v-spacer>\r\n            <v-btn \r\n                @click="removeCardSchedule()"\r\n                color="red darken-4 white--text"\r\n                class="text-none"\r\n                elevation="0"\r\n            >Remove</v-btn>\r\n        </v-card-actions>\r\n    </v-card>\r\n</v-menu>';});

define('components/editCardSchedule',['text!components/templates/editCardSchedule.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        mixins: [openAndClose],
        data() {
            return {
                date: (this.card.schedule) ? this.card.schedule.date : new Date().toISOString().substr(0, 10)
            }
        },
        methods: {
            scheduleCard(){
                store.dispatch('cards/addSchedule', {
                    cardID: this.card.id,
                    date: this.date,
                    time: null
                });
                this.close();
            },
            removeCardSchedule(){
                store.dispatch('cards/removeSchedule', this.card.id);
                this.close();
            }
        },
    })
});

define('text!components/templates/copyCard.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot>\r\n            <v-btn class="btn-dark mt-1" v-on="on">\r\n                <v-icon left dense>mdi-content-copy</v-icon>\r\n                Copy\r\n            </v-btn>\r\n        </slot>\r\n    </template>\r\n    <v-form @submit.prevent="copyCard()">\r\n        <v-card width="300">\r\n            <v-card-title class="pa-2">\r\n                <v-spacer></v-spacer>\r\n                <small>Copy Card</small>\r\n                <v-spacer></v-spacer>\r\n                <v-btn\r\n                    icon\r\n                    small\r\n                    @click="close()"\r\n                >\r\n                    <v-icon>mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text class="pa-2">\r\n                <v-textarea \r\n                    label="Title" \r\n                    disabled \r\n                    dense \r\n                    filled\r\n                    rows="3"\r\n                    v-model="card.title"\r\n                ></v-textarea>\r\n\r\n                <h4 class="text-uppercase">Copy to..</h4>\r\n                <v-container class="pa-0 ma-0">\r\n                    <v-row>\r\n                        <v-col md="12">\r\n                            <v-select\r\n                                @change="updateList"\r\n                                dense \r\n                                :hide-details="true" \r\n                                label="Board" \r\n                                filled\r\n                                :items="boards"\r\n                                item-text="title"\r\n                                item-value="id"\r\n                                v-model="boardID"\r\n                            ></v-select>\r\n                        </v-col>\r\n                        <v-col md="8">\r\n                            <v-select\r\n                                @change="updatePosition"\r\n                                dense \r\n                                :hide-details="true" \r\n                                label="List" \r\n                                filled\r\n                                :items="lists"\r\n                                item-text="title"\r\n                                item-value="id"\r\n                                v-model="listID"\r\n                            ></v-select>\r\n                        </v-col>\r\n                        <v-col md="4">\r\n                            <v-select\r\n                                dense \r\n                                :hide-details="true" \r\n                                label="Position" \r\n                                filled\r\n                                :items="positions"\r\n                                item-text="count"\r\n                                item-value="index"\r\n                                v-model="index"\r\n                            ></v-select>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-container>\r\n            </v-card-text>\r\n            <v-card-actions class="pa-2">\r\n                <v-btn color="green" class="white--text text-none" @click="copyCard()" elevation="0">\r\n                    Create Card\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-menu>';});

define('components/copyCard',['text!components/templates/copyCard.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        mixins: [openAndClose],
        data() {
            return {
                boardID: null,
                listID: null,
                index: 0
            }
        },
        computed: {
            boards(){
                return store.getters['boards/getAll'];
            },
            lists(){
                return store.getters['lists/getAll'].filter(l => l.boardID === this.boardID);
            },
            positions(){
                let positions = [];
                let cards = store.getters['cards/getAll'].filter(c => c.listID === this.listID);
                cards.forEach((card, index) => {
                    positions.push({
                        count: index+1,
                        index
                    });
                });

                /*--We only allow a card to be appended to another list i.e Other than the current one--*/
                if (this.card.listID !== this.listID){
                    positions.push({
                        count: cards.length + 1,
                        index: cards.length
                    });
                };
                return positions;
            }
        },
        methods: {
            copyCard(){
                if (!this.isValid()) return;
                this.dispatchToStore();
                this.close();
            },
            dispatchToStore(){
                let card = Object.assign({}, this.card);
                card.boardID = this.boardID;
                card.listID = this.listID;
                card.index = this.index;
                store.dispatch('cards/create', card);
            },
            isValid(){
                return this.lists.length > 0;
            },
            updateList(){
                /*--Select the first list when switching boards--*/
                if (this.lists.length > 0){
                    this.listID = this.lists[0].id;
                }
            },
            updatePosition(){
                /*--
                    Select the first position 
                    when switching from lists 
                    where the last selected position was higher
                    than this one has
                --*/
                if (this.index > this.positions.length - 1)
                this.index = this.positions[0].index;
            },
            initData(){
                this.boardID = this.card.boardID;
                this.listID = this.card.listID;
                this.index = this.card.index || 0;
            }
        },
        created() {
            this.initData();
        },
    });
});

define('text!components/templates/moveCard.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot>\r\n            <v-btn class="btn-dark mt-1" v-on="on">\r\n                <v-icon left dense>mdi-arrow-right</v-icon>\r\n                Move\r\n            </v-btn>\r\n        </slot>\r\n    </template>\r\n    <v-form @submit.prevent="moveCard">\r\n        <v-card width="300">\r\n            <v-card-title class="pa-2">\r\n                <v-spacer></v-spacer>\r\n                <small>Move Card</small>\r\n                <v-spacer></v-spacer>\r\n                <v-btn\r\n                    icon\r\n                    small\r\n                    @click="close()"\r\n                >\r\n                    <v-icon>mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text class="pa-2">\r\n                <h4 class="text-uppercase">Select destination</h4>\r\n                <v-container class="pa-0 ma-0">\r\n                    <v-row>\r\n                        <v-col md="12">\r\n                            <v-select\r\n                                @change="updateList"\r\n                                dense \r\n                                :hide-details="true" \r\n                                label="Board" \r\n                                filled\r\n                                :items="boards"\r\n                                item-text="title"\r\n                                item-value="id"\r\n                                v-model="boardID"\r\n                            ></v-select>\r\n                        </v-col>\r\n                        <v-col md="8">\r\n                            <v-select\r\n                                @change="updatePosition"\r\n                                dense \r\n                                :hide-details="true" \r\n                                label="List" \r\n                                filled\r\n                                :items="lists"\r\n                                item-text="title"\r\n                                item-value="id"\r\n                                v-model="listID"\r\n                            ></v-select>\r\n                        </v-col>\r\n                        <v-col md="4">\r\n                            <v-select\r\n                                dense \r\n                                :hide-details="true" \r\n                                label="Position" \r\n                                filled\r\n                                :items="positions"\r\n                                item-text="count"\r\n                                item-value="index"\r\n                                v-model="index"\r\n                            ></v-select>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-container>\r\n                    \r\n            </v-card-text>\r\n            <v-card-actions class="pa-2">\r\n                <v-btn color="green" class="white--text text-none" @click="moveCard" elevation="0">\r\n                    Move\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-menu>';});

define('components/moveCard',['text!components/templates/moveCard.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        mixins: [openAndClose],
        watch: {
            card(){
                this.initData();
            }
        },
        data() {
            return {
                boardID: null,
                listID: null,
                index: 0
            }
        },
        computed: {
            boards(){
                return store.getters['boards/getAll'];
            },
            lists(){
                return store.getters['lists/getAll'].filter(l => l.boardID === this.boardID);
            },
            positions(){
                let positions = [];
                let cards = store.getters['cards/getAll'].filter(c => c.listID === this.listID);
                cards.forEach((card, index) => {
                    positions.push({
                        count: index+1,
                        index
                    });
                });

                /*--We only allow a card to be appended to another list i.e Other than the current one--*/
                if (this.card.listID !== this.listID){
                    positions.push({
                        count: cards.length + 1,
                        index: cards.length
                    });
                };
                return positions;
            }
        },
        methods: {
            moveCard(){
                if (!this.isValid()) return;
                this.dispatchToStore();
                this.$emit('close');
            },
            dispatchToStore(){
                let card = Object.assign({}, this.card);
                card.boardID = this.boardID;
                card.listID = this.listID;
                card.index = this.index;
                store.dispatch('cards/move', card);
            },
            isValid(){
                return this.lists.length > 0;
            },
            updateList(){
                /*--Select the first list when switching boards--*/
                if (this.lists.length > 0){
                    this.listID = this.lists[0].id;
                }
            },
            updatePosition(){
                /*--
                    Select the first position 
                    when switching from lists 
                    where the last selected position was higher
                    than this one has
                --*/
                if (this.index > this.positions.length - 1)
                this.index = this.positions[0].index;
            },
            initData(){
                this.boardID = this.card.boardID;
                this.listID = this.card.listID;
                this.index = this.card.index || 0;
            }
        },
        created() {
            this.initData();
        },
    });
});
define('components/openCard',['text!components/templates/openCard.html','components/openCardEdit','components/editCardLabels','components/editCardSchedule','components/copyCard','components/moveCard','store/index'],
(template, openCardEdit, editCardLabels, editCardSchedule, copyCard, moveCard, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            openCardEdit,
            editCardLabels,
            editCardSchedule,
            copyCard,
            moveCard
        },
        methods: {
            close(){
                this.$emit('close');
            },
            archive(){
                store.dispatch('cards/archive', this.card);
                return this;
            }
        },
    })
});
define('components/card',['text!components/templates/card.html','mixins/openAndClose','components/cardChips','components/cardLabelChips','components/openCard'],
(template, openAndClose, cardChips, cardLabelChips, openCard) => {
    return Vue.extend({
        template,
        props: {
            card: {
                required: true
            },
            editable: {
                required: false,
                default: true
            }
        },
        mixins: [openAndClose],
        components:{
            cardChips,
            openCard,
            cardLabelChips
        }
    });
});
define('helpers/dndUtils',[],
    () => {
    
        const applyDrag = (arr, dragResult) => {
            const { removedIndex, addedIndex, payload } = dragResult
            if (removedIndex === null && addedIndex === null) return arr
          
            const result = [...arr];
            let itemToAdd = payload
          
            if (removedIndex !== null) {
              itemToAdd = result.splice(removedIndex, 1)[0]
            }
          
            if (addedIndex !== null) {
              result.splice(addedIndex, 0, itemToAdd)
            }
          
            return result
        }
          
        const generateItems = (count, creator) => {
            const result = []
            for (let i = 0; i < count; i++) {
              result.push(creator(i))
            }
            return result
        }
        
        return { generateItems, applyDrag}
    });
define('commands/bulkBoardSave',['store/index'], (store) => {

    return {
        execute
    };

    function execute(board){
        let lists = board.lists;
        getCards(lists).forEach(card => {
            saveCard(card);
        });
    };

    function getCards(lists){
        let cards = [];
        lists.forEach(list => {
            list.cards.forEach((card, index) => {
                cards.push( Object.assign({}, card) );
            });
        });
        return cards;
    };

    function cardHasChanged(updatedCard){
        let initialCard = store.getters['cards/getAll'].find(c => c.id === updatedCard.id);
        console.log(updatedCard.listID, initialCard.listID);
        return false;
        // return (cardInStore.index !== card.index) || (cardInStore.listID !== card.listID);
    };

    function getCard(cardID){
        return store.getters['cards/getAll'].find(c => c.id === cardID);
    };
    
    function saveCard(card){
        store.dispatch('cards/update', card);
    };
});
define('components/boardBody',['text!components/templates/boardBody.html','components/createList','components/list',
'components/card','store/index','helpers/dndUtils','observers/global','commands/bulkBoardSave'],
(template, createList, list, card, store, utils, observer, bulkBoardSave) => {
    let { applyDrag } = utils;

    function getLists(boardID){
        return store.getters['lists/getAll'].filter(l => l.boardID === boardID && !l.archived).map(x => {
            x.cards = getCards(x.id);
            return x;
        }).sort((a, b) => a.index - b.index);
    };

    function getCards(listID){
        return store.getters['cards/getAll'].filter(c => c.listID === listID && !c.archived)
        .sort((a, b) => a.index - b.index);
    };

    return Vue.extend({
        template,
        components: {
            createList,
            list,
            card
        },
        props: ['board'],
        data() {
            return {
                lists: [],
                /*--We can only drag sroll when a card or list is not being moved (by dragging)--*/
                dragging: false
            }
        },
        computed: {
            listPlaceholder(){
                return {
                    className: 'list-placeholder',
                    showOnTop: true
                }
            },
            cardPlaceholder(){
                return {
                    className: 'card-placeholder',
                    showOnTop: true
                }
            }
        },
        methods: {
            /**List methods-- */
            handleListDrop(dropResult){
                this.lists = applyDrag(this.lists, dropResult);   
                this.saveListOrder();
            },
            saveListOrder(){
                this.lists.forEach((list, index) => {
                    list.index = index;
                    store.dispatch('lists/update', list);
                });
            },
            
            load(){
                let self = this;
                self.loadLists();
                setTimeout(() => {
                    self.loadLists();
                }, 50);
                setTimeout(() => {
                    self.loadLists();
                }, 100);
                setTimeout(() => {
                    self.loadLists();
                }, 150);
            },

            clearLists(){
                this.lists = [];
            },

            loadLists(){
                this.lists = getLists(this.board.id);
            },

            /**--Card methods */
            handleCardDrop(listID, dropResult){                
                /**--Get list and apply drag--*/
                let list = this.lists.find(l => l.id === listID);
                list.cards = applyDrag(list.cards, dropResult);

                /**--Update the model--*/
                // Vue.set(this.lists, this.lists.indexOf(list), list);
                this.saveCardOrder();

            },

            saveCardOrder(){
                /*--Offload the saving of the board--*/
                this.lists.forEach(list => {
                    list.cards.forEach((card, index) => {
                        card.index = index;
                        card.listID = list.id;
                    });
                });

                bulkBoardSave.execute({lists: this.lists });
            },

            handleEvents(){
                let self = this;
                observer.$on('list/create', () => {
                    self.loadLists();
                    self.saveListOrder();
                });

                observer.$on('list/move', () => {
                    self.loadLists();
                    self.saveListOrder();
                });

                observer.$on('list/archiveUpdate', () => {
                    self.loadLists();
                    self.saveListOrder();
                });
                
                observer.$on('card/create', () => {
                    self.loadLists();
                    self.saveCardOrder();
                });

                observer.$on('card/archiveUpdate', () => {
                    self.loadLists();
                    self.saveListOrder();
                });

                observer.$on('card/move', () => {
                    self.loadLists();
                    self.saveCardOrder();
                });

                observer.$on('board/load', () => {
                    self.loadLists();
                    self.saveCardOrder();
                });
            }
        },
        created() {
            this.handleEvents();
        }
    });
});

define('text!components/templates/boardMenu.html',[],function () { return '<v-card\r\n    class="board-menu rounded-0"\r\n    width="350"\r\n    height="100%"\r\n    :class="{\'board-menu--hidden\': !opened}"\r\n>\r\n    <v-navigation-drawer\r\n        color="grey lighten-5"\r\n        permanent\r\n        right\r\n        width="100%"\r\n    >\r\n        <v-window v-model="window" class="fill-height">\r\n            <!--Default window-->\r\n            <v-window-item class="fill-height">\r\n                    <v-card-title class="pa-2">\r\n                        <v-spacer></v-spacer>\r\n                        <small>Menu</small>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn small icon @click="close()">\r\n                            <v-icon>mdi-close</v-icon>\r\n                        </v-btn>\r\n                    </v-card-title>\r\n                    <v-divider></v-divider>\r\n                    <v-card-text class="pa-2">\r\n                        <v-list-item link @click="window = 1">\r\n                            <v-list-item-action>\r\n                                <v-icon>mdi-credit-card-multiple</v-icon>\r\n                            </v-list-item-action>\r\n                            <v-list-item-content>\r\n                                <v-list-item-title>About This Board</v-list-item-title>\r\n                                <v-list-item-subtitle>Describe your board.</v-list-item-subtitle>\r\n                            </v-list-item-content>\r\n                        </v-list-item>\r\n                        <v-list-item link @click="window = 2">\r\n                            <v-list-item-action>\r\n                                <div class="rounded-md" :style="\'width: 24px;height: 24px;background: \'+board.background"></div>\r\n                            </v-list-item-action>\r\n                            <v-list-item-content>\r\n                                <v-list-item-title>Change Background</v-list-item-title>\r\n                            </v-list-item-content>\r\n                        </v-list-item>\r\n                        <v-list-item link @click="window = 3">\r\n                            <v-list-item-action>\r\n                                <v-icon>mdi-magnify</v-icon>\r\n                            </v-list-item-action>\r\n                            <v-list-item-content>\r\n                                <v-list-item-title>Search Cards</v-list-item-title>\r\n                            </v-list-item-content>\r\n                        </v-list-item>\r\n                        <v-list-item link @click="window = 4">\r\n                            <v-list-item-action>\r\n                                <v-icon>mdi-label-outline</v-icon>\r\n                            </v-list-item-action>\r\n                            <v-list-item-content>\r\n                                <v-list-item-title>Labels</v-list-item-title>\r\n                            </v-list-item-content>\r\n                        </v-list-item>\r\n                        <v-list-item link @click="window = 5">\r\n                            <v-list-item-action>\r\n                                <v-icon>mdi-archive</v-icon>\r\n                            </v-list-item-action>\r\n                            <v-list-item-content>\r\n                                <v-list-item-title>Archived Items</v-list-item-title>\r\n                            </v-list-item-content>\r\n                        </v-list-item>\r\n                        <close-board :board="board"></close-board>\r\n                    </v-card-text>\r\n            </v-window-item>\r\n\r\n            <!--Board about item-->\r\n            <v-window-item class="fill-height">\r\n                <v-card-title class="pa-2">\r\n                    <v-btn small icon @click="window = 0">\r\n                        <v-icon>mdi-arrow-left</v-icon>\r\n                    </v-btn>\r\n                    <v-spacer></v-spacer>\r\n                    <small>About This Board</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn small icon @click="close()">\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n                <v-divider></v-divider>\r\n                <about-board :board="board"></about-board>\r\n            </v-window-item>\r\n\r\n            <!--Change background board-->\r\n            <v-window-item class="fill-height">\r\n                <v-card-title class="pa-2">\r\n                    <v-btn small icon @click="window = 0">\r\n                        <v-icon>mdi-arrow-left</v-icon>\r\n                    </v-btn>\r\n                    <v-spacer></v-spacer>\r\n                    <small>Change Background</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn small icon @click="close()">\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n                <v-divider></v-divider>\r\n                <change-board-background :board="board"></change-board-background>\r\n            </v-window-item>\r\n            \r\n            <!--Search for cards-->\r\n            <v-window-item class="fill-height">\r\n                <v-card-title class="pa-2">\r\n                    <v-btn small icon @click="window = 0">\r\n                        <v-icon>mdi-arrow-left</v-icon>\r\n                    </v-btn>\r\n                    <v-spacer></v-spacer>\r\n                    <small>Search Cards</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn small icon @click="close()">\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n                <v-divider></v-divider>\r\n                <search-cards :board="board"></search-cards>\r\n            </v-window-item>\r\n\r\n            <!--Labels-->\r\n            <v-window-item class="fill-height">\r\n                <v-card-title class="pa-2">\r\n                    <v-btn small icon @click="window = 0">\r\n                        <v-icon>mdi-arrow-left</v-icon>\r\n                    </v-btn>\r\n                    <v-spacer></v-spacer>\r\n                    <small>Labels</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn small icon @click="close()">\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n                <v-divider></v-divider>\r\n                <board-labels :board="board"></board-labels>\r\n            </v-window-item>\r\n            \r\n            <!--Archived Items-->\r\n            <v-window-item class="fill-height">\r\n                <v-card-title class="pa-2">\r\n                    <v-btn small icon @click="window = 0">\r\n                        <v-icon>mdi-arrow-left</v-icon>\r\n                    </v-btn>\r\n                    <v-spacer></v-spacer>\r\n                    <small>Archive</small>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn small icon @click="close()">\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                </v-card-title>\r\n                <v-divider></v-divider>\r\n                <board-archive :board="board"></board-archive>\r\n            </v-window-item>\r\n        </v-window>\r\n    </v-navigation-drawer>\r\n</v-card>';});


define('text!components/templates/aboutBoard.html',[],function () { return '<div class="pa-2">\r\n    <section>\r\n        <div class="d-flex align-center ml-4">\r\n            <v-icon>mdi-account-outline</v-icon>\r\n            <b class="ml-2 font-weight-regular">Made By</b>\r\n        </div>\r\n        <v-list-item>\r\n            <v-list-item-action>\r\n                <v-avatar size="50" color="grey lighten-2 ml-1 cursor-pointer">\r\n                    <span class="black--text">GE</span>\r\n                </v-avatar>\r\n            </v-list-item-action>\r\n            <v-list-item-content>\r\n                <v-list-item-title>Guest</v-list-item-title>\r\n                <v-list-item-subtitle>guest@example.com</v-list-item-subtitle>\r\n            </v-list-item-content>\r\n        </v-list-item>\r\n    </section>\r\n    \r\n    <board-description :board="board"></board-description>\r\n</div>';});


define('text!components/templates/boardDescription.html',[],function () { return '<div>\r\n    <v-list-item>\r\n        <v-icon>mdi-view-headline</v-icon>\r\n        <v-list-item-title class="ml-2">Description</v-list-item-title>\r\n    </v-list-item>\r\n\r\n    <div class="cursor-pointer grey lighten-4 pa-3 text-body-2" @click="open()" v-show="!opened">\r\n        <p v-if="hasDescription">\r\n            {{ board.description }}\r\n        </p>\r\n        <p v-else>\r\n            What is this board about?What is your board is used for?.Click to add a description\r\n        </p>\r\n    </div>\r\n    <edit-board-description @close="close()" :board="board" v-show="opened"></edit-board-description>\r\n</div>';});


define('text!components/templates/editBoardDescription.html',[],function () { return '<v-form\r\n    class="text-body-2"\r\n    @submit.prevent="saveDescription()"\r\n>\r\n    <v-textarea\r\n        placeholder="Add a description to this board"\r\n        autofocus\r\n        class="text-body-2"\r\n        rows="2"\r\n        solo\r\n        hide-details="auto"\r\n        v-model="description"\r\n    ></v-textarea>\r\n    <div class="d-flex align-center py-2">\r\n        <v-btn\r\n            @click="saveDescription()"\r\n            color="green"\r\n            class="white--text"\r\n        >Save</v-btn>\r\n        <v-btn icon @click="$emit(\'close\')">\r\n            <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n</v-form>';});

define('components/editBoardDescription',['text!components/templates/editBoardDescription.html','store/index'],
(template, store) => {
    return Vue.extend({
        template,
        props: ['board'],
        data() {
            return {
                description: ''
            }
        },
        watch: {
            board(){
                this.loadDescription();
            }
        },
        methods: {
            saveDescription(){
                this.dispatchToStore();
                this.$emit('close');
            },
            dispatchToStore(){
                let board = Object.assign({}, this.board);
                board.description = this.description;
                store.dispatch('boards/update', board);
            },
            loadDescription(){
                this.description = this.board.description;
            }
        },
        created() {
            this.loadDescription();
        },
    });
});
define('components/boardDescription',['text!components/templates/boardDescription.html','mixins/openAndClose','components/editBoardDescription'],
(template, openAndClose, editBoardDescription) => {
    let isEmpty = (val) => !(/\S/.test(val));
    let isUndefined = (val) => (typeof val === 'undefined');

    return Vue.extend({
        template,
        props: ['board'],
        mixins: [openAndClose],
        computed: {
            hasDescription(){
                /*--A description exists if it is neither empty nor undefined*/
                return !isEmpty(this.board.description) && !isUndefined(this.board.description);
            }
        },
        components : {
            editBoardDescription
        }
    })
});
define('components/aboutBoard',['text!components/templates/aboutBoard.html','components/boardDescription'],
(template, boardDescription) => {
    return Vue.extend({
        template,
        props: ['board'],
        components: {
            boardDescription
        }
    });
});

define('text!components/templates/changeBoardBackground.html',[],function () { return '<div class="d-flex pl-2">\r\n    <v-container>\r\n        <v-row>\r\n            <v-col \r\n                v-for="color in colors" \r\n                md="6" \r\n                class="pa-1"\r\n            >\r\n                <div\r\n                    @click="setBackground(color)"\r\n                    class="rounded-lg cursor-pointer d-flex align-center justify-center" \r\n                    :style="\'height: 100px;background: \'+color.value" v-ripple\r\n                >\r\n                    <v-icon v-if="isBackground(color)" color="white" large>mdi-check</v-icon>\r\n                </div>\r\n            </v-col>\r\n        </v-row>\r\n    </v-container>\r\n</div>';});

define('components/changeBoardBackground',['text!components/templates/changeBoardBackground.html','model/jsonLoader','store/index'],
(template, jsonLoader, store) => {
    return Vue.extend({
        template,
        props: ['board'],
        data() {
            return {
                colors: []
            }
        },
        methods: {
            loadColors(){
                let self = this;
                jsonLoader.load('board/colors').then(colors => {
                    self.colors = colors;
                }).catch(console.log);
            },
            setBackground(color){
                this.dispatchToStore( color );
            },
            dispatchToStore(color){
                let board = Object.assign({}, this.board);
                board.background = color.value;
                store.dispatch('boards/update', board);
            },
            isBackground(color){
                return (this.board.background === color.value);
            }
        },
        created() {
            this.loadColors();
        },
    });
});

define('text!components/templates/searchCards.html',[],function () { return '<section class="d-flex flex-column pa-4">\r\n    <div class="d-flex flex-column">\r\n        <v-text-field\r\n            autofocus\r\n            solo\r\n            dense\r\n            v-model="keyword"\r\n            hide-details="false"\r\n            clearable\r\n        ></v-text-field>\r\n        <p class="mt-2">Type to search by term</p>\r\n    </div>\r\n\r\n    <div v-show="cards.length < 1">\r\n        <div class="d-flex flex-column">\r\n            <div @click="searchByLabel(label)" class="d-flex align-center cursor-pointer py-2" v-for="label in labels" v-ripple>\r\n                <div class="rounded " :style="\'width: 24px;height: 24px;background: \'+label.color"></div>\r\n                <p class="ml-3 my-0">{{ label.name || \'Unnamed\' }}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="d-flex flex-column" v-if="cards.length > 0">\r\n        <card class="mb-2" v-for="card in cards" :editable="false" :card="card"></card>\r\n        <v-btn \r\n            @click="clearSearch()"\r\n            elevation="0" \r\n            class="btn-custom-grey">\r\n            Clear search\r\n        </v-btn>\r\n    </div>\r\n\r\n    <section v-if="showingNoResultsPrompt" class="w-100" style="height: 200px">\r\n        <div class="d-flex flex-column align-center text-center justify-center fill-height">\r\n            <v-icon size="40">mdi-magnify</v-icon>\r\n            <p class="mt-2">No cards match that term</p>\r\n        </div>\r\n    </section>\r\n</section>';});

define('components/searchCards',['text!components/templates/searchCards.html','components/card','fuse','store/index'],
(template, card, Fuse, store) => {

    function cardHasLabel(cardID, labelID){
        return store.getters['cardLabels/getAll'].find(c => c.cardID === cardID && c.labelID === labelID);
    };

    return Vue.extend({
        template,
        props: ['board'],
        watch: {
            keyword(){
                this.updateSearchByTerm();
            }
        },
        components: {
            card
        },
        data() {
            return {
                keyword: '',
                cards: []
            }
        },
        computed: {
            allCards(){
                return store.getters['cards/getAll'].filter(c => c.boardID === this.board.id);
            },
            labels(){
                return store.getters['labels/getAll'].filter(l => l.boardID === this.board.id);
            },
            showingNoResultsPrompt(){
                return (this.cards.length < 1 && this.keyword.length >= 1); 
            }
        },
        methods: {
            clearSearch(){
                this.cards = [];
                this.keyword = '';
            },
            searchByLabel(label){
                this.cards = this.allCards.filter(card => {
                    return cardHasLabel(card.id, label.id);
                });
            },
            updateSearchByTerm(){
                this.cards = this.fuseSearch( this.allCards, ['title']);
            },
            fuseSearch(list, keys = ['title']){
                let options = {keys};
                let fuse = new Fuse(list, options);
                return fuse.search(`=${this.keyword}`).map(r => r.item);
            }
        },
    });
});

define('text!components/templates/boardArchive.html',[],function () { return '<section class="d-flex flex-column pt-3">\r\n    <search-archive \r\n        @start="searching = true"\r\n        @end="searching = false"\r\n        class="px-3" \r\n        :board="board"\r\n        :showingList="showingList"\r\n        @toggleShowingList="toggleShowingList()"\r\n    ></search-archive>\r\n\r\n    <section v-show="!searching">\r\n        <archive-body \r\n            class="px-3" \r\n            :board="board"\r\n            :showingList="showingList"\r\n        ></archive-body>\r\n    </section>\r\n</section>';});


define('text!components/templates/archiveBody.html',[],function () { return '<div class="d-flex flex-column">\r\n    <div>\r\n        <archived-lists :lists="lists" v-if="showingList"></archived-lists>\r\n        <archived-cards :cards="cards" v-else></archived-cards>\r\n    </div>\r\n</div>';});


define('text!components/templates/archivedCards.html',[],function () { return '        <div class="d-flex flex-column pl-5">\r\n            <div class="d-flex flex-column" v-for="card in cards" :key="card.id">\r\n                <card \r\n                    :card="card" \r\n                    class="mt-3"\r\n                    :editable="false"\r\n                ></card>\r\n                <div class="d-flex align-center mt-2">\r\n                    <small @click="unarchiveCard(card)" class="cursor-pointer mr-2 grey--text text--darken-3">\r\n                        <u>Send to board</u>\r\n                    </small>\r\n                    <small @click="deleteCard(card)" class="cursor-pointer grey--text text--darken-3">\r\n                        <u>Delete</u>\r\n                    </small>\r\n                </div>\r\n            </div>\r\n            <section v-if="cards.length <= 0" class="w-100" style="height: 200px">\r\n                <div class="d-flex flex-column align-center text-center justify-center fill-height">\r\n                    <v-icon size="40">mdi-credit-card</v-icon>\r\n                    <p class="mt-2">No cards have been archived.</p>\r\n                </div>\r\n            </section>\r\n        </div>';});

define('components/archivedCards',['text!components/templates/archivedCards.html','components/card','store/index'],
(template, card, store) => {
    return Vue.extend({
        template,
        props: ['cards'],
        components: {
            card
        },
        methods: {
            unarchiveCard(card){
                store.dispatch('cards/unarchive', card);
                this.$emit('update');
            },
            deleteCard(card){
                store.dispatch('cards/delete', card.id);
                this.$emit('update');
            }
        },
    });
});

define('text!components/templates/archivedlists.html',[],function () { return '<div class="d-flex flex-column">\r\n    <v-list-item class="d-flex px-0" v-for="list in lists" link>\r\n        <p class="my-0">{{ list.title }}</p>\r\n        <v-spacer></v-spacer>\r\n        <v-btn\r\n            @click="unarchiveList(list)"\r\n            elevation="0"\r\n            class="btn-custom-grey"\r\n        >\r\n            <v-icon left dense>mdi-reload</v-icon>\r\n            Send to Board\r\n        </v-btn>\r\n    </v-list-item>\r\n    <section v-if="lists.length <= 0" class="w-100" style="height: 200px">\r\n        <div class="d-flex flex-column align-center text-center justify-center fill-height">\r\n            <v-icon size="40">mdi-archive</v-icon>\r\n            <p class="mt-2">No lists have been archived.</p>\r\n        </div>\r\n    </section>\r\n</div>';});

define('components/archivedLists',['text!components/templates/archivedlists.html','store/index'],
(template, store) => {
    return Vue.extend({
        template,
        props: ['lists'],
        methods: {
            unarchiveList(list){
                store.dispatch('lists/unarchive', list);
                this.$emit('update');
            },
        },
    });
});
define('components/archiveBody',['text!components/templates/archiveBody.html','components/archivedCards','components/archivedLists','store/index'],
(template, archivedCards, archivedLists, store) => {
    return Vue.extend({
        template,
        props: ['board','showingList'],
        components: {
            archivedCards,
            archivedLists
        },
        computed: {
            lists(){
                return store.getters['lists/getAll'].filter(l => l.boardID === this.board.id && l.archived);
            },
            cards(){
                return store.getters['cards/getAll'].filter(c => c.boardID === this.board.id && c.archived);
            }
        }
    })
});

define('text!components/templates/searchArchive.html',[],function () { return '<section>\r\n    <div class="d-flex align-start">\r\n        <v-text-field \r\n            placeholder="Search archive..."\r\n            solo\r\n            dense\r\n            :show-details="false"\r\n            v-model="keyword"\r\n            clearable\r\n            @input="emitEvents()"\r\n            @click:clear="clearKeyword().emitEvents()"\r\n        ></v-text-field>\r\n        <v-btn \r\n            class="btn-custom-grey ml-2 mt-0"\r\n            @click="$emit(\'toggleShowingList\')"\r\n            elevation="0"\r\n            v-show="results.length <= 0"\r\n        >Show {{ showingList ? \'cards\' : \'lists\'}}</v-btn>\r\n    </div>\r\n    <div>\r\n        <search-archive-results\r\n            @update="updateResults()" \r\n            :results="results">\r\n        </search-archive-results>\r\n    </div>\r\n    <section v-if="noResults" class="w-100" style="height: 200px">\r\n        <div class="d-flex flex-column align-center text-center justify-center fill-height">\r\n            <v-icon size="40">mdi-magnify</v-icon>\r\n            <p class="mt-2">No search results found.</p>\r\n        </div>\r\n    </section>\r\n</section>';});


define('text!components/templates/searchArchiveResults.html',[],function () { return '<section class="d-flex flex-column">\r\n    <!--Card search results-->\r\n    <section v-if="cards.length > 0">\r\n        <h4 class="text-uppercase">Cards</h4>\r\n        <archived-cards @update="$emit(\'update\')" :cards="cards"></archived-cards>\r\n    </section>\r\n    <!--end Card search results-->\r\n\r\n    <!--List search results-->\r\n    <section v-if="lists.length > 0">\r\n        <h4 class="text-uppercase">Lists</h4>\r\n        <archived-lists @update="$emit(\'update\')" :lists="lists"></archived-lists>\r\n    </section>\r\n    <!--end list search results-->\r\n</section>';});

define('components/searchArchiveResults',['text!components/templates/searchArchiveResults.html','components/archivedCards','components/archivedLists'],
(template, archivedCards, archivedLists) => {
    return Vue.extend({
        template,
        props: ['results'],
        computed: {
            cards(){
                return this.results.filter(r => r.type === 'CARD');
            },
            lists(){
                return this.results.filter(r => r.type === 'LIST');
            }
        },
        components: {
            archivedCards,
            archivedLists
        }
    });
});
define('components/searchArchive',['text!components/templates/searchArchive.html','components/searchArchiveResults','fuse','store/index'],
(template, searchArchiveResults, Fuse, store) => {
    
    let mergeArrays = function(){
        let merged = [];
        for( let index in arguments){
            arguments[index].forEach(element => {
                merged.push(element);
            });
        };
        return merged;
    };

    let isNotEmpty = (val) => { 
        if (val === null) return false;
        return (/\S/.test(val));
    };

    return Vue.extend({
        template,
        props: ['board','showingList'],
        components: {
            searchArchiveResults
        },
        data() {
            return {
                keyword: '',
                results: []
            }
        },
        computed: {
            cards(){
                return store.getters['cards/getAll'].filter(c => c.archived && c.boardID === this.board.id);
            },
            lists(){
                return store.getters['lists/getAll'].filter(l => l.archived && l.boardID === this.board.id);
            },
            noResults(){
                return (this.results.length <= 0) && isNotEmpty(this.keyword);
            }
        },
        methods: {
            emitEvents(){
                let isValid = isNotEmpty(this.keyword);
                let event = (isValid) ? 'start' : 'end';
                this.$emit(event);
            },
            clearKeyword(){
                this.keyword = '';
                return this;
            },
            updateResults(){
                let lists = this.fuseSearch( this.lists, ['title']).map((x) => { x.type = 'LIST'; return x;})
                let cards = this.fuseSearch( this.cards, ['title']).map((x) => { x.type = 'CARD'; return x;});
                this.results = mergeArrays(lists, cards);
            },
            clearResults(){
                this.results = [];
            },
            fuseSearch(list, keys = ['title']){
                let options = {keys};
                let fuse = new Fuse(list, options);
                return fuse.search(`=${this.keyword}`).map(r => r.item);
            }
        },
        created() {
            let self = this;

            this.$on('start', () => {
                self.updateResults();
            });
            this.$on('end', () => {
                self.clearResults();
            });
        },
    });
});
define('components/boardArchive',['text!components/templates/boardArchive.html','components/archiveBody','components/searchArchive'],
(template, archiveBody, searchArchive) => {
    return Vue.extend({
        template,
        data() {
            return {
                searching: false,
                showingList: false
            }
        },
        props: ['board'],
        components: {
            archiveBody,
            searchArchive
        },
        methods: {
            toggleShowingList(){
                this.showingList ^= true;
            }
        }
    });
});

define('text!components/templates/boardLabels.html',[],function () { return '<section class="d-flex flex-column pa-4">\r\n    <search-labels\r\n        :board="board"\r\n        @start="searching = true"\r\n        @end="searching = false"\r\n    ></search-labels>\r\n\r\n    <div class="d-flex flex-column mt-4" >\r\n        <labels-list \r\n            v-show="!searching"\r\n            :labels="labels"\r\n        ></labels-list>\r\n    </div>\r\n\r\n    <create-label :board="board"></create-label>\r\n</section>';});

define('components/boardLabels',['text!components/templates/boardLabels.html','components/searchLabels','components/createLabel','components/labelsList','store/index'],
(template, searchLabels, createLabel, labelsList, store) => {

    return Vue.extend({
        template,
        props: ['board'],
        data() {
            return {
                searching : false
            }
        },
        computed: {
            labels(){
                return store.getters['labels/getAll'].filter(l => l.boardID === this.board.id).sort((a, b) => a.created - b.created);
            }
        },
        components: {
            searchLabels,
            labelsList,
            createLabel
        }
    });
});

define('text!components/templates/closeBoard.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-x\r\n    left\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-list-item link v-on="on">\r\n            <v-list-item-action>\r\n                <v-icon></v-icon>\r\n            </v-list-item-action>\r\n            <v-list-item-content>\r\n                <v-list-item-title>Close Board</v-list-item-title>\r\n            </v-list-item-content>\r\n        </v-list-item>\r\n    </template>\r\n    <v-card width="350">\r\n        <v-card-title class="pa-1">\r\n            <v-spacer></v-spacer>\r\n            <small>Close this board?</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close" icon>\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="px-3">\r\n            <p>This will close the board.You can re-open it in boards > closed boards</p>\r\n            <v-btn \r\n                elevation="0"\r\n                block \r\n                color="red darken-3 white--text" \r\n                class="text-none" \r\n                @click="closeBoard()"\r\n            >Close Board</v-btn>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/closeBoard',['text!components/templates/closeBoard.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['board'],
        mixins: [openAndClose],
        methods: {
            closeBoard(){
                this.dispatchToStore();
            },
            dispatchToStore(){
                store.dispatch('boards/close', this.board);
            }
        },
    });
});
define('components/boardMenu',['text!components/templates/boardMenu.html','mixins/openAndClose',
'components/aboutBoard','components/changeBoardBackground','components/searchCards','components/boardArchive','components/boardLabels'
,'components/closeBoard','observers/global'],
(template, openAndClose, aboutBoard, changeBoardBackground, searchCards, boardArchive, boardLabels, closeBoard, observer) => {
    return Vue.extend({
        template,
        props: ['board'],
        data() {
            return {
                window: 0
            }
        },
        components : {
            aboutBoard,
            changeBoardBackground,
            searchCards,
            boardArchive,
            boardLabels,
            closeBoard
        },
        mixins: [openAndClose],
        methods: {
            handleEvents(){
                observer.$on('boardMenu/toggle', this.toggle);
            },
            toggle(){
                if (!this.opened) 
                    this.open();
                else
                    this.close();
            }
        },
        created() {
            this.handleEvents();
        }
    });
});

define('text!components/templates/closedBoardMessage.html',[],function () { return '<v-card width="350">\r\n    <v-card-title class="pa-2">\r\n        <h3 class="mx-auto">Board is closed</h3>\r\n    </v-card-title>\r\n    <v-divider></v-divider>\r\n    <v-card-text class="pa-2">\r\n        <p class="text-center">The board \'{{board.title}}\' has been closed.You can re-open it to bring it back or you can totally remove it by deleting.</p>\r\n    </v-card-text>\r\n    <v-divider></v-divider>\r\n    <v-card-actions class="pa-2">\r\n        <v-btn\r\n            @click="openBoard()"\r\n            color="green white--text"\r\n            class="text-none"\r\n            elevation="0"\r\n        >\r\n            Open Board\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n        <v-btn\r\n            @click="deleteBoard()"\r\n            color="red darken-3 white--text"\r\n            class="text-none"\r\n            elevation="0"\r\n        >\r\n            Delete Board\r\n        </v-btn>\r\n    </v-card-actions>\r\n</v-card>';});

define('components/closedBoardMessage',['text!components/templates/closedBoardMessage.html','store/index'],
(template, store) => {

    return Vue.extend({
        template,
        props: ['board'],
        methods: {
            openBoard(){
                this.dispatchToStore();
            },
            deleteBoard(){
                store.dispatch('boards/delete', this.board.id);
                this.$router.replace('/');
            },
            dispatchToStore(){
                let board = Object.assign({}, this.board);
                board.closed = false;
                store.dispatch('boards/update', board);
            }
        },
    });

});

define('text!components/templates/noBoardMessage.html',[],function () { return '<v-card width="350">\r\n    <v-card-title class="pa-2">\r\n        <h3 class="mx-auto">Board not found</h3>\r\n    </v-card-title>\r\n    <v-divider></v-divider>\r\n    <v-card-text class="pa-2">\r\n        <p class="text-center">This board has not been found.It might have been deleted.You might find the board you are looking for with the other boards.</p>\r\n    </v-card-text>\r\n    <v-divider></v-divider>\r\n    <v-card-actions class="pa-2">\r\n        <v-spacer></v-spacer>\r\n        <v-btn\r\n            @click="$router.replace(\'/boards\')"\r\n            color="green white--text"\r\n            class="text-none"\r\n            elevation="0"\r\n        >\r\n            View all boards\r\n        </v-btn>\r\n    </v-card-actions>\r\n</v-card>';});

define('components/noBoardMessage',['text!components/templates/noBoardMessage.html'],
(template) => {
    return Vue.extend({
        template
    });
});
define('pages/board',['text!pages/templates/board.html','components/boardHeader','components/boardBody',
'components/boardMenu','components/closedBoardMessage','components/noBoardMessage','store/index','observers/global'],
(template, boardHeader, boardBody, boardMenu, closedBoardMessage, noBoardMessage, store, observer) => {

    return Vue.extend({
        template,
        components: {
            boardHeader,
            boardBody,
            boardMenu,
            closedBoardMessage,
            noBoardMessage
        },
        data() {
            return {
                loading: true,
                boardIsClosed: false,
                board: false
            }
        },
        methods: {
            loadBoard(boardID){
                let self = this;
                self.loading = true;
                setTimeout(() => {
                    let board = self.getBoardFromStore(boardID);
                    if ( typeof board !== 'undefined') { 
                        self.doLoadBoard(board);
                    }else{
                        self.setBoard(false);
                    }
                }, (Math.random() * 500) + 1000 );
            },

            doLoadBoard(board){
                this.setBoard(board);
                this.updateData(board);
                observer.$emit('board/load', board);
                this.$refs.boardBody.load();
            },

            getBoardFromStore(boardID){
                return store.getters['boards/getAll'].find(b => b.id === boardID);
            },

            setBoard(board){
                this.loading = false;
                this.board = board;
            },

            updateData(board){
                this.boardIsClosed = board.closed;
            },

            handleEvents(){
                let self = this;
                observer.$on('board/close', board => {
                    if (self.isBoard(board)){
                        self.updateData(board);
                    }
                });
            },
            isBoard(board){
                return board.id === this.board.id;
            }
        },
        created() {
            this.handleEvents();
        },
        beforeRouteEnter (to, from, next) {
            let boardID = to.params.id;
            next(self => {
                self.boardID = boardID;
                observer.$emit('board/enter', boardID);
                self.loadBoard(boardID);
            });
        },
        beforeRouteUpdate (to, from, next) {
            let boardID = to.params.id;
            this.boardID = boardID;
            observer.$emit('board/enter', boardID);

            /*--Only load the board if id has changed--*/
            if ( !this.isBoard({ id: boardID})){
                this.loadBoard(boardID);
            };

            next();
        },
        beforeRouteLeave (to, from, next) {
            observer.$emit('board/leave');
            next();
        }
    });
});

define('text!pages/templates/card.html',[],function () { return '<v-dialog\r\n    v-model="opened"\r\n    width="750"\r\n>\r\n    <v-card color="blue-grey lighten-5">\r\n        <v-card-text class="pa-0" v-if="card">\r\n            <v-progress-linear color="lime" striped height="50" value="100" v-if="card.archived">\r\n                This card has been archived\r\n            </v-progress-linear>\r\n            <v-container>\r\n                <v-row>\r\n                    <v-col md="9">\r\n                        <section class="d-flex flex-column">\r\n                            <card-page-title class="mb-5" :card="card"></card-page-title>\r\n                            <card-page-labels class="mb-5 pl-5 ml-5" :card="card"></card-page-labels>\r\n                            <card-description class="mt-5 mb-5" :card="card"></card-description>\r\n                            <checklist-group class="mt-5" :card="card"></checklist-group>\r\n                        </section>\r\n                    </v-col>\r\n                    <v-col md="3">\r\n                        <section class="d-flex flex-column">\r\n                            <div class="d-flex">\r\n                                <v-spacer></v-spacer>\r\n                                <v-btn @click="close" icon>\r\n                                    <v-icon>mdi-close</v-icon>\r\n                                </v-btn>\r\n                            </div>\r\n                            <card-page-controls :card="card"></card-page-controls>\r\n                        </section>\r\n                    </v-col>\r\n                </v-row>\r\n            </v-container>\r\n        </v-card-text>\r\n\r\n        <!--Preloader-->\r\n        <v-sheet height="600" v-else>\r\n            <v-row class="fill-height d-flex align-center justify-center">\r\n                <v-progress-circular\r\n                    indeterminate\r\n                    color="primary"\r\n                ></v-progress-circular>\r\n            </v-row>\r\n        </v-sheet>\r\n    </v-card>\r\n</v-dialog>';});


define('text!components/templates/cardPageTitle.html',[],function () { return '<div class="d-flex flex-column">\r\n    <div v-show="!opened">\r\n        <div class="d-flex align-start">\r\n            <div>\r\n                <v-icon size="30">\r\n                    mdi-credit-card\r\n                </v-icon>\r\n            </div>\r\n            <div class="d-flex flex-column ml-3" style="flex-grow: 1">\r\n                <span class="d-block w-100 cursor-pointer" @click="openEditor()">\r\n                    <h2 style="font-size: 1.5rem">{{ card.title }}</h2>\r\n                </span>\r\n                <small class="text-body-2 mt-2" v-if="list">\r\n                    in List\r\n                    <move-card ref="moveCard" :card="card">\r\n                        <u class="cursor-pointer" @click="$refs.moveCard.open()">{{ list.title }}</u>\r\n                    </move-card>\r\n                </small>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <edit-card-page-title \r\n        @close="close()" \r\n        ref="editor" \r\n        v-show="opened" \r\n        :card="card">\r\n    </edit-card-page-title>\r\n</div>';});


define('text!components/templates/editCardPageTitle.html',[],function () { return '<v-form @submit.prevent="saveCard">\r\n    <v-textarea\r\n        background-color="white"\r\n        @keydown="handleKeyDown"\r\n        solo\r\n        rows="2"\r\n        @blur="saveCard"\r\n        autofocus\r\n        v-model="title"\r\n        :hide-details="true"\r\n    ></v-textarea>\r\n    <div class="d-flex align-center py-2">\r\n        <v-btn\r\n            @click="saveCard()"\r\n            color="green"\r\n            class="white--text text-none"\r\n            elevation="0"\r\n        >Save</v-btn>\r\n        <v-btn icon @click="close()">\r\n            <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n</v-form>';});

define('components/editCardPageTitle',['text!components/templates/editCardPageTitle.html','store/index'],
(template, store) => {
    let isEmpty = (val) => !(/\S/.test(val));
    let isEnterKey = (event) => event.key === 'Enter';

    return Vue.extend({
        template,
        props: ['card'],
        watch: {
            card(newCard){
                this.loadTitle();
            }
        },
        data() {
            return {
                title: ''
            }
        },
        methods: {
            saveCard(){
                this.dispatchToStore();
                this.$emit('close');
            },
            dispatchToStore(){
                if (isEmpty(this.title)) return;
                
                let card = Object.assign({}, this.card);
                card.title = this.title;
                store.dispatch('cards/update', card);
            },
            handleKeyDown(evt){
                /*--Pressing the enter key submits the card for adding--*/
                if ( isEnterKey(evt) ) { 
                    evt.preventDefault();
                    this.saveCard();
                };
                return true;
            },
            loadTitle(){
                this.title = this.card.title;
            }
        },
        created() {
            this.loadTitle();
        }
    });
});
define('components/cardPageTitle',['text!components/templates/cardPageTitle.html',
'components/moveCard',
'components/editCardPageTitle','mixins/openAndClose','store/index'],
(template, moveCard, editCardPageTitle, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            moveCard,
            editCardPageTitle
        },
        mixins: [openAndClose],
        computed: {
            list(){
                return store.getters['lists/getAll'].find(l => l.id === this.card.listID);
            }
        },
        methods: {            
            openEditor(){
                this.$refs.editor.loadTitle();
                this.open();
            }
        }
    });
});

define('text!components/templates/cardPageLabels.html',[],function () { return '<div class="d-flex flex-column" v-if="labels.length > 0">\r\n    <b>LABELS</b>\r\n    <div class="d-flex align-center mt-2">\r\n        <div \r\n            @click="$refs.addLabel.open()"\r\n            :style="\'background-color: \'+label.color"\r\n            class="card-page-label rounded mr-2 white--text px-4 d-flex align-center cursor-pointer" \r\n            v-for="label in labels"\r\n            v-ripple>\r\n            <b>\r\n                {{ label.name }}\r\n            </b>\r\n        </div>\r\n        <edit-card-labels ref="addLabel" :card="card">\r\n            <v-btn icon @click="$refs.addLabel.open()">\r\n                <v-icon>mdi-plus</v-icon>\r\n            </v-btn>\r\n        </edit-card-labels>\r\n    </div>\r\n</div>';});

define('components/cardPageLabels',['text!components/templates/cardPageLabels.html','components/editCardLabels','store/index'],
(template, editCardLabels, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            editCardLabels
        },
        computed: {
            cardLabels(){
                return store.getters['cardLabels/getAll'].filter(c => c.cardID === this.card.id);
            },
            labels(){
                let labels = [];
                this.cardLabels.forEach(cardLabel => {
                    labels.push(
                        store.getters['labels/getAll'].find(l => l.id === cardLabel.labelID)
                    );
                });
                return labels;
            }
        }
    });
});

define('text!components/templates/cardDescription.html',[],function () { return '<div class="d-flex flex-column">\r\n    <div class="d-flex align-start">\r\n        <div>\r\n            <v-icon size="25">\r\n                mdi-view-headline\r\n            </v-icon>\r\n        </div>\r\n        <div class="d-flex flex-column ml-3" style="flex-grow: 1">\r\n            <h3>Description</h3>\r\n            <div class="mt-2">\r\n                <div class="cursor-pointer btn-custom-grey pa-3 text-body-2" @click="open()" v-show="!opened">\r\n                    <p v-if="hasDescription">\r\n                        {{ card.description }}\r\n                    </p>\r\n                    <p v-else>\r\n                        Describe this card more...\r\n                    </p>\r\n                </div>\r\n                <edit-card-description :card="card" v-show="opened" @close="close()"></edit-card-description>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!components/templates/editCardDescription.html',[],function () { return '<v-form\r\n    class="text-body-2"\r\n    @submit.prevent="saveDescription()"\r\n>\r\n    <v-textarea\r\n        placeholder="Describe this card more..."\r\n        autofocus\r\n        rows="2"\r\n        solo\r\n        hide-details="auto"\r\n        v-model="description"\r\n    ></v-textarea>\r\n    <div class="d-flex align-center py-2">\r\n        <v-btn\r\n            @click="saveDescription()"\r\n            color="green"\r\n            class="white--text text-none"\r\n            elevation="0"\r\n        >Save</v-btn>\r\n        <v-btn icon @click="close()">\r\n            <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n</v-form>';});

define('components/editCardDescription',['text!components/templates/editCardDescription.html','store/index'], 
(template, store) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        props: ['card'],
        data() {
            return {
                description: ''
            }
        },
        watch: {
            card(){
                this.loadDescription();
            }
        },
        methods: {
            saveDescription(){
                if (isEmpty(this.title)){
                    this.loadDescription();
                }else{
                    this.dispatchToStore();
                }

                this.close();
            },
            dispatchToStore(){
                let card = Object.assign({}, this.card);
                card.description = this.description;
                store.dispatch('cards/update', card);
            },
            close(){
                this.$emit('close');
            },
            loadDescription(){
                this.description = this.card.description;
            }
        },
        created() {
            this.loadDescription();
        }
    });
});
define('components/cardDescription',['text!components/templates/cardDescription.html','components/editCardDescription','mixins/openAndClose'],
(template, editCardDescription, openAndClose) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        props: ['card'],
        mixins: [openAndClose],
        components: {
            editCardDescription
        },
        computed: {
            hasDescription(){
                return !isEmpty(this.card.description);
            }
        },
    });
});

define('text!components/templates/checklistGroup.html',[],function () { return '<section class="d-flex flex-column" v-if="checklists.length > 0">\r\n    <checklist \r\n        v-for="checklists in checklists" \r\n        :checklist="checklists"\r\n    ></checklist>\r\n</section>';});


define('text!components/templates/checklist.html',[],function () { return '<div class="d-flex flex-column mb-2">\r\n    <checklist-header \r\n        :showingCompleted="showingCompleted"\r\n        @toggleShowingCompleted="toggleShowingCompleted" \r\n        :checklist="checklist" \r\n    />\r\n    <checklist-body \r\n        :checklist="checklist" \r\n        :showingCompleted="showingCompleted"\r\n    />\r\n    <add-checklist-item \r\n        class="mt-2 ml-5" \r\n        :checklist="checklist"\r\n    />\r\n</div>';});


define('text!components/templates/checklistHeader.html',[],function () { return '<div class="d-flex flex-column">\r\n    <div v-show="!opened">\r\n        <div class="d-flex align-center">\r\n            <v-icon>mdi-checkbox-marked-outline</v-icon>\r\n            <h3 @click="open()" class="cursor-pointer ml-3">{{ checklist.title }}</h3>\r\n            <v-spacer></v-spacer>\r\n            <v-btn v-if="completedItems.length > 0" @click="$emit(\'toggleShowingCompleted\')" elevation="0" class="btn-custom-grey">\r\n                {{ showingCompleted ? \'Hide Completed Items\' : \'Show Completed Items\' }}\r\n            </v-btn>\r\n            <delete-checklist :checklist="checklist"></delete-checklist>\r\n        </div>\r\n    </div>\r\n    <div v-show="opened">\r\n        <edit-checklist @close="close()" :checklist="checklist"></edit-checklist>\r\n    </div>\r\n</div>';});


define('text!components/templates/deleteChecklist.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn v-on="on" class="ml-2 btn-custom-grey" elevation="0">\r\n            Delete\r\n        </v-btn>\r\n    </template>\r\n    <v-card width="300">\r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>Delete Checklist?</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click="close()">\r\n                <v-icon size="20">mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="pa-2">\r\n            Are you sure you want to delete this checklist? Your action will be permanent and irreversible.\r\n        </v-card-text>\r\n        <v-card-actions class="pa-2">\r\n            <v-btn @click="deleteChecklist()" color="red accent-4 white--text" class="text-none" elevation="0" block>\r\n                Delete Checklist\r\n            </v-btn>\r\n        </v-card-actions>\r\n    </v-card>\r\n</v-menu>';});

define('components/deleteChecklist',['text!components/templates/deleteChecklist.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['checklist'],
        mixins: [openAndClose],
        methods: {
            deleteChecklist(){
                this.dispatchToStore();
            },
            dispatchToStore(){
                store.dispatch('checklists/delete', this.checklist.id);
            }
        }
    });
});

define('text!components/templates/editChecklist.html',[],function () { return '<v-form @submit.prevent="saveChecklist()" class="d-flex flex-column">\r\n    <v-text-field\r\n        autofocus\r\n        dense\r\n        label="Title"\r\n        filled\r\n        hide-details="auto"\r\n        placeholder="Checklist title.."\r\n        v-model="title"\r\n    ></v-text-field>\r\n    <div class="pt-2">\r\n        <v-btn @click="saveChecklist()" color="green white--text text-none" elevation="0">\r\n            Save\r\n        </v-btn>\r\n        <v-btn icon @click="close()">\r\n            <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n</v-form>';});

define('components/editChecklist',['text!components/templates/editChecklist.html','store/index'],
(template, store) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        data() {
            return {
                title: ''
            }
        },
        watch: {
            checklist(){
                this.loadTitle();
            }
        },
        props: ['checklist'],
        methods: {
            saveChecklist(){
                if (isEmpty(this.title)) this.loadTitle();
                else this.dispatchToStore();
                this.close();
            },
            dispatchToStore(){
                let checklist = Object.assign({}, this.checklist);
                checklist.title = this.title;
                store.dispatch('checklists/update', checklist);
            },
            close(){
                this.$emit('close');
            },
            loadTitle(){
                this.title = this.checklist.title;
            }
        },
        created() {
            this.loadTitle();
        },
    });
});
define('components/checklistHeader',['text!components/templates/checklistHeader.html','components/deleteChecklist','components/editChecklist','mixins/openAndClose','store/index'],
(template, deleteChecklist, editChecklist, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['checklist','showingCompleted'],
        computed: {
            completedItems(){
                return store.getters['checklistItems/getAll'].filter(c => c.checklistID === this.checklist.id && c.completed);
            }
        },
        components: {
            deleteChecklist,
            editChecklist
        },
        mixins: [openAndClose]
    });
});

define('text!components/templates/checklistBody.html',[],function () { return '<div class="d-flex flex-column" v-if="items.length > 0">\r\n    <div class="d-flex align-center">\r\n        <small>{{completion}}%</small>\r\n        <v-progress-linear \r\n            :color="color"\r\n            class="ml-2 rounded-sm"\r\n            height="7" \r\n            :value="completion"\r\n            background-color="blue-grey lighten-4"\r\n        ></v-progress-linear>\r\n    </div>\r\n    <div>\r\n        <checklist-item v-for="item in shownItems" :item="item"></checklist-item>\r\n    </div>\r\n</div>';});


define('text!components/templates/checklistItem.html',[],function () { return '<div>\r\n    <div v-show="!opened">\r\n        <div class="checklist-item d-flex align-center">\r\n            <v-btn @click.prevent="toggleComplete()" icon>\r\n                <v-icon color="blue" v-if="item.completed">mdi-checkbox-marked</v-icon>\r\n                <v-icon v-else>mdi-checkbox-blank-outline</v-icon>\r\n            </v-btn>\r\n            <b @click="open()" :class="{\'text-decoration-line-through\': item.completed}">{{ item.title }}</b>\r\n            <v-btn class="checklist-item_delete ml-auto" icon @click.prevent="deleteItem">\r\n                <v-icon size="22">mdi-close-circle-outline</v-icon>\r\n            </v-btn>\r\n        </div>\r\n    </div>\r\n    <div v-show="opened">\r\n        <edit-checklist-item @close="close()" :item="item"></edit-checklist-item>\r\n    </div>\r\n</div>';});


define('text!components/templates/editChecklistItem.html',[],function () { return '<v-form class="d-flex flex-column" @submit.prevent="editItem()">\r\n    <v-text-field\r\n        autofocus\r\n        dense\r\n        solo\r\n        hide-details="auto"\r\n        placeholder="Item title.."\r\n        v-model="title"\r\n    ></v-text-field>\r\n    <div class="pt-2">\r\n        <v-btn @click="editItem()" small color="green white--text text-none" elevation="0">\r\n            Save\r\n        </v-btn>\r\n        <v-btn small icon @click="close()">\r\n            <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n</v-form>';});

define('components/editChecklistItem',['text!components/templates/editChecklistItem.html','store/index'],
(template, store) => {
    let isEmpty = (val) => !(/\S/.test(val));
    return Vue.extend({
        template,
        props: ['item'],
        data() {
            return {
                title: ''
            }
        },
        watch: {
            item(){
                this.loadTitle();
            }
        },
        methods: {
            editItem(){
                if ( isEmpty(this.title) ) 
                    this.loadTitle();
                else 
                    this.dispatchToStore();

                this.close();
            },
            dispatchToStore(){
                let item = Object.assign({}, this.item);
                item.title = this.title;
                store.dispatch('checklistItems/update', item);
            },
            loadTitle(){
                this.title = this.item.title;
            },
            close(){
                this.$emit('close');
            }
        },
        created() {
            this.loadTitle();
        },
    });
});
define('components/checklistItem',['text!components/templates/checklistItem.html','components/editChecklistItem','mixins/openAndClose','store/index'],
(template, editChecklistItem, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['item'],
        mixins: [openAndClose],
        components: {
            editChecklistItem
        },
        methods: {
            toggleComplete(){
                let item = Object.assign({}, this.item);
                item.completed ^= true;
                store.dispatch('checklistItems/update', item);
            },
            deleteItem(){
                store.dispatch('checklistItems/delete', this.item.id);
            }
        },
    });
});
define('components/checklistBody',['text!components/templates/checklistBody.html','components/checklistItem','store/index'],
(template, checklistItem, store) => {
    return Vue.extend({
        template,
        props: ['checklist','showingCompleted'],
        computed: {
            items(){
                return store.getters['checklistItems/getAll'].filter(c => c.checklistID === this.checklist.id);
            },
            shownItems(){
                return this.showingCompleted ? this.items : this.items.filter(i => !i.completed);
            },
            completion(){
                let completedItems = this.items.filter(i => i.completed);
                return Math.floor((completedItems.length) / (this.items.length) * 100);
            },
            color(){
                return this.completion >= 100 ? 'green' : 'blue';
            }
        },
        components: {
            checklistItem
        }
    });
});

define('text!components/templates/addChecklistItem.html',[],function () { return '<div class="d-flex flex-column">\r\n    <div v-show="!opened">\r\n        <v-btn @click="open" class="btn-custom-grey ml-5 mb-2" elevation="0">\r\n            Add an item\r\n        </v-btn>\r\n        <v-spacer></v-spacer>\r\n    </div>\r\n\r\n    <v-form @submit.prevent="addItem()" v-show="opened">\r\n        <v-text-field\r\n            autocomplete="off"\r\n            autofocus\r\n            filled\r\n            dense\r\n            placeholder="Add an item"\r\n            hide-details="auto"\r\n            v-model="title"\r\n        ></v-text-field>\r\n        <div class="d-flex align-center pt-2">\r\n            <v-btn @click="addItem()" color="green white--text" class="text-none" elevation="0">\r\n                Add\r\n            </v-btn>\r\n            <v-btn icon @click="close()">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </div>\r\n    </v-form>\r\n</div>';});

define('components/addChecklistItem',['text!components/templates/addChecklistItem.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        data() {
            return {
                title: ''
            }
        },
        props: ['checklist'],
        mixins: [openAndClose],
        methods: {
            addItem(){
                this.dispatchToStore();
                this.reset();
            },
            dispatchToStore(){
                if (isEmpty(this.title)) return;
                store.dispatch('checklistItems/create',{
                    title: this.title,
                    checklistID: this.checklist.id
                });
            },
            reset(){
                this.title = '';
            }
        },
    });
});
define('components/checklist',['text!components/templates/checklist.html','components/checklistHeader','components/checklistBody','components/addChecklistItem'],
(template, checklistHeader, checklistBody, addChecklistItem) => {
    return Vue.extend({
        template,
        props: ['checklist'],
        data() {
            return {
                showingCompleted: true
            }
        },
        components : {
            checklistHeader,
            checklistBody,
            addChecklistItem
        },
        methods: {
            toggleShowingCompleted(){
                this.showingCompleted ^= true;
            }
        },
    });
});
define('components/checklistGroup',['text!components/templates/checklistGroup.html','components/checklist','store/index'],
(template, checklist, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        components :{
            checklist
        },
        computed: {
            checklists(){
                return store.getters['checklists/getAll'].filter(c => c.cardID === this.card.id);
            }
        },
    });
});

define('text!components/templates/cardPageControls.html',[],function () { return '<section class="d-flex flex-column">\r\n    <div>\r\n        <h4 class="text-uppercase mb-2">Add to card</h4>\r\n        <edit-card-labels ref="cardLabels" :card="card">\r\n            <v-btn @click="$refs.cardLabels.open()" elevation="0" class="btn-custom-grey mb-2" block>\r\n                <v-icon dense size="20" class="mr-3">mdi-label-outline</v-icon>\r\n                Labels\r\n                <v-spacer></v-spacer>\r\n            </v-btn>    \r\n        </edit-card-labels>\r\n\r\n        <add-checklist ref="addChecklist" :card="card">\r\n            <v-btn @click="$refs.addChecklist.open()" elevation="0" class="btn-custom-grey mb-2" block>\r\n                <v-icon dense size="20" class="mr-3">mdi-checkbox-marked-outline</v-icon>\r\n                Checklist\r\n                <v-spacer></v-spacer>\r\n            </v-btn>\r\n        </add-checklist>\r\n\r\n        <edit-card-schedule ref="scheduleCard" :card="card">\r\n            <v-btn @click="$refs.scheduleCard.open()" elevation="0" class="btn-custom-grey" block>\r\n                <v-icon dense size="20" class="mr-3">mdi-clock</v-icon>\r\n                Due Date\r\n                <v-spacer></v-spacer>\r\n            </v-btn>\r\n        </edit-card-schedule>\r\n    </div>\r\n    <div class="mt-4">\r\n        <h4 class="text-uppercase mb-2">Actions</h4>\r\n        <move-card :card="card" ref="moveCard">\r\n            <v-btn @click="$refs.moveCard.open()" elevation="0" class="btn-custom-grey mb-2" block>\r\n                <v-icon dense size="20" class="mr-3">mdi-arrow-right</v-icon>\r\n                Move\r\n                <v-spacer></v-spacer>\r\n            </v-btn>      \r\n        </move-card>\r\n        <copy-card :card="card" ref="copyCard">\r\n            <v-btn @click="$refs.copyCard.open()" elevation="0" class="btn-custom-grey mb-2" block>\r\n                <v-icon dense size="20" class="mr-3">mdi-content-copy</v-icon>\r\n                Copy\r\n                <v-spacer></v-spacer>\r\n            </v-btn>      \r\n        </copy-card>\r\n        <archive-card :card="card"></archive-card>\r\n    </div>    \r\n</section>';});


define('text!components/templates/addChecklist.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <slot>\r\n            <v-btn class="btn-dark mt-1" v-on="on">\r\n                <v-icon left dense>mdi-checkbox-marked-outline</v-icon>\r\n                Add checklist\r\n            </v-btn>\r\n        </slot>\r\n    </template>\r\n    <v-form @submit.prevent="addChecklist">\r\n        <v-card width="300">\r\n            <v-card-title class="pa-2">\r\n                <v-spacer></v-spacer>\r\n                <small>Add Checklist</small>\r\n                <v-spacer></v-spacer>\r\n                <v-btn icon @click="close()">\r\n                    <v-icon size="20">mdi-close</v-icon>\r\n                </v-btn>\r\n            </v-card-title>\r\n            <v-divider></v-divider>\r\n            <v-card-text class="pa-2">\r\n                <v-text-field\r\n                    autofocus\r\n                    label="Title"\r\n                    filled\r\n                    dense\r\n                    placeholder="Checklist title"\r\n                    hide-details="auto"\r\n                    v-model="title"\r\n                ></v-text-field>\r\n            </v-card-text>\r\n            <v-card-actions class="pa-2">\r\n                <v-btn color="green white--text" @click="addChecklist">\r\n                    Add\r\n                </v-btn>\r\n                <v-spacer></v-spacer>\r\n            </v-card-actions>\r\n        </v-card>\r\n    </v-form>\r\n</v-menu>';});

define('components/addChecklist',['text!components/templates/addChecklist.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    let isEmpty = (val) => !(/\S/.test(val));

    return Vue.extend({
        template,
        props: ['card'],
        mixins: [openAndClose],
        data() {
            return {
                title: 'Checklist'
            }
        },
        methods: {
            addChecklist(){
                this.dispatchToStore();
                this.reset();
                this.close();
            },
            dispatchToStore(){
                if (isEmpty(this.title)) return;
                store.dispatch('checklists/create',{
                    cardID: this.card.id,
                    title: this.title
                });
            },
            reset(){
                this.title = 'Checklist';
            }
        },
    });

});

define('text!components/templates/archiveCard.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn class="btn-custom-grey" elevation="0" v-on="on" block>\r\n            <v-icon dense class="mr-3">mdi-archive</v-icon>\r\n            {{ card.archived ? \'Unarchive\' : \'Archive\'}}\r\n            <v-spacer></v-spacer>\r\n        </v-btn>\r\n    </template>\r\n    <v-card width="300">\r\n        <v-card-title class="pa-2">\r\n            <v-spacer></v-spacer>\r\n            <small>{{ card.archived ? \'Unarchive Card\' : \'Archive Card\'}}</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close()" icon>\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="px-3" v-show="!card.archived">\r\n            <p>This will remove this card from this board.To view archived cards and bring them back to the board, click "Menu > Archived Items"</p>\r\n            <v-btn \r\n                block \r\n                color="red darken-3 white--text" \r\n                class="text-none" \r\n                @click="archiveCard()"\r\n            >Archive Card</v-btn>\r\n        </v-card-text>\r\n\r\n        <v-card-text class="px-3" v-show="card.archived">\r\n            <p>Restore this card to the board.It will no longer be archived.</p>\r\n            <v-btn \r\n                block \r\n                color="green darken-3 white--text" \r\n                class="text-none" \r\n                @click="unarchiveCard()"\r\n            >Unarchive Card</v-btn>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/archiveCard',['text!components/templates/archiveCard.html','mixins/openAndClose','store/index'],
(template, openAndClose, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        mixins: [openAndClose],
        methods: {
            toggleArchiveCard(){
                (this.card.archived) ? this.unarchiveCard() : this.archiveCard();
            },
            archiveCard(){
                store.dispatch('cards/archive', this.card);
            },
            unarchiveCard(){
                store.dispatch('cards/unarchive', this.card);
            }
        },
    })
});
define('components/cardPageControls',['text!components/templates/cardPageControls.html','components/addChecklist','components/editCardLabels',
'components/editCardSchedule','components/copyCard','components/moveCard','components/archiveCard'],
(template, addChecklist, editCardLabels, editCardSchedule, copyCard, moveCard, archiveCard) => {
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            addChecklist,
            editCardLabels,
            editCardSchedule,
            copyCard,
            moveCard,
            archiveCard
        }
    });
});
define('pages/card',['text!pages/templates/card.html','mixins/openAndClose','components/cardPageTitle',
'components/cardPageLabels','components/cardDescription','components/checklistGroup','components/cardPageControls','store/index'],
(template, openAndClose, cardPageTitle, cardPageLabels, cardDescription, checklistGroup, cardPageControls, store) => {

    return Vue.extend({
        template,
        mixins: [openAndClose],
        data() {
            return {
                cardID: ''
            }
        },
        computed: {
            card(){
                return store.getters['cards/getAll'].find(c => c.id === this.cardID);
            }
        },
        components : {
            cardPageTitle,
            cardPageLabels,
            cardDescription,
            checklistGroup,
            cardPageControls
        },
        watch: {
            opened(val){
                if (!val){
                    this.$router.back();
                }
            }
        },
        beforeRouteEnter (to, from, next) {
            next(self => {
                self.cardID = to.params.cardID;
                self.open();
            });
        },
        beforeRouteUpdate(to, from, next){
            this.cardID = to.params.cardID;
            next();
        }
    });
});

define('text!pages/templates/upcoming.html',[],function () { return '<v-container>\r\n    <v-row>\r\n        <v-col\r\n            cols="12"\r\n            md="3"\r\n        >\r\n            <navigation></navigation>\r\n        </v-col>\r\n        <v-col\r\n            md="9"\r\n        >\r\n            <upcoming-features></upcoming-features>\r\n        </v-col>\r\n    </v-row>\r\n</v-container>';});


define('text!components/templates/upcomingFeatures.html',[],function () { return '<v-container>\r\n    <h2>Upcoming Features</h2>\r\n    <p>The following features are planned for the upcoming releases of \'myKanban\'.\r\n        <br/>View on github for progress.</p>\r\n    <v-container>\r\n        <v-row>\r\n            <v-col md="4" v-for="feature in features">\r\n                <v-card>\r\n                    <v-card-title class="d-flex flex-column">\r\n                        <v-icon size="50" class="mx-auto" style="text-align: center;">\r\n                            {{ feature.icon }}\r\n                        </v-icon>\r\n                        <b class="text-center">{{ feature.title }}</b>\r\n                    </v-card-title>\r\n                    <v-card-text class="text-center">\r\n                        {{ feature.description }}\r\n                    </v-card-text>\r\n                </v-card>\r\n            </v-col>\r\n        </v-row>\r\n    </v-container>\r\n</v-container>';});

define('components/upcomingFeatures',['text!components/templates/upcomingFeatures.html'],
(template) => {
    let features = [{
        icon: 'mdi-credit-card-multiple',
        title: 'Card Templates',
        description: 'A card template will allow you to duplicate checklists and labels in an easy and convenient.'
    },{
        icon: 'mdi-attachment',
        title: 'Card Attachments',
        description: 'Attach important files relevant to your cards for extra information.'
    },{
        icon: 'mdi-window-restore',
        title: 'Board Templates',
        description: 'Get a head start in your boards by making a template with all the default cards'
    },{
        icon: 'mdi-download',
        title: 'Importing and exporting boards',
        description: 'Import boards from other apps like trello and jira and export your boards for portability and persistence.'
    },{
        icon: 'mdi-newspaper',
        title: 'Card covers',
        description: 'Add important imagery to your cards with covers for aesthetic purposes and to convey purpose.'
    }];

    return Vue.extend({
        template,
        data() {
            return {
                features
            }
        },
    });
});
define('pages/upcoming',['text!pages/templates/upcoming.html','components/mainNavigation','components/upcomingFeatures'],
(template, navigation, upcomingFeatures) => {
    return Vue.extend({
        template,
        components: {
            navigation,
            upcomingFeatures
        }
    });
});
define('router',['pages/boards','pages/board','pages/card','pages/upcoming'],
(boards, board, card, upcoming) => {

    let boardsRoute = {
        path: '/boards',
        name: 'boards',
        component: boards
    };

    let blogRoute = {
        path: '/upcoming',
        name: 'upcoming',
        component: upcoming
    };

    let boardRoute = {
        path: '/board/:id',
        name: 'board',
        component: board,
        children: [{
            name: 'boardCard',
            path: 'card/:cardID',
            component: card
        }]
    };

    let homeRoute = {
        path: '/',
        redirect: '/boards'
    };

    let fallbackRoute = {
        path: '/*',
        redirectTo: '/boards'
    };

    let routes = [
        boardsRoute,
        boardRoute,
        blogRoute,
        homeRoute,
        fallbackRoute
    ];

    return new VueRouter({
        routes
    });
});

define('text!components/templates/appHeader.html',[],function () { return '<div elevation="0" class="rounded-0 d-flex flex-column">\r\n    <v-app-bar\r\n        class="px-0"\r\n        :style="inBoard ? \'background-color: rgba(0, 0, 0, 0.25)\' : \'background-color: #0D47A1\' "\r\n        dark\r\n        flat\r\n        dense\r\n    >\r\n        <!--Buttons on the left-->\r\n        <div class="d-flex align-center">\r\n            <header-more></header-more>\r\n            <v-btn @click="goHome()" small icon class="btn-light pa-5 ml-1">\r\n                <v-icon>mdi-home</v-icon>\r\n            </v-btn>\r\n            <header-boards></header-boards>\r\n            <header-search></header-search>\r\n        </div>\r\n        <v-spacer></v-spacer>\r\n        <router-link to="/boards" tag="h3" class="app-title d-flex align-center cursor-pointer">\r\n            <v-icon left>mdi-credit-card-multiple</v-icon>\r\n            MyKanban\r\n        </router-link>\r\n        <v-spacer></v-spacer>\r\n        <!--Buttons on the right-->\r\n        <div class="d-flex align-center">\r\n            <header-create></header-create>\r\n            <header-information></header-information>\r\n            <header-notifications></header-notifications>\r\n        </div>\r\n    </v-app-bar>\r\n</div>';});


define('text!components/templates/headerMore.html',[],function () { return '<v-menu \r\n    v-model="opened"\r\n    offset-y\r\n    >\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn \r\n            small \r\n            icon \r\n            class="btn-light pa-5"\r\n            v-on="on"\r\n        >\r\n            <v-icon>mdi-apps</v-icon>\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card width="350">\r\n        <v-card-title>\r\n            <v-spacer></v-spacer>\r\n            <small>More by <a target="_blank" href="https://github.com/EnockDizraeli/">EnockDizraeli</a></small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon small @click="close()">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n\r\n        <v-card-text>\r\n            <h4>DISCOVER</h4>\r\n            <v-list-item v-for="app in apps" link @click="window.open( app.url )">\r\n                <v-list-item-action>\r\n                    <v-img width="35" height="35" :src="app.icon"></v-img>\r\n                </v-list-item-action>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>{{ app.name }}</v-list-item-title>\r\n                    <small class="text--secondary text-md-body-2">{{ app.description }}</small>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/headerMore',['text!components/templates/headerMore.html'],
(template) => {
    let apps = [{
        name: 'VueDoer',
        description: 'To-Do app that is simple and elegant.Free and open source too.',
        url: 'https://github.com/EnockDizraeli/vueDoer/',
        icon: 'images/vueDoer.png'
    }];

    return Vue.extend({
        template,
        data() {
            return {
                opened: false,
                apps
            }
        },
        methods: {
            close(){
                this.opened = false;
            },
            open(){
                this.opened = true;
            }
        }
    });
});

define('text!components/templates/headerBoards.html',[],function () { return '<v-menu\r\n    offset-y\r\n    :close-on-content-click="false"\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn dense class="btn-light ml-1" v-on="on">\r\n            <v-icon left dense>mdi-credit-card-multiple</v-icon>\r\n            Boards\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card width="300">\r\n        <header-boards-find \r\n            @close="close"\r\n            @start="searching = true"\r\n            @end="searching = false"\r\n        ></header-boards-find>\r\n        <header-boards-list\r\n            v-show="!searching"\r\n        ></header-boards-list>\r\n    </v-card>\r\n</v-menu>';});


define('text!components/templates/headerBoardsFind.html',[],function () { return '<div class="pa-3 pb-0">\r\n    <div class="d-flex align-center">\r\n        <v-text-field\r\n            dense\r\n            outlined\r\n            placeholder="Find Boards by name"\r\n            hide-details="true"\r\n            autocomplete="off"\r\n            v-model="keyword"\r\n        ></v-text-field>\r\n        <v-btn\r\n            icon\r\n            @click="$emit(\'close\')"\r\n            class="ml-2"\r\n        >\r\n            <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n    </div>\r\n\r\n    <section class="py-4" v-show="searching">\r\n        <div v-if="boards.length > 0" class="d-flex flex-column">\r\n            <board-tape :board="board" v-for="board in boards"></board-tape>\r\n        </div>\r\n        <div class="pa-3 d-flex justify-center" v-else>\r\n            <b class="text-center font-weight-thin">No board found with that title.</b>\r\n        </div>\r\n\r\n        <!--Create board prompt-->\r\n        <create-board\r\n            ref="createBoard"\r\n        >\r\n            <div @click="$refs.createBoard.open().setTitle( keyword )" class="pa-2 mt-2 grey lighten-4 cursor-pointer" v-ripple>\r\n                <u>Create a board named `{{ keyword }}`</u>\r\n            </div>\r\n        </create-board>\r\n    </section>\r\n</div>';});


define('text!components/templates/boardTape.html',[],function () { return '<router-link\r\n    :to="{ name: \'board\',params: { id: board.id}}"\r\n    class="board-tape mt-1 rounded-sm cursor-pointer" \r\n    :style="\'background-color:\'+board.background" \r\n    v-ripple\r\n    tag="div"\r\n    >\r\n    <span class="btn-light pa-2" style="width: 85%">\r\n        <b style="max-width: 100%" class="ml-2 d-inline-block text-truncate">{{ board.title }}</b>\r\n    </span>\r\n    <v-btn @click.prevent="toggleStarred" small icon color="white" class="ml-1 board-tape_star">\r\n        <v-icon v-if="board.starred">mdi-star</v-icon>\r\n        <v-icon v-else>mdi-star-outline</v-icon>\r\n    </v-btn>\r\n</router-link>';});

define('components/boardTape',['text!components/templates/boardTape.html','store/index'],
(template, store) => {
    return Vue.extend({
        template,
        props: ['board'],
        methods: {
            toggleStarred(){
                let board = Object.assign({}, this.board);
                board.starred ^= true;
                store.dispatch('boards/update', board);
            }
        },
    });
});
define('components/headerBoardsFind',['text!components/templates/headerBoardsFind.html','components/boardTape','components/createBoard','store/index','fuse'],
(template, boardTape, createBoard, store, Fuse) => {

    let isEmpty = (val) => !(/\S/.test(val));
    return Vue.extend({
        template,
        components: {
            boardTape,
            createBoard
        },
        data() {
            return {
                keyword: ''
            }
        },
        watch: {
            keyword(val){
                let event = (isEmpty(val)) ? 'end' : 'start';
                this.$emit(event);
            }
        },
        computed: {
            searching(){
                return !isEmpty( this.keyword );
            },
            boards(){
                let list = store.getters['boards/getAll'];
                let keys = ['title'];
                return this.fuseSearch(list, keys);
            }
        },
        methods: {
            fuseSearch(list, keys = ['name']){
                let options = {keys};
                let fuse = new Fuse(list, options);
                return fuse.search(`=${this.keyword}`).map(r => r.item);
            }
        },
    });
});

define('text!components/templates/headerBoardsList.html',[],function () { return '<div class="pa-3" style="font-size: 0.875rem">\r\n    <section>\r\n        <div class="d-flex align-center">\r\n            <v-icon>mdi-star-outline</v-icon>\r\n            <b class="ml-2">STARRED BOARDS</b>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click="showingStarred ^= true">\r\n                <v-icon v-if="showingStarred">mdi-minus</v-icon>\r\n                <v-icon v-else>mdi-plus</v-icon>\r\n            </v-btn>\r\n        </div>\r\n        <div v-show="showingStarred">\r\n            <board-tape :board="board" v-for="board in starredBoards"></board-tape>\r\n        </div>\r\n    </section>\r\n    \r\n    <section>\r\n        <div class="d-flex align-center">\r\n            <v-icon>mdi-account-outline</v-icon>\r\n            <b class="ml-2">PERSONAL BOARDS</b>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon @click="showingPersonal ^= true">\r\n                <v-icon v-if="showingPersonal">mdi-minus</v-icon>\r\n                <v-icon v-else>mdi-plus</v-icon>\r\n            </v-btn>\r\n        </div>\r\n        <div v-show="showingPersonal">\r\n            <board-tape :board="board" v-for="board in boards"></board-tape>\r\n        </div>\r\n    </section>\r\n\r\n    <create-board ref="createBoard">\r\n        <v-btn\r\n        @click="$refs.createBoard.open()"\r\n        small\r\n        color="primary"\r\n        outlined \r\n        elevation="0" \r\n        class="mt-3" \r\n        block\r\n        >Create new board</v-btn>\r\n    </create-board>\r\n</div>';});

define('components/headerBoardsList',['text!components/templates/headerBoardsList.html',
'components/boardTape','components/createBoard','store/index'],
(template, boardTape, createBoard, store) => {

    return Vue.extend({
        template,
        data() {
            return {
                showingStarred: true,
                showingPersonal: false
            }
        },
        components: {
            boardTape,
            createBoard,
        },
        computed: {
            starredBoards(){
                return this.boards.filter(b => b.starred);
            },
            boards(){
                return store.getters['boards/getAll'].filter(b => !b.closed);
            }
        }
    });
});
define('components/headerBoards',['text!components/templates/headerBoards.html','components/headerBoardsFind','components/headerBoardsList'],
(template, headerBoardsFind, headerBoardsList) => {
    return Vue.extend({
        template,
        components: {
            headerBoardsFind,
            headerBoardsList
        },
        data() {
            return {
                opened: false,
                searching: false,
            }
        },
        methods: {
            open(){
                this.opened = true;
            },
            close(){
                this.opened = false;
            }
        },
    });
});

define('text!components/templates/headerCreate.html',[],function () { return '<v-menu\r\n    v-model="opened"\r\n    offset-y\r\n    :close-on-content-click="false"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn \r\n            small \r\n            icon \r\n            class="btn-light pa-5"\r\n            v-on="on"\r\n        >\r\n            <v-icon>mdi-plus</v-icon>\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card width="350">\r\n        <v-card-title class="pa-3">\r\n            <v-spacer></v-spacer>\r\n            <small>Create</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn small icon @click="close">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text>\r\n\r\n            <create-board ref="createBoard">\r\n                <div @click="$refs.createBoard.open()" class="d-flex flex-column cursor-pointer" v-ripple>\r\n                    <h4><v-icon dense left>mdi-credit-card-multiple</v-icon>Create Board</h4>\r\n                    <b class="mt-1 font-weight-thin">A board is made up of cards ordered on lists.Use it to manage projects or organize just about anything.</b>\r\n                </div>\r\n            </create-board>\r\n\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/headerCreate',['text!components/templates/headerCreate.html','components/createBoard'],
(template, createBoard) => {
    return Vue.extend({
        template,
        data() {
            return {
                opened: false
            }
        },
        components: {
            createBoard
        },
        methods: {
            close(){
                this.opened = false;
            }
        },
    });
});

define('text!components/templates/headersearch.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-text-field\r\n            @keydown="open"\r\n            @focus="open"\r\n            append-icon="mdi-magnify"\r\n            color="primary"\r\n            solo-inverted\r\n            dense\r\n            class="ml-1 btn-light"\r\n            hide-details="auto"\r\n            clearable\r\n            v-model="keyword"\r\n        ></v-text-field>\r\n    </template>\r\n\r\n    <v-card width="500" color="grey lighten-4" style="max-height: 85vh;overflow-y: auto;overflow-x: hidden;">\r\n        <v-card-text class="pa-2">\r\n            <header-search-results :results="results"></header-search-results>\r\n            <!--No results-->\r\n            <div class="pa-3 d-flex justify-center" v-if="noResults">\r\n                <b class="text-center font-weight-thin">Sorry I found nothing matching that keyword.</b>\r\n            </div>\r\n\r\n            <!--Not yet typed-->\r\n            <div class="pa-3 d-flex flex-column justify-center" v-if="prompt">\r\n                <v-icon large>mdi-magnify</v-icon>\r\n                <b class="text-center font-weight-thin">Type in anything, I\'ll look through your cards and boards.</b>\r\n            </div>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});


define('text!components/templates/headerSearchResults.html',[],function () { return '<section v-if="results.length > 0">\r\n    <!--Card search results-->\r\n    <section v-if="cardResults.length > 0">\r\n        <h4 class="text-uppercase">Cards</h4>\r\n        <card-search-result v-for="card in cardResults" :card="card"></card-search-result>\r\n    </section>\r\n    <!--end Card search results-->\r\n\r\n    <!--Board search results-->\r\n    <v-container class="pa-0" v-if="boardResults.length > 0">\r\n        <h4 class="text-uppercase">Boards</h4>\r\n        <v-row class="px-2">\r\n            <v-col class="pa-1" md="6" v-for="board in boardResults">\r\n                <board-tape :board="board"></board-tape>\r\n            </v-col> \r\n        </v-row>\r\n    </v-container>\r\n    <!--end Board search results-->\r\n</section>';});


define('text!components/templates/cardSearchResult.html',[],function () { return '<v-container class="mb-1 pa-0">\r\n    <v-row>\r\n        <v-col md="4">\r\n            <card :editable="false" :card="card"></card>\r\n        </v-col>\r\n        <v-col md="8" class="px-1">\r\n            <div class="d-flex flex-column">\r\n                <h3>{{ card.title }}</h3>\r\n                <div class="d-inline-block" v-if="board && list">\r\n                    in <b  class="blue-grey--text text--darken-3">{{ list.title }}</b> on \r\n                    <router-link :to="{name: \'board\',params: {id: board.id}}" tag="b" class="cursor-pointer blue-grey--text text--darken-3">{{ board.title }}</router-link>\r\n                </div>\r\n            </div>\r\n        </v-col>\r\n    </v-row>\r\n</v-container>';});

define('components/cardSearchResult',['text!components/templates/cardSearchResult.html','components/card','store/index'],
(template, card, store) => {
    return Vue.extend({
        template,
        props: ['card'],
        components: {
            card
        },
        computed: {
            list(){
                return store.getters['lists/getAll'].find(l => l.id === this.card.listID);
            },
            board(){
                return store.getters['boards/getAll'].find(b => b.id === this.card.boardID);
            }
        },
    });
});
define('components/headerSearchResults',['text!components/templates/headerSearchResults.html','components/cardSearchResult','components/boardTape'],
(template, cardSearchResult, boardTape) => {
    return Vue.extend({
        template,
        props: ['results'],
        computed: {
            cardResults(){
                return this.results.filter(c => c.type === 'CARD')
            },
            boardResults(){
                return this.results.filter(b => b.type === 'BOARD')
            }
        },
        components: {
            cardSearchResult,
            boardTape
        }
    });
});
define('components/headerSearch',['text!components/templates/headersearch.html','mixins/openAndClose',
'components/headerSearchResults','store/index','fuse'],
(template, openAndClose, headerSearchResults, store, Fuse) => {

    let isEmpty = (val) => !(/\S/.test(val));

    let mergeArrays = function(){
        let merged = [];
        for( let index in arguments){
            arguments[index].forEach(element => {
                merged.push(element);
            });
        };
        return merged;
    };

    return Vue.extend({
        template,
        mixins: [openAndClose],
        components: {
            headerSearchResults
        },
        data() {
            return {
                keyword: '',
                results: []
            }
        },
        watch: {
            keyword(val){
                let boards = this.fuseSearch( this.boards, ['title']).map((x) => { x.type = 'BOARD'; return x;})
                let cards = this.fuseSearch( this.cards, ['title']).map((x) => { x.type = 'CARD'; return x;});
                this.results = mergeArrays(boards, cards);
            }
        },
        computed: {
            cards(){
                return store.getters['cards/getAll'];
            },
            boards(){
                return store.getters['boards/getAll'];
            },
            noResults(){
                return (this.results.length <= 0) && !isEmpty(this.keyword);
            },
            prompt(){
                return this.opened && isEmpty(this.keyword);
            }
        },
        methods: {
            fuseSearch(list, keys = ['title']){
                let options = {keys};
                let fuse = new Fuse(list, options);
                return fuse.search(`=${this.keyword}`).map(r => r.item);
            }
        }
    });

});

define('text!components/templates/headerInformation.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn \r\n            small \r\n            icon \r\n            class="btn-light pa-5 ml-1"\r\n            v-on="on"\r\n        >\r\n            <v-icon>mdi-information-outline</v-icon>\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card\r\n        width="350"\r\n    >\r\n        <v-card-title class="pa-3">\r\n            <v-spacer></v-spacer>\r\n            <small>Information</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n                icon\r\n                small\r\n                @click="close()"\r\n            >\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text>\r\n            <h5>What is this?</h5>\r\n            <p>\r\n                myKanban is a free and open source kanban app.<br/>\r\n                It draws inspiration from industry leaders withut charging a single cent.<br/>\r\n                It can be used offline in a browser environment.<br/>\r\n                Join our online communities to share your ideas on what you would like to see in future versions.<br/>\r\n            </p>\r\n            <v-divider></v-divider>\r\n            <div class="d-flex justify-space-between flex-wrap py-2">\r\n                <a href="https://github.com/EnockDizraeli/myKanban" target="_blank">Github</a>\r\n                <a href="https://www.paypal.com/donate?hosted_button_id=8LYP72P6XAF36" target="_blank">Sponsor</a>\r\n                <a href="https://web.facebook.com/MyKanban-108996564624245" target="_blank">Facebook</a>\r\n                <a href="https://twitter.com/EDizraeli" target="_blank">Twitter</a>\r\n            </div>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/headerInformation',['text!components/templates/headerInformation.html'],
(template) => {
    return Vue.extend({
        template,
        data() {
            return {
                opened: false
            }
        },
        methods: {
            close(){
                this.opened = false;
            }
        },
    });
});

define('text!components/templates/headerNotifications.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-btn \r\n            small \r\n            icon \r\n            class="btn-light pa-5 ml-1"\r\n            v-on="on"\r\n        >\r\n            <v-icon>mdi-bell-outline</v-icon>\r\n        </v-btn>\r\n    </template>\r\n\r\n    <v-card width="350">\r\n        <v-card-title class="pa-3">\r\n            <v-spacer></v-spacer>\r\n            <small>Notifications</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn icon small @click="close()">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        \r\n        <v-card-text>\r\n            <div class="fill-height d-flex align-center justify-center">\r\n                <h3 class="text-center">No notifications</h3>\r\n            </div>\r\n        </v-card-text>\r\n    </v-card>\r\n\r\n\r\n</v-menu>';});

define('components/headerNotifications',['text!components/templates/headerNotifications.html'],
(template) => {
    return Vue.extend({
        template,
        data() {
            return {
                opened: false
            }
        },
        methods: {
            close(){
                this.opened = false;
            }
        },
    });
});

define('text!components/templates/headerAccount.html',[],function () { return '<v-menu\r\n    offset-y\r\n    v-model="opened"\r\n>\r\n    <template v-slot:activator="{ on }">\r\n        <v-avatar size="36" color="grey lighten-5 ml-1 cursor-pointer" v-on="on">\r\n            <span class="black--text">GE</span>\r\n        </v-avatar>\r\n    </template>\r\n\r\n    <v-card width="350">\r\n        <v-card-title class="pa-3">\r\n            <v-spacer></v-spacer>\r\n            <small>Account</small>\r\n            <v-spacer></v-spacer>\r\n            <v-btn @click="close" icon small>\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-divider></v-divider>\r\n        <v-card-text class="pa-0">\r\n            <v-list-item>\r\n                <v-list-item-action>\r\n                    <v-avatar size="50" color="grey lighten-2 ml-1 cursor-pointer">\r\n                        <span class="black--text">GE</span>\r\n                    </v-avatar>\r\n                </v-list-item-action>\r\n                <v-list-item-content>\r\n                    <v-list-item-title>Guest</v-list-item-title>\r\n                    <v-list-item-subtitle>guest@example.com</v-list-item-subtitle>\r\n                </v-list-item-content>\r\n            </v-list-item>\r\n        </v-card-text>\r\n    </v-card>\r\n</v-menu>';});

define('components/headerAccount',['text!components/templates/headerAccount.html'],
(template) => {
    return Vue.extend({
        template,
        data() {
            return {
                opened: false
            }
        },
        methods: {
            close(){
                this.opened = false;
            }
        },
    });
});
define('components/appHeader',['text!components/templates/appHeader.html',
'components/headerMore','components/headerBoards',
'components/headerCreate','components/headerSearch','components/headerInformation',
'components/headerNotifications','components/headerAccount','observers/global'],
(template, headerMore, headerBoards, headerCreate, headerSearch, headerInformation, headerNotifications, headerAccount, observer) => {
    return Vue.extend({
        template,
        components: {
            headerMore,
            headerBoards,
            headerSearch,
            headerCreate,
            headerInformation,
            headerNotifications,
            headerAccount
        },
        data() {
            return {
                inBoard: false
            }
        },
        methods: {
            goHome(){
                let inHomePage = this.$router.currentRoute.path.includes('boards');
                if (!inHomePage) this.$router.push('/boards');
            },
            handleEvents(){
                let self = this;
                observer.$on('board/enter', () => {
                    self.inBoard = true;
                });
                observer.$on('board/leave', () => {
                    self.inBoard = false;
                });
            }
        },
        created() {
            this.handleEvents();
        },
    });
});
define('helpers/backgroundChange',['observers/global'],
(observer) => {
    return { 
        init
    };

    function init(){
        handleEvents();
    };
    
    function handleEvents(){
        observer.$on('board/load', (board) => {
            setBackground(board.background);
        });
        observer.$on('board/leave', () => {
            setBackground('#fff');
        });
    };

    function setBackground(color){
        document.getElementsByClassName('v-application--wrap')[0].style.background = color;
    };
});
define('helpers/titleChange',['observers/global'],
(observer) => {
    const DEFAULT_TITLE = 'myKanban | Kanban Board App';
    const TITLE_MAP = {
        'boards' : 'Boards',
        'upcoming': 'Upcoming Features'
    };

    return {
        init
    };

    function init(){
        handleEvents();
    };

    function handleEvents(){
        handleBoardLoad();
        handleRouteUpdate();
    };

    function handleBoardLoad(){
        observer.$on('board/load', board => {
            setTitle(board.title);
        });
    };

    function handleRouteUpdate(){
        require(['router'], router => {
            router.onReady(() => {
                setTitleUsingRoute(router.currentRoute);
            });

            router.beforeEach((to, from, next) => {
                setTitleUsingRoute(to);
                next();
            });
        });
    };

    function setTitleUsingRoute(route){
        let title = getValue(route.name) || DEFAULT_TITLE;
        setTitle(title);
    };

    function getValue(key){
        return TITLE_MAP[key];
    };

    function setTitle(value){
        document.title = value;
    };
});
define('helpers/labelCreator',['store/index','observers/global','model/jsonLoader'],
(store, observer, jsonLoader) => {
    let defaultLabels = [];

    return {
        init
    };

    function init(){
        handleEvents();
        loadColors();
    };

    function loadColors(){
        jsonLoader.load('label/default').then(labels => {
            defaultLabels = labels;
        }).catch(console.log);
    };

    function handleEvents(){
        observer.$on('board/create', createBoardLabels);
    };

    function createBoardLabels(board){
        defaultLabels.forEach(label => {
            store.dispatch('labels/create', {
                color: label.value,
                boardID: board.id,
                name: ''
            });
        });
    };

    
});
define('helpers/boardOpener',['observers/global'],
(observer) => {
    return { 
        init
    };

    function init(){
        handleEvents();
    };
    
    function handleEvents(){
        observer.$on('board/create', (board) => {
            openBoard(board);
        });
    };

    function openBoard(board){
        require(['router'] , router => {
            router.push({
                name: 'board',
                params: {
                    'id': board.id
                }
            })
        })
    };
    
});
define('helpers/initModules',['helpers/backgroundChange','helpers/titleChange','helpers/labelCreator','helpers/boardOpener'],
(backgroundChange, titleChange, labelCreator, boardOpener) => {
    /**This module handles the initialization of all modules usign their init interface*/
    return {
        init
    };

    function init(){
        backgroundChange.init();
        titleChange.init();
        labelCreator.init();
        boardOpener.init();
    };
});
requirejs.config({
    paths: {
        text: '../thirdParty/text',
        axios: '../thirdParty/axios.min',
        dexie: '../thirdParty/dexie.min',
        fuse: '../thirdParty/fuse.min',
        moment: '../thirdParty/moment.min'
    },
    waitSeconds: 0
});

require(['text','router','components/appHeader','helpers/initModules','store/index'],
(text, router, appHeader, initModules, store) => {
    function removePreloader(){
        let elem = document.getElementById('preloader');
        document.body.removeChild( elem );
    };

    return new Vue({
        router,
        el: '#app',
        vuetify: new Vuetify(),
        components: {
            appHeader
        },
        mounted() {
            removePreloader();
            initModules.init();
        },
        created() {
            store.loadData();
        },
    });
});
define("index", function(){});

